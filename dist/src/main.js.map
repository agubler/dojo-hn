{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f6005422d0dd660f8669","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///global.ts","webpack:///d.ts","webpack:///WidgetBase.ts","webpack:///has.ts","webpack:///Symbol.ts","webpack:///Map.ts","webpack:///Evented.ts","webpack:///WeakMap.ts","webpack:///Link.ts","webpack:///lang.ts","webpack:///Registry.ts","webpack:///object.ts","webpack:///iterator.ts","webpack:///Promise.ts","webpack:///(webpack)/buildin/global.js","webpack:///util.ts","webpack:///handleDecorator.ts","webpack:///RouterInjector.ts","webpack:///UrlSearchParams.ts","webpack:///interfaces.ts","webpack:///inject.ts","webpack:///Container.ts","webpack:///./node_modules/process/browser.js","webpack:///vdom.ts","webpack:///array.ts","webpack:///Injector.ts","webpack:///on.ts","webpack:///path.ts","webpack:///router.ts","webpack:///Outlet.ts","webpack:///sw.ts","webpack:///./node_modules/offline-plugin/runtime.js","webpack:///btr.ts","webpack:///./src/main.css?173b","webpack:///./src/main.ts","webpack:///Projector.ts","webpack:///./node_modules/pepjs/dist/pep.js","webpack:///cssTransitions.ts","webpack:///afterRender.ts","webpack:///string.ts","webpack:///number.ts","webpack:///queue.ts","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///aspect.ts","webpack:///Destroyable.ts","webpack:///HashHistory.ts","webpack:///HistoryBase.ts","webpack:///Router.ts","webpack:///Task.ts","webpack:///ExtensiblePromise.ts","webpack:///Route.ts","webpack:///./src/Context.ts","webpack:///./src/widgets/App.ts","webpack:///diff.ts","webpack:///RegistryHandler.ts","webpack:///NodeHandler.ts","webpack:///./src/outlets/CommentsOutlet.ts","webpack:///beforeProperties.ts","webpack:///./src/containers/CommentsContainer.ts","webpack:///./src/widgets/Comments.ts","webpack:///./src/widgets/Comment.ts","webpack:///./src/widgets/styles/comment.m.css?1d4b","webpack:///./src/widgets/Loading.ts","webpack:///./src/widgets/styles/loading.m.css?06eb","webpack:///./src/widgets/styles/comments.m.css?fc03","webpack:///./src/outlets/ContentOutlet.ts","webpack:///./src/containers/ContentContainer.ts","webpack:///./src/widgets/Content.ts","webpack:///./src/widgets/Article.ts","webpack:///./src/widgets/styles/article.m.css?7877","webpack:///./src/widgets/styles/content.m.css?f89a","webpack:///./src/containers/MenuContainer.ts","webpack:///./src/widgets/Menu.ts","webpack:///./src/widgets/MenuItem.ts","webpack:///./src/widgets/styles/menuItem.m.css?33f5","webpack:///./src/widgets/styles/menu.m.css?9267","webpack:///./src/widgets/styles/app.m.css?7ef0"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AC7DA;AAAA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM,gBAAgB,sCAAsC,iBAAiB,EAAE;AAC/E,qBAAqB,uDAAuD;;AAE5E;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;;AAEA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;;AAEA;AACA,mCAAmC,oCAAoC;AACvE;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;;AAEA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;;AAEA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,sFAAsF,aAAa,EAAE;AACtH,sBAAsB,gCAAgC,qCAAqC,0CAA0C,EAAE,EAAE,GAAG;AAC5I,2BAA2B,MAAM,eAAe,EAAE,YAAY,oBAAoB,EAAE;AACpF,sBAAsB,oGAAoG;AAC1H,6BAA6B,uBAAuB;AACpD,4BAA4B,wBAAwB;AACpD,2BAA2B,yDAAyD;AACpF;;AAEA;AACA;AACA,iBAAiB,4CAA4C,SAAS,EAAE,qDAAqD,aAAa,EAAE;AAC5I,yBAAyB,gCAAgC,oBAAoB,gDAAgD,gBAAgB,GAAG;AAChJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC,uCAAuC,aAAa,EAAE,EAAE,OAAO,kBAAkB;AACjH;AACA;;;;;;;;;;ACrKA,IAAM,aAAY,EAAQ,CAAC;IAE1B,GAAG,CAAC,OAAO,OAAM,IAAK,WAAW,EAAE;QAClC;QACA;QACA;QACA,OAAO,MAAM;IACd;IACA,KAAK,GAAG,CAAC,OAAO,OAAM,IAAK,WAAW,EAAE;QACvC;QACA,OAAO,MAAM;IACd;IACA,KAAK,GAAG,CAAC,OAAO,KAAI,IAAK,WAAW,EAAE;QACrC;QACA,OAAO,IAAI;IACZ;AACD,CAAC,CAAC,EAAE;AAEJ,kBAAe,YAAY;;;;;;;;;;;;AClB3B;AAaA;;;AAGa,cAAK,EAAG,gBAAM,CAAC,yBAAyB,CAAC;AAEtD;;;AAGa,cAAK,EAAG,gBAAM,CAAC,yBAAyB,CAAC;AAEtD;;;AAGA,iBAAoF,KAAe;IAClG,OAAO,OAAO,CAAC,MAAK,GAAI,CAAC,OAAO,MAAK,IAAK,QAAQ,EAAC,GAAI,KAAK,CAAC,KAAI,IAAK,aAAK,CAAC;AAC7E;AAFA;AAIA;;;AAGA,iBAAwB,KAAY;IACnC,OAAO,OAAO,CAAC,MAAK,GAAI,CAAC,OAAO,MAAK,IAAK,QAAQ,EAAC,GAAI,KAAK,CAAC,KAAI,IAAK,aAAK,CAAC;AAC7E;AAFA;AAeA,kBAAyB,MAAuB,EAAE,QAAgC,EAAE,SAAqC;IACxH,IAAI,MAAK,EAAG,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,EAAC,iBAAM,MAAM,EAAG,EAAE,CAAE,MAAM,CAAE;IAC9D,OAAO,KAAK,CAAC,MAAM,EAAE;QACpB,IAAM,KAAI,EAAG,KAAK,CAAC,GAAG,EAAE;QACxB,GAAG,CAAC,IAAI,EAAE;YACT,GAAG,CAAC,CAAC,UAAS,GAAI,SAAS,CAAC,IAAI,CAAC,EAAE;gBAClC,QAAQ,CAAC,IAAI,CAAC;YACf;YACA,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,EAAC,GAAI,OAAO,CAAC,IAAI,CAAC,EAAC,GAAI,IAAI,CAAC,QAAQ,EAAE;gBACtD,MAAK,mBAAQ,KAAK,EAAK,IAAI,CAAC,QAAQ,CAAE;YACvC;QACD;IACD;IACA,OAAO,MAAM;AACd;AAdA;AAgBA;;;AAGA,WAAiD,iBAAiD,EAAE,UAA2B,EAAE,QAA4B;IAA5B,wCAA4B;IAE5J,OAAO;QACN,QAAQ;QACR,iBAAiB;QACjB,UAAU;QACV,IAAI,EAAE;KACN;AACF;AARA;AAgBA,WAAkB,GAAW,EAAE,oBAAqF,EAAE,QAAyC;IAAhI,gEAAqF;IAAE,+CAAyC;IAC7J,IAAI,WAAU,EAAqD,oBAAoB;IACvF,IAAI,0BAA0B;IAE9B,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,EAAE;QACxC,SAAQ,EAAG,oBAAoB;QAC/B,WAAU,EAAG,EAAE;IAChB;IAEA,GAAG,CAAC,OAAO,WAAU,IAAK,UAAU,EAAE;QACrC,2BAA0B,EAAG,UAAU;QACvC,WAAU,EAAG,EAAE;IAChB;IAEA,OAAO;QACN,GAAG;QACH,0BAA0B;QAC1B,QAAQ;QACR,UAAU;QACV,IAAI,EAAE;KACN;AACH;AArBA;;;;;;;;;;;AClFA;AACA;AACA;AACA;AAcA;AACA;AACA;AACA;AAEA,IAAK,iBAKJ;AALD,WAAK,iBAAiB;IACrB,yDAAQ;IACR,qEAAU;IACV,iEAAQ;IACR,6DAAM;AACP,CAAC,EALI,kBAAiB,IAAjB,kBAAiB;AA0BtB,IAAM,aAAY,EAAG,IAAI,aAAG,EAAgC;AAC5D,IAAM,UAAS,EAAG,WAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AAEjC;;;AAGA;IAmDC;;;IAGA;QAAA;QA1CA;;;QAGQ,wBAAkB,EAAG,IAAI;QAOjC;;;QAGQ,0BAAoB,EAAa,EAAE;QAgBnC,kBAAY,EAAsB,iBAAiB,CAAC,IAAI;QAQxD,kBAAY,EAAgB,IAAI,qBAAW,EAAE;QAMpD,IAAI,CAAC,UAAS,EAAG,EAAE;QACnB,IAAI,CAAC,gBAAe,EAAG,IAAI,aAAG,EAAiB;QAC/C,IAAI,CAAC,YAAW,EAAO,EAAE;QACzB,IAAI,CAAC,iBAAgB,EAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;QAC9C,IAAI,CAAC,iBAAgB,EAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC;QAElD,wBAAiB,CAAC,GAAG,CAAC,IAAI,EAAE;YAC3B,KAAK,EAAE,IAAI;YACX,gBAAgB,EAAE,UAAC,OAAoB,EAAE,GAAW;gBACnD,KAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC;YACpC,CAAC;YACD,gBAAgB,EAAE,UAAC,OAAoB,EAAE,GAAW;gBACnD,KAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC;YACpC,CAAC;YACD,QAAQ,EAAE;gBACT,KAAI,CAAC,QAAQ,EAAE;YAChB,CAAC;YACD,QAAQ,EAAE;gBACT,KAAI,CAAC,QAAQ,EAAE;YAChB,CAAC;YACD,WAAW,EAAE,IAAI,CAAC,YAAY;YAC9B,QAAQ,EAAE;gBACT,OAAO,KAAI,CAAC,QAAQ;YACrB,CAAC;YACD,cAAc,EAAE,EAAoB;YACpC,UAAU,EAAE,IAAI,CAAC;SACjB,CAAC;IACH;IAEU,0BAAI,EAAd,UAAyC,QAAkC;QAC1E,GAAG,CAAC,IAAI,CAAC,SAAQ,IAAK,SAAS,EAAE;YAChC,IAAI,CAAC,SAAQ,EAAG,IAAI,aAAG,EAA8C;QACtE;QACA,IAAI,OAAM,EAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC;QACxC,GAAG,CAAC,CAAC,MAAM,EAAE;YACZ,OAAM,EAAG,IAAI,QAAQ,CAAC;gBACrB,UAAU,EAAE,IAAI,CAAC,gBAAgB;gBACjC,WAAW,EAAE,IAAI,CAAC,YAAY;gBAC9B,IAAI,EAAE;aACN,CAAC;YACF,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC;YACnC,MAAM;QACP;QAEA,OAAO,MAAW;IACnB,CAAC;IAED;;;;;;IAMU,sCAAgB,EAA1B,UAA2B,OAAgB,EAAE,GAAW;QACvD;IACD,CAAC;IAED;;;;;;IAMU,sCAAgB,EAA1B,UAA2B,OAAgB,EAAE,GAAW;QACvD;IACD,CAAC;IAES,8BAAQ,EAAlB;QACC;IACD,CAAC;IAES,8BAAQ,EAAlB;QACC;IACD,CAAC;IAED,sBAAW,kCAAU;aAArB;YACC,OAAO,IAAI,CAAC,WAAW;QACxB,CAAC;;;;IAED,sBAAW,2CAAmB;aAA9B;YACC,OAAM,iBAAM,IAAI,CAAC,oBAAoB;QACtC,CAAC;;;;IAEM,2CAAqB,EAA5B,UAA6B,cAA8B;QAC1D,IAAI,CAAC,aAAY,EAAG,iBAAiB,CAAC,UAAU;QACxC,8CAAY;QACpB,IAAM,aAAY,EAAG,wBAAiB,CAAC,GAAG,CAAC,IAAI,CAAE;QAEjD,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC,aAAY,IAAK,YAAY,EAAE;YAC9D,GAAG,CAAC,IAAI,CAAC,UAAS,IAAK,SAAS,EAAE;gBACjC,IAAI,CAAC,UAAS,EAAG,IAAI,yBAAe,EAAE;gBACtC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC;YACvD;YACA,IAAI,CAAC,SAAS,CAAC,KAAI,EAAG,YAAY;YAClC,IAAI,CAAC,UAAU,EAAE;QAClB;QACA,YAAY,CAAC,eAAc,EAAG,cAAc;IAC7C,CAAC;IAEM,uCAAiB,EAAxB,UAAyB,kBAAsC;QAA/D;QACC,IAAM,WAAU,EAAG,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,CAAC;QAChE,IAAM,4BAA2B,EAAG,IAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC;QAC/E,IAAM,oBAAmB,EAAa,EAAE;QACxC,IAAM,cAAa,EAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QAC7C,IAAM,aAAY,EAAG,wBAAiB,CAAC,GAAG,CAAC,IAAI,CAAE;QACjD,IAAI,CAAC,aAAY,EAAG,iBAAiB,CAAC,UAAU;QAEhD,GAAG,CAAC,IAAI,CAAC,mBAAkB,IAAK,MAAK,GAAI,2BAA2B,CAAC,OAAM,IAAK,CAAC,EAAE;YAClF,IAAM,cAAa,mBAAQ,aAAa,EAAK,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAE;YAC5E,IAAM,kBAAiB,EAAa,EAAE;YACtC,IAAM,oBAAmB,EAAQ,EAAE;YACnC,IAAI,aAAY,EAAG,KAAK;YAExB,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC9C,IAAM,aAAY,EAAG,aAAa,CAAC,CAAC,CAAC;gBACrC,GAAG,CAAC,iBAAiB,CAAC,OAAO,CAAC,YAAY,EAAC,EAAG,CAAC,EAAE;oBAChD,QAAQ;gBACT;gBACA,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC;gBACpC,IAAM,iBAAgB,EAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC;gBACvD,IAAM,YAAW,EAAG,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC;gBAC1G,GAAG,CAAC,2BAA2B,CAAC,OAAO,CAAC,YAAY,EAAC,IAAK,CAAC,CAAC,EAAE;oBAC7D,aAAY,EAAG,IAAI;oBACnB,IAAM,cAAa,EAAG,IAAI,CAAC,YAAY,CAAC,kBAAgB,YAAc,CAAC;oBACvE,IAAI,CAAC,IAAI,IAAC,EAAG,CAAC,EAAE,IAAC,EAAG,aAAa,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;wBAC9C,IAAM,OAAM,EAAG,aAAa,CAAC,GAAC,CAAC,CAAC,gBAAgB,EAAE,WAAW,CAAC;wBAC9D,GAAG,CAAC,MAAM,CAAC,QAAO,GAAI,mBAAmB,CAAC,OAAO,CAAC,YAAY,EAAC,IAAK,CAAC,CAAC,EAAE;4BACvE,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC;wBACvC;wBACA,GAAG,CAAC,aAAY,GAAI,UAAU,EAAE;4BAC/B,mBAAmB,CAAC,YAAY,EAAC,EAAG,MAAM,CAAC,KAAK;wBACjD;oBACD;gBACD;gBACA,KAAK;oBACJ,IAAM,OAAM,EAAG,SAAS,CAAC,gBAAgB,EAAE,WAAW,CAAC;oBACvD,GAAG,CAAC,MAAM,CAAC,QAAO,GAAI,mBAAmB,CAAC,OAAO,CAAC,YAAY,EAAC,IAAK,CAAC,CAAC,EAAE;wBACvE,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC;oBACvC;oBACA,GAAG,CAAC,aAAY,GAAI,UAAU,EAAE;wBAC/B,mBAAmB,CAAC,YAAY,EAAC,EAAG,MAAM,CAAC,KAAK;oBACjD;gBACD;YACD;YAEA,GAAG,CAAC,YAAY,EAAE;gBACjB,IAAI,CAAC,yBAAyB,CAAC,UAAU,EAAE,mBAAmB,CAAC,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,QAAQ;oBACtF,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE;wBACjB,QAAQ,CAAC,IAAI,CAAC,KAAI,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;oBACjE;gBACD,CAAC,CAAC;YACH;YACA,IAAI,CAAC,YAAW,EAAG,mBAAmB;YACtC,IAAI,CAAC,qBAAoB,EAAG,mBAAmB;QAChD;QACA,KAAK;YACJ,IAAI,CAAC,mBAAkB,EAAG,KAAK;YAC/B,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC9C,IAAM,aAAY,EAAG,aAAa,CAAC,CAAC,CAAC;gBACrC,GAAG,CAAC,OAAO,UAAU,CAAC,YAAY,EAAC,IAAK,UAAU,EAAE;oBACnD,UAAU,CAAC,YAAY,EAAC,EAAG,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC;gBAClH;gBACA,KAAK;oBACJ,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC;gBACvC;YACD;YACA,IAAI,CAAC,qBAAoB,EAAG,mBAAmB;YAC/C,IAAI,CAAC,YAAW,uBAAQ,UAAU,CAAE;QACrC;QAEA,GAAG,CAAC,IAAI,CAAC,oBAAoB,CAAC,OAAM,EAAG,CAAC,EAAE;YACzC,IAAI,CAAC,UAAU,EAAE;QAClB;IACD,CAAC;IAED,sBAAW,gCAAQ;aAAnB;YACC,OAAO,IAAI,CAAC,SAAS;QACtB,CAAC;;;;IAEM,qCAAe,EAAtB,UAAuB,QAAsB;QAC5C,IAAI,CAAC,aAAY,EAAG,iBAAiB,CAAC,QAAQ;QAC9C,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,OAAM,EAAG,EAAC,GAAI,QAAQ,CAAC,OAAM,EAAG,CAAC,EAAE;YACrD,IAAI,CAAC,UAAS,EAAG,QAAQ;YACzB,IAAI,CAAC,UAAU,EAAE;QAClB;IACD,CAAC;IAEM,gCAAU,EAAjB;QACC,IAAM,aAAY,EAAG,wBAAiB,CAAC,GAAG,CAAC,IAAI,CAAE;QACjD,IAAI,CAAC,aAAY,EAAG,iBAAiB,CAAC,MAAM;QAC5C,GAAG,CAAC,YAAY,CAAC,MAAK,GAAI,IAAI,CAAC,aAAY,IAAK,SAAS,EAAE;YAC1D,YAAY,CAAC,MAAK,EAAG,KAAK;YAC1B,IAAM,OAAM,EAAG,IAAI,CAAC,iBAAiB,EAAE;YACvC,IAAI,MAAK,EAAG,MAAM,EAAE;YACpB,IAAI,CAAC,aAAY,EAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC;YAC/C,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;QAC1B;QACA,IAAI,CAAC,aAAY,EAAG,iBAAiB,CAAC,IAAI;QAC1C,OAAO,IAAI,CAAC,YAAY;IACzB,CAAC;IAEM,gCAAU,EAAjB;QACC,IAAM,aAAY,EAAG,wBAAiB,CAAC,GAAG,CAAC,IAAI,CAAE;QACjD,GAAG,CAAC,IAAI,CAAC,aAAY,IAAK,iBAAiB,CAAC,IAAI,EAAE;YACjD,YAAY,CAAC,MAAK,EAAG,IAAI;YACzB,GAAG,CAAC,YAAY,CAAC,gBAAgB,EAAE;gBAClC,YAAY,CAAC,gBAAgB,EAAE;YAChC;QACD;QACA,KAAK,GAAG,CAAC,IAAI,CAAC,aAAY,IAAK,iBAAiB,CAAC,UAAU,EAAE;YAC5D,YAAY,CAAC,MAAK,EAAG,IAAI;QAC1B;QACA,KAAK,GAAG,CAAC,IAAI,CAAC,aAAY,IAAK,iBAAiB,CAAC,QAAQ,EAAE;YAC1D,YAAY,CAAC,MAAK,EAAG,IAAI;QAC1B;IACD,CAAC;IAES,4BAAM,EAAhB;QACC,OAAO,KAAC,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC;IACnC,CAAC;IAED;;;;;;IAMU,kCAAY,EAAtB,UAAuB,YAAoB,EAAE,KAAU;QACtD,MAAK,EAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,CAAE;QAChD,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,EAAE;YACvC,IAAI,cAAa,EAAG,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;YACtD,GAAG,CAAC,CAAC,aAAa,EAAE;gBACnB,cAAa,EAAG,IAAI,aAAG,EAAiB;gBACxC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,aAAa,CAAC;YAClD;YAEA,IAAI,sBAAqB,EAAG,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC;YAC3D,GAAG,CAAC,CAAC,qBAAqB,EAAE;gBAC3B,sBAAqB,EAAG,EAAE;gBAC1B,aAAa,CAAC,GAAG,CAAC,YAAY,EAAE,qBAAqB,CAAC;YACvD;YACA,qBAAqB,CAAC,IAAI,OAA1B,qBAAqB,mBAAS,KAAK;QACpC;QACA,KAAK;YACJ,IAAM,WAAU,EAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC;YAClD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,YAAY,mBAAO,UAAU,EAAK,KAAK,EAAG;QACpE;IACD,CAAC;IAED;;;;;;;IAOQ,yCAAmB,EAA3B,UAA4B,YAAoB;QAC/C,IAAM,cAAa,EAAG,EAAE;QAExB,IAAI,YAAW,EAAG,IAAI,CAAC,WAAW;QAElC,OAAO,WAAW,EAAE;YACnB,IAAM,YAAW,EAAG,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC;YACjD,GAAG,CAAC,WAAW,EAAE;gBAChB,IAAM,WAAU,EAAG,WAAW,CAAC,GAAG,CAAC,YAAY,CAAC;gBAEhD,GAAG,CAAC,UAAU,EAAE;oBACf,aAAa,CAAC,OAAO,OAArB,aAAa,mBAAY,UAAU;gBACpC;YACD;YAEA,YAAW,EAAG,MAAM,CAAC,cAAc,CAAC,WAAW,CAAC;QACjD;QAEA,OAAO,aAAa;IACrB,CAAC;IAED;;;;;;IAMU,kCAAY,EAAtB,UAAuB,YAAoB;QAC1C,IAAI,cAAa,EAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,YAAY,CAAC;QAE1D,GAAG,CAAC,cAAa,IAAK,SAAS,EAAE;YAChC,OAAO,aAAa;QACrB;QAEA,cAAa,EAAG,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC;QAEtD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,YAAY,EAAE,aAAa,CAAC;QACrD,OAAO,aAAa;IACrB,CAAC;IAEO,+CAAyB,EAAjC,UAAkC,aAAkB,EAAE,mBAA6B;QAAnF;QACC,IAAM,kBAAiB,EAA6B,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;QAErF,OAAO,iBAAiB,CAAC,MAAM,CAAC,UAAC,mBAAmB,EAAE,EAA0B;gBAAxB,sBAAQ,EAAE,8BAAY;YAC7E,IAAI,kBAAiB,EAAG,mBAAmB,CAAC,GAAG,CAAC,QAAQ,CAAC;YACzD,GAAG,CAAC,kBAAiB,IAAK,SAAS,EAAE;gBACpC,kBAAiB,EAAG;oBACnB,kBAAkB,EAAE,EAAE;oBACtB,aAAa,EAAE,EAAE;oBACjB,OAAO,EAAE;iBACT;YACF;YACA,iBAAiB,CAAC,kBAAkB,CAAC,YAAY,EAAC,EAAG,KAAI,CAAC,WAAW,CAAC,YAAY,CAAC;YACnF,iBAAiB,CAAC,aAAa,CAAC,YAAY,EAAC,EAAG,aAAa,CAAC,YAAY,CAAC;YAC3E,GAAG,CAAC,mBAAmB,CAAC,OAAO,CAAC,YAAY,EAAC,IAAK,CAAC,CAAC,EAAE;gBACrD,iBAAiB,CAAC,QAAO,EAAG,IAAI;YACjC;YACA,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,iBAAiB,CAAC;YACpD,OAAO,mBAAmB;QAC3B,CAAC,EAAE,IAAI,aAAG,EAAuC,CAAC;IAEnD,CAAC;IAED;;;;;IAKQ,2CAAqB,EAA7B,UAA8B,QAAa,EAAE,IAAS;QACrD,GAAG,CAAC,OAAO,SAAQ,IAAK,WAAU,GAAI,kCAAuB,CAAC,QAAQ,EAAC,IAAK,KAAK,EAAE;YAClF,GAAG,CAAC,IAAI,CAAC,yBAAwB,IAAK,SAAS,EAAE;gBAChD,IAAI,CAAC,yBAAwB,EAAG,IAAI,iBAAO,EAA+E;YAC3H;YACA,IAAM,SAAQ,EAA+B,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,QAAQ,EAAC,GAAI,EAAE;YACxF,kCAAS,EAAE,sBAAK;YAEtB,GAAG,CAAC,UAAS,IAAK,UAAS,GAAI,MAAK,IAAK,IAAI,EAAE;gBAC9C,UAAS,EAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,CAA4B;gBAC1D,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,SAAS,aAAE,KAAK,EAAE,KAAI,CAAE,CAAC;YACxE;YACA,OAAO,SAAS;QACjB;QACA,OAAO,QAAQ;IAChB,CAAC;IAED,sBAAW,gCAAQ;aAAnB;YACC,GAAG,CAAC,IAAI,CAAC,UAAS,IAAK,SAAS,EAAE;gBACjC,IAAI,CAAC,UAAS,EAAG,IAAI,yBAAe,EAAE;gBACtC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC;YACvD;YACA,OAAO,IAAI,CAAC,SAAS;QACtB,CAAC;;;;IAEO,0CAAoB,EAA5B,UAA6B,UAAe;QAA5C;QACC,IAAM,iBAAgB,EAAuB,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC;QAClF,GAAG,CAAC,gBAAgB,CAAC,OAAM,EAAG,CAAC,EAAE;YAChC,OAAO,gBAAgB,CAAC,MAAM,CAAC,UAAC,UAAU,EAAE,wBAAwB;gBACnE,OAAM,qBAAM,UAAU,EAAK,wBAAwB,CAAC,IAAI,CAAC,KAAI,EAAE,UAAU,CAAC;YAC3E,CAAC,uBAAO,UAAU,EAAG;QACtB;QACA,OAAO,UAAU;IAClB,CAAC;IAED;;;IAGQ,uCAAiB,EAAzB;QAAA;QACC,IAAM,cAAa,EAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;QAEvD,GAAG,CAAC,aAAa,CAAC,OAAM,EAAG,CAAC,EAAE;YAC7B,OAAO,aAAa,CAAC,MAAM,CAAC,UAAC,MAAc,EAAE,oBAAkC;gBAC9E,IAAM,cAAa,EAAG,oBAAoB,CAAC,IAAI,CAAC,KAAI,EAAE,MAAM,EAAE,KAAI,CAAC,WAAW,EAAE,KAAI,CAAC,SAAS,CAAC;gBAC/F,GAAG,CAAC,CAAC,aAAa,EAAE;oBACnB,OAAO,CAAC,IAAI,CAAC,uEAAuE,CAAC;oBACrF,OAAO,MAAM;gBACd;gBACA,OAAO,aAAa;YACrB,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC;QAC1B;QACA,OAAO,IAAI,CAAC,gBAAgB;IAC7B,CAAC;IAED;;;;;IAKU,qCAAe,EAAzB,UAA0B,KAAsB;QAAhD;QACC,IAAM,aAAY,EAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC;QAErD,GAAG,CAAC,YAAY,CAAC,OAAM,EAAG,CAAC,EAAE;YAC5B,OAAO,YAAY,CAAC,MAAM,CAAC,UAAC,KAAsB,EAAE,mBAAgC;gBACnF,OAAO,mBAAmB,CAAC,IAAI,CAAC,KAAI,EAAE,KAAK,CAAC;YAC7C,CAAC,EAAE,KAAK,CAAC;QACV;QAEA,GAAG,CAAC,IAAI,CAAC,SAAQ,IAAK,SAAS,EAAE;YAChC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,IAAI;gBAC1B,IAAI,CAAC,WAAW,EAAE;YACnB,CAAC,CAAC;QACH;QAEA,OAAO,KAAK;IACb,CAAC;IApcD;;;IAGO,iBAAK,EAAW,2BAAgB;IAkcxC,iBAAC;CAvcD;AAAa;AAycb,kBAAe,UAAU;;;;;;;;;;;AChgBzB;AACA;AAEA,kBAAe,aAAG;AAClB;AAEA;AAEA;AACA,SAAG,CAAC,WAAW,EAAE;IAChB,OAAO;QACN,MAAM;QACN;KACA,CAAC,KAAK,CAAC,UAAC,GAAG,IAAK,WAAG,GAAI,gBAAM,CAAC,KAAK,EAAnB,CAAmB,EAAC,GAAI;QACxC,WAAW;QACX,MAAM;QACN;KACA,CAAC,KAAK,CAAC,UAAC,GAAG,IAAK,WAAG,GAAI,gBAAM,CAAC,KAAK,CAAC,SAAS,EAA7B,CAA6B,CAAC;AAChD,CAAC,EAAE,IAAI,CAAC;AAER,SAAG,CAAC,gBAAgB,EAAE;IACrB,GAAG,CAAC,OAAM,GAAI,gBAAM,CAAC,KAAK,CAAC,SAAS,EAAE;QACrC;QACA,OAAc,CAAE,CAAC,CAAG,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAC,IAAK,CAAC;IAChE;IACA,OAAO,KAAK;AACb,CAAC,EAAE,IAAI,CAAC;AAER,SAAG,CAAC,WAAW,EAAE,cAAM,kBAAU,GAAI,gBAAM,CAAC,KAAK,CAAC,SAAS,EAApC,CAAoC,EAAE,IAAI,CAAC;AAElE;AACA,SAAG,CAAC,SAAS,EAAE;IACd,GAAG,CAAC,OAAO,gBAAM,CAAC,IAAG,IAAK,UAAU,EAAE;QACrC;;;;;QAKA,IAAI;YACH,IAAM,IAAG,EAAG,IAAI,gBAAM,CAAC,GAAG,CAAC,CAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAE,CAAC;YAEtC,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC,EAAC;gBAChB,OAAO,GAAG,CAAC,KAAI,IAAK,WAAU,GAAI,aAAG,CAAC,YAAY,EAAC;gBACnD,OAAO,GAAG,CAAC,OAAM,IAAK,WAAU;gBAChC,OAAO,GAAG,CAAC,QAAO,IAAK,UAAU;QACnC;QACA,MAAM,CAAC,CAAC,EAAE;YACT;YACA,OAAO,KAAK;QACb;IACD;IACA,OAAO,KAAK;AACb,CAAC,EAAE,IAAI,CAAC;AAER;AACA,SAAG,CAAC,UAAU,EAAE;IACf,OAAO;QACN,OAAO;QACP,MAAM;QACN,OAAO;QACP,MAAM;QACN,OAAO;QACP,OAAO;QACP,MAAM;QACN,MAAM;QACN,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,OAAO;QACP,QAAQ;QACR,MAAM;QACN;KACA,CAAC,KAAK,CAAC,UAAC,IAAI,IAAK,cAAO,gBAAM,CAAC,IAAI,CAAC,IAAI,EAAC,IAAK,UAAU,EAAvC,CAAuC,CAAC;AAC3D,CAAC,EAAE,IAAI,CAAC;AAER,SAAG,CAAC,eAAe,EAAE;IACpB,GAAG,CAAC,OAAM,GAAI,gBAAM,CAAC,IAAI,EAAE;QAC1B;QACA,OAAc,IAAK,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAC,IAAK,CAAC,CAAC;IAC/C;IACA,OAAO,KAAK;AACb,CAAC,EAAE,IAAI,CAAC;AAER;AACA,SAAG,CAAC,YAAY,EAAE;IACjB,OAAO,aAAG,CAAC,YAAY,EAAC,GAAI;QAC3B,QAAQ;QACR,IAAI;QACJ,uBAAuB;QACvB;KACA,CAAC,KAAK,CAAC,UAAC,IAAI,IAAK,cAAO,gBAAM,CAAC,MAAM,CAAC,IAAI,EAAC,IAAK,UAAU,EAAzC,CAAyC,CAAC;AAC7D,CAAC,EAAE,IAAI,CAAC;AAER,SAAG,CAAC,eAAe,EAAE;IACpB,OAAO;QACN,QAAQ;QACR,SAAS;QACT;KACA,CAAC,KAAK,CAAC,UAAC,IAAI,IAAK,cAAO,gBAAM,CAAC,MAAM,CAAC,IAAI,EAAC,IAAK,UAAU,EAAzC,CAAyC,CAAC;AAC7D,CAAC,EAAE,IAAI,CAAC;AAER;AACA,SAAG,CAAC,eAAe,EAAE,cAAM,cAAO,gBAAM,CAAC,WAAU,IAAK,WAAW,EAAxC,CAAwC,EAAE,IAAI,CAAC;AAE1E;AACA,SAAG,CAAC,aAAa,EAAE,cAAM,cAAO,gBAAM,CAAC,QAAO,IAAK,YAAW,GAAI,aAAG,CAAC,YAAY,CAAC,EAA1D,CAA0D,EAAE,IAAI,CAAC;AAE1F;AACA,SAAG,CAAC,SAAS,EAAE;IACd,GAAG,CAAC,OAAO,gBAAM,CAAC,IAAG,IAAK,UAAU,EAAE;QACrC;QACA,IAAM,IAAG,EAAG,IAAI,gBAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/B,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC,EAAC,GAAI,OAAM,GAAI,IAAG,GAAI,OAAO,GAAG,CAAC,KAAI,IAAK,WAAU,GAAI,aAAG,CAAC,YAAY,CAAC;IAC1F;IACA,OAAO,KAAK;AACb,CAAC,EAAE,IAAI,CAAC;AAER;AACA,SAAG,CAAC,YAAY,EAAE;IACjB,OAAO;QACN;KACA,CAAC,KAAK,CAAC,UAAC,GAAG,IAAK,cAAO,gBAAM,CAAC,MAAM,CAAC,GAAG,EAAC,IAAK,UAAU,EAAxC,CAAwC,EAAC,GAAI;QAC7D,aAAa;QACb,WAAW;QACX,QAAQ;QACR,YAAY;QACZ,UAAU;QACV;KACA,CAAC,KAAK,CAAC,UAAC,GAAG,IAAK,cAAO,gBAAM,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAC,IAAK,UAAU,EAAlD,CAAkD,CAAC;AACrE,CAAC,EAAE,IAAI,CAAC;AAER,SAAG,CAAC,gBAAgB,EAAE;IACrB,qBAAqB,QAA8B;QAAE;aAAA,UAAuB,EAAvB,qBAAuB,EAAvB,IAAuB;YAAvB;;QACpD,OAAO,QAAQ;IAChB;IAEA,GAAG,CAAC,MAAK,GAAI,gBAAM,CAAC,MAAM,EAAE;QAC3B,IAAI,EAAC,EAAG,CAAC;QACT,IAAI,SAAQ,+BAAc,MAAM,EAAC,EAAE,GAApB,WAAW,KAAM,CAAC,EAAE;QAE5B,QAAS,CAAC,IAAG,EAAG,CAAE,MAAM,CAAE;QACjC,IAAM,cAAa,EAAG,gBAAM,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EAAC,IAAK,OAAO;QAEjE,OAAO,aAAa;IACrB;IAEA,OAAO,KAAK;;AACb,CAAC,EAAE,IAAI,CAAC;AAER,SAAG,CAAC,eAAe,EAAE;IACpB,OAAO;QACN,UAAU;QACV;KACA,CAAC,KAAK,CAAC,UAAC,GAAG,IAAK,cAAO,gBAAM,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAC,IAAK,UAAU,EAAlD,CAAkD,CAAC;AACrE,CAAC,EAAE,IAAI,CAAC;AAER;AACA,SAAG,CAAC,YAAY,EAAE,cAAM,cAAO,gBAAM,CAAC,OAAM,IAAK,YAAW,GAAI,OAAO,MAAM,GAAE,IAAK,QAAQ,EAApE,CAAoE,EAAE,IAAI,CAAC;AAEnG;AACA,SAAG,CAAC,aAAa,EAAE;IAClB,GAAG,CAAC,OAAO,gBAAM,CAAC,QAAO,IAAK,WAAW,EAAE;QAC1C;QACA,IAAM,KAAI,EAAG,EAAE;QACf,IAAM,KAAI,EAAG,EAAE;QACf,IAAM,IAAG,EAAG,IAAI,gBAAM,CAAC,OAAO,CAAC,CAAE,CAAE,IAAI,EAAE,CAAC,CAAE,CAAE,CAAC;QAC/C,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;QACnB,OAAO,GAAG,CAAC,GAAG,CAAC,IAAI,EAAC,IAAK,EAAC,GAAI,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAC,IAAK,IAAG,GAAI,aAAG,CAAC,YAAY,CAAC;IAC5E;IACA,OAAO,KAAK;AACb,CAAC,EAAE,IAAI,CAAC;AAER;AACA,SAAG,CAAC,YAAY,EAAE,cAAM,oBAAG,CAAC,aAAa,EAAC,GAAI,aAAG,CAAC,WAAW,EAAC,GAAI,aAAG,CAAC,sBAAsB,CAAC,EAArE,CAAqE,EAAE,IAAI,CAAC;AACpG,SAAG,CAAC,aAAa,EAAE;IACjB;IACA;IACD,OAAO,OAAO,gBAAM,CAAC,OAAM,IAAK,YAAW,GAAI,OAAO,gBAAM,CAAC,YAAW,IAAK,UAAU;AACxF,CAAC,EAAE,IAAI,CAAC;AACR,SAAG,CAAC,KAAK,EAAE,cAAM,cAAO,gBAAM,CAAC,sBAAqB,IAAK,UAAU,EAAlD,CAAkD,EAAE,IAAI,CAAC;AAC1E,SAAG,CAAC,cAAc,EAAE,cAAM,cAAO,gBAAM,CAAC,aAAY,IAAK,WAAW,EAA1C,CAA0C,EAAE,IAAI,CAAC;AAE3E;AAEA,SAAG,CAAC,sBAAsB,EAAE;IAC3B,GAAG,CAAC,aAAG,CAAC,cAAc,EAAC,GAAI,OAAO,CAAC,gBAAM,CAAC,iBAAgB,GAAI,gBAAM,CAAC,sBAAsB,CAAC,EAAE;QAC7F;QACA;QACA;QACA;QACA,IAAM,QAAO,EAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QAC7C;QACA,IAAM,qBAAoB,EAAG,gBAAM,CAAC,iBAAgB,GAAI,gBAAM,CAAC,sBAAsB;QACrF,IAAM,SAAQ,EAAG,IAAI,oBAAoB,CAAC,cAAa,CAAC,CAAC;QACzD,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,UAAU,EAAE,KAAI,CAAE,CAAC;QAE/C,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC;QAE7C,OAAO,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC;IAC9C;IACA,OAAO,KAAK;AACb,CAAC,EAAE,IAAI,CAAC;;;;;;;;;;AC1MR;AACA;AACA;AAQW,eAAM,EAAsB,gBAAM,CAAC,MAAM;AAEpD,GAAG,CAAC,CAAC,aAAG,CAAC,YAAY,CAAC,EAAE;IACvB;;;;;IAKA,IAAM,iBAAc,EAAG,wBAAwB,KAAU;QACxD,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YACrB,MAAM,IAAI,SAAS,CAAC,MAAK,EAAG,kBAAkB,CAAC;QAChD;QACA,OAAO,KAAK;IACb,CAAC;IAED,IAAM,mBAAgB,EAAG,MAAM,CAAC,gBAAgB;IAChD,IAAM,iBAAc,EAAwF,MAAM,CAAC,cAAc;IACjI,IAAM,SAAM,EAAG,MAAM,CAAC,MAAM;IAE5B,IAAM,eAAY,EAAG,MAAM,CAAC,SAAS;IAErC,IAAM,gBAAa,EAA8B,EAAE;IAEnD,IAAM,gBAAa,EAAG,CAAC;QACtB,IAAM,QAAO,EAAG,QAAM,CAAC,IAAI,CAAC;QAC5B,OAAO,UAAU,IAAmB;YACnC,IAAI,QAAO,EAAG,CAAC;YACf,IAAI,IAAY;YAChB,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,EAAC,EAAG,CAAC,QAAO,GAAI,EAAE,CAAC,CAAC,EAAE;gBAC/C,EAAE,OAAO;YACV;YACA,KAAI,GAAI,MAAM,CAAC,QAAO,GAAI,EAAE,CAAC;YAC7B,OAAO,CAAC,IAAI,EAAC,EAAG,IAAI;YACpB,KAAI,EAAG,KAAI,EAAG,IAAI;YAElB;YACA;YACA,GAAG,CAAC,CAAC,MAAM,CAAC,wBAAwB,CAAC,cAAY,EAAE,IAAI,CAAC,EAAE;gBACzD,gBAAc,CAAC,cAAY,EAAE,IAAI,EAAE;oBAClC,GAAG,EAAE,UAAwB,KAAU;wBACtC,gBAAc,CAAC,IAAI,EAAE,IAAI,EAAE,yBAAkB,CAAC,KAAK,CAAC,CAAC;oBACtD;iBACA,CAAC;YACH;YAEA,OAAO,IAAI;QACZ,CAAC;IACF,CAAC,EAAE,CAAC;IAEJ,IAAM,iBAAc,EAAG,gBAA2B,WAA2B;QAC5E,GAAG,CAAC,KAAI,WAAY,gBAAc,EAAE;YACnC,MAAM,IAAI,SAAS,CAAC,wCAAwC,CAAC;QAC9D;QACA,OAAO,MAAM,CAAC,WAAW,CAAC;IAC3B,CAAC;IAED,eAAM,EAAG,gBAAM,CAAC,OAAM,EAAG,gBAA8B,WAA2B;QACjF,GAAG,CAAC,KAAI,WAAY,MAAM,EAAE;YAC3B,MAAM,IAAI,SAAS,CAAC,wCAAwC,CAAC;QAC9D;QACA,IAAM,IAAG,EAAG,MAAM,CAAC,MAAM,CAAC,gBAAc,CAAC,SAAS,CAAC;QACnD,YAAW,EAAG,CAAC,YAAW,IAAK,UAAS,EAAG,GAAE,EAAG,MAAM,CAAC,WAAW,CAAC,CAAC;QACpE,OAAO,kBAAgB,CAAC,GAAG,EAAE;YAC5B,eAAe,EAAE,yBAAkB,CAAC,WAAW,CAAC;YAChD,QAAQ,EAAE,yBAAkB,CAAC,eAAa,CAAC,WAAW,CAAC;SACvD,CAAC;IACH,CAAsB;IAEtB;IACA,gBAAc,CAAC,cAAM,EAAE,KAAK,EAAE,yBAAkB,CAAC,UAAU,GAAW;QACrE,GAAG,CAAC,eAAa,CAAC,GAAG,CAAC,EAAE;YACvB,OAAO,eAAa,CAAC,GAAG,CAAC;QAC1B;QACA,OAAO,CAAC,eAAa,CAAC,GAAG,EAAC,EAAG,cAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;IACH,kBAAgB,CAAC,cAAM,EAAE;QACxB,MAAM,EAAE,yBAAkB,CAAC,UAAU,GAAW;YAC/C,IAAI,GAAW;YACf,gBAAc,CAAC,GAAG,CAAC;YACnB,IAAI,CAAC,IAAG,GAAI,eAAa,EAAE;gBAC1B,GAAG,CAAC,eAAa,CAAC,GAAG,EAAC,IAAK,GAAG,EAAE;oBAC/B,OAAO,GAAG;gBACX;YACD;QACD,CAAC,CAAC;QACF,WAAW,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QACxE,kBAAkB,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QACtF,QAAQ,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QAClE,KAAK,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QAC5D,UAAU,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QACtE,OAAO,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QAChE,MAAM,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QAC9D,OAAO,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QAChE,KAAK,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QAC5D,WAAW,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QACxE,WAAW,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC;QACxE,WAAW,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK;KACvE,CAAC;IAEF;IACA,kBAAgB,CAAC,gBAAc,CAAC,SAAS,EAAE;QAC1C,WAAW,EAAE,yBAAkB,CAAC,cAAM,CAAC;QACvC,QAAQ,EAAE,yBAAkB,CAAC,cAAwC,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK;KAC1G,CAAC;IAEF;IACA,kBAAgB,CAAC,cAAM,CAAC,SAAS,EAAE;QAClC,QAAQ,EAAE,yBAAkB,CAAC,cAA0B,OAAO,WAAU,EAAU,gBAAc,CAAC,IAAI,CAAE,CAAC,gBAAe,EAAG,GAAG,EAAE,CAAC,CAAC;QACjI,OAAO,EAAE,yBAAkB,CAAC,cAA0B,OAAO,gBAAc,CAAC,IAAI,CAAC,EAAE,CAAC;KACpF,CAAC;IAEF,gBAAc,CAAC,cAAM,CAAC,SAAS,EAAE,cAAM,CAAC,WAAW,EAAE,yBAAkB,CAAC,cAA0B,OAAO,gBAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;IAClI,gBAAc,CAAC,cAAM,CAAC,SAAS,EAAE,cAAM,CAAC,WAAW,EAAE,yBAAkB,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;IAEtG,gBAAc,CAAC,gBAAc,CAAC,SAAS,EAAE,cAAM,CAAC,WAAW,EAAE,yBAAkB,CAAQ,cAAO,CAAC,SAAS,CAAC,cAAM,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;IAClJ,gBAAc,CAAC,gBAAc,CAAC,SAAS,EAAE,cAAM,CAAC,WAAW,EAAE,yBAAkB,CAAQ,cAAO,CAAC,SAAS,CAAC,cAAM,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;AACnJ;AAEA;;;;;AAKA,kBAAyB,KAAU;IAClC,OAAO,CAAC,MAAK,GAAI,CAAC,CAAC,OAAO,MAAK,IAAK,QAAQ,EAAC,GAAI,CAAC,KAAK,CAAC,eAAe,EAAC,IAAK,QAAQ,CAAC,CAAC,EAAC,GAAI,KAAK;AAClG;AAFA;AAIA;;;AAGA,CAAE,aAAa,EAAE,oBAAoB,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,aAAa;IACjH,aAAa,EAAE,aAAa,EAAE,YAAY,CAAE,CAAC,OAAO,CAAC,UAAC,SAAS;IAC9D,GAAG,CAAC,CAAE,cAAc,CAAC,SAAS,CAAC,EAAE;QAChC,MAAM,CAAC,cAAc,CAAC,cAAM,EAAE,SAAS,EAAE,yBAAkB,CAAC,cAAM,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IAClG;AACD,CAAC,CAAC;AAEH,kBAAe,cAAM;;;;;;;;;;;ACnJrB;AACA;AACA;AACA;AACA;AAwHW,YAAG,EAAmB,gBAAM,CAAC,GAAG;AAE3C,GAAG,CAAC,CAAC,aAAG,CAAC,SAAS,CAAC,EAAE;IACpB,YAAG;YAmBF,aAAY,QAA+C;gBAlBxC,WAAK,EAAQ,EAAE;gBACf,aAAO,EAAQ,EAAE;gBAwFpC,KAAC,MAAM,CAAC,WAAW,EAAC,EAAU,KAAK;gBAtElC,GAAG,CAAC,QAAQ,EAAE;;wBACb,IAAI,CAAgB,0CAAQ;4BAAvB,IAAM,MAAK;4BACf,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;;;;;;;;;;gBAE9B;;YACD;YArBA;;;;YAIU,0BAAW,EAArB,UAAsB,IAAS,EAAE,GAAM;gBACtC,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,SAAM,EAAG,IAAI,CAAC,MAAM,EAAE,EAAC,EAAG,QAAM,EAAE,CAAC,EAAE,EAAE;oBACtD,GAAG,CAAC,WAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;wBAC3B,OAAO,CAAC;oBACT;gBACD;gBACA,OAAO,CAAC,CAAC;YACV,CAAC;YAYD,sBAAI,qBAAI;qBAAR;oBACC,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM;gBACzB,CAAC;;;;YAED,oBAAK,EAAL;gBACC,IAAI,CAAC,KAAK,CAAC,OAAM,EAAG,IAAI,CAAC,OAAO,CAAC,OAAM,EAAG,CAAC;YAC5C,CAAC;YAED,qBAAM,EAAN,UAAO,GAAM;gBACZ,IAAM,MAAK,EAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC;gBAC/C,GAAG,CAAC,MAAK,EAAG,CAAC,EAAE;oBACd,OAAO,KAAK;gBACb;gBACA,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;gBAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;gBAC7B,OAAO,IAAI;YACZ,CAAC;YAED,sBAAO,EAAP;gBAAA;gBACC,IAAM,OAAM,EAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAC,GAAM,EAAE,CAAS;oBAC/C,OAAO,CAAE,GAAG,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAE;gBAChC,CAAC,CAAC;gBAEF,OAAO,IAAI,uBAAY,CAAC,MAAM,CAAC;YAChC,CAAC;YAED,sBAAO,EAAP,UAAQ,QAA2D,EAAE,OAAY;gBAChF,IAAM,KAAI,EAAG,IAAI,CAAC,KAAK;gBACvB,IAAM,OAAM,EAAG,IAAI,CAAC,OAAO;gBAC3B,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,SAAM,EAAG,IAAI,CAAC,MAAM,EAAE,EAAC,EAAG,QAAM,EAAE,CAAC,EAAE,EAAE;oBACtD,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;gBACjD;YACD,CAAC;YAED,kBAAG,EAAH,UAAI,GAAM;gBACT,IAAM,MAAK,EAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC;gBAC/C,OAAO,MAAK,EAAG,EAAC,EAAG,UAAS,EAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;YACnD,CAAC;YAED,kBAAG,EAAH,UAAI,GAAM;gBACT,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,EAAC,EAAG,CAAC,CAAC;YAC9C,CAAC;YAED,mBAAI,EAAJ;gBACC,OAAO,IAAI,uBAAY,CAAC,IAAI,CAAC,KAAK,CAAC;YACpC,CAAC;YAED,kBAAG,EAAH,UAAI,GAAM,EAAE,KAAQ;gBACnB,IAAI,MAAK,EAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC;gBAC7C,MAAK,EAAG,MAAK,EAAG,EAAC,EAAG,IAAI,CAAC,KAAK,CAAC,OAAM,EAAG,KAAK;gBAC7C,IAAI,CAAC,KAAK,CAAC,KAAK,EAAC,EAAG,GAAG;gBACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAC,EAAG,KAAK;gBAC3B,OAAO,IAAI;YACZ,CAAC;YAED,qBAAM,EAAN;gBACC,OAAO,IAAI,uBAAY,CAAC,IAAI,CAAC,OAAO,CAAC;YACtC,CAAC;YAED,cAAC,MAAM,CAAC,QAAQ,EAAC,EAAjB;gBACC,OAAO,IAAI,CAAC,OAAO,EAAE;YACtB,CAAC;YAGF,UAAC;QAAD,CA3FM;QAiBE,GAAC,MAAM,CAAC,OAAO,EAAC,EAAG,EAAI;WA0E9B;AACF;AAEA,kBAAe,WAAG;;;;;;;;;;;;AC1NlB;AACA;AACA;AAEA;;;;;;AAMA,sBAAsB,KAAU;IAC/B,OAAO,OAAO,CAAC,MAAK,GAAI,OAAO,KAAK,CAAC,GAAE,IAAK,UAAU,CAAC;AACxD;AAEA;;;AAGA,yBAA+D,QAA+B;IAC7F,OAAO,YAAY,CAAC,QAAQ,EAAC,EAAG,UAAC,KAAQ,IAAK,eAAQ,CAAC,EAAE,CAAC,EAAE,KAAK,SAAE,CAAC,EAAtB,EAAsB,EAAG,QAAQ;AAChF;AAEA;;;;;;AAMA,8BAA8B,OAAiB;IAC9C,OAAO;QACN,OAAO;YACN,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM,IAAK,aAAM,CAAC,OAAO,EAAE,EAAhB,CAAgB,CAAC;QAC9C;KACA;AACF;AAwDA;;;AAGA,IAAM,SAAQ,EAAG,IAAI,aAAG,EAAkB;AAE1C;;;;;AAKA,qBAA4B,UAA2B,EAAE,YAA6B;IACrF,GAAG,CAAC,OAAO,aAAY,IAAK,SAAQ,GAAI,OAAO,WAAU,IAAK,SAAQ,GAAI,UAAU,CAAC,OAAO,CAAC,GAAG,EAAC,IAAK,CAAC,CAAC,EAAE;QACzG,IAAI,MAAK,QAAQ;QACjB,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;YAC7B,MAAK,EAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAE;QAClC;QACA,KAAK;YACJ,MAAK,EAAG,IAAI,MAAM,CAAC,MAAK,UAAU,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,EAAC,KAAI,CAAC;YAC5D,QAAQ,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC;QAChC;QACA,OAAO,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC;IAEhC;IAAE,KAAK;QACN,OAAO,WAAU,IAAK,YAAY;IACnC;AACD;AAfA;AAiBA;;;AAGA;IAA6B;IAO5B;;;;IAIA,iBAAY,OAA4B;QAA5B,sCAA4B;QAAxC,YACC,kBAAO;QAVR;;;QAGU,mBAAY,EAA8C,IAAI,aAAG,EAAwC;QA2BnH;;;;;;;;;;;;;;;;;;QAkBA,SAAE,EAAsB;YAAA;YAAyB;iBAAA,UAAc,EAAd,qBAAc,EAAd,IAAc;gBAAd;;YAChD,GAAG,CAAC,IAAI,CAAC,OAAM,IAAK,CAAC,EAAE;gBAChB,gCAA8F,EAA5F,cAAI,EAAE,iBAAS;gBACvB,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;oBAC7B,IAAM,QAAO,EAAG,SAAS,CAAC,GAAG,CAAC,UAAC,QAAQ,IAAK,kBAAQ,CAAC,KAAI,CAAC,YAAY,EAAE,MAAI,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC,EAA5D,CAA4D,CAAC;oBACzG,OAAO,oBAAoB,CAAC,OAAO,CAAC;gBACrC;gBACA,KAAK;oBACJ,OAAO,WAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,MAAI,EAAE,eAAe,CAAC,SAAS,CAAC,CAAC;gBACrE;YACD;YACA,KAAK,GAAG,CAAC,IAAI,CAAC,OAAM,IAAK,CAAC,EAAE;gBACrB,gCAAsD,EAApD,wBAAc;gBACtB,IAAM,QAAO,EAAG,MAAM,CAAC,IAAI,CAAC,gBAAc,CAAC,CAAC,GAAG,CAAC,UAAC,IAAI,IAAK,YAAI,CAAC,EAAE,CAAC,IAAI,EAAE,gBAAc,CAAC,IAAI,CAAC,CAAC,EAAnC,CAAmC,CAAC;gBAC9F,OAAO,oBAAoB,CAAC,OAAO,CAAC;YACrC;YACA,KAAK;gBACJ,MAAM,IAAI,SAAS,CAAC,mBAAmB,CAAC;YACzC;QACD,CAAC;QAxDQ,iCAAS;QACjB,GAAG,CAAC,SAAS,EAAE;YACd,KAAI,CAAC,GAAG,CAAC,KAAI,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAC7B;;IACD;IAEA;;;;;IAKA,uBAAI,EAAJ,UAA4B,KAAQ;QAApC;QACC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,IAAI;YACtC,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE;gBAClC,MAAM,CAAC,IAAI,CAAC,KAAI,EAAE,KAAK,CAAC;YACzB;QACD,CAAC,CAAC;IACH,CAAC;IAwCF,cAAC;AAAD,CAtEA,CAA6B,yBAAW;AAA3B;AAwEb,kBAAe,OAAO;;;;;;;;;;;AClMtB;AAEA;AACA;AAoEW,gBAAO,EAAuB,gBAAM,CAAC,OAAO;AAOvD,GAAG,CAAC,CAAC,aAAG,CAAC,aAAa,CAAC,EAAE;IACxB,IAAM,UAAO,EAAQ,EAAE;IAEvB,IAAM,SAAM,EAAG;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAE,EAAG,SAAS,CAAC;IAC7C,CAAC;IAED,IAAM,eAAY,EAAG,CAAC;QACrB,IAAI,QAAO,EAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,GAAE,EAAG,SAAS,CAAC;QAEhD,OAAO;YACN,OAAO,OAAM,EAAG,QAAM,GAAE,EAAG,CAAC,OAAO,GAAE,EAAG,IAAI,CAAC;QAC9C,CAAC;IACF,CAAC,CAAC,EAAE;IAEJ,gBAAO;QAIN,iBAAY,QAA+C;YAqG3D,KAAC,MAAM,CAAC,WAAW,EAAC,EAAc,SAAS;YApG1C,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE;gBACpC,KAAK,EAAE,cAAY;aACnB,CAAC;YAEF,IAAI,CAAC,eAAc,EAAG,EAAE;YAExB,GAAG,CAAC,QAAQ,EAAE;;oBACb,IAAI,CAAuB,0CAAQ;wBAAxB,8CAAY,EAAX,WAAG,EAAE,aAAK;wBACrB,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC;;;;;;;;;;YAEtB;;QACD;QAEQ,uCAAoB,EAA5B,UAA6B,GAAQ;YACpC,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACpD,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,IAAG,IAAK,GAAG,EAAE;oBACvC,OAAO,CAAC;gBACT;YACD;YAEA,OAAO,CAAC,CAAC;QACV,CAAC;QAED,yBAAM,EAAN,UAAO,GAAQ;YACd,GAAG,CAAC,IAAG,IAAK,UAAS,GAAI,IAAG,IAAK,IAAI,EAAE;gBACtC,OAAO,KAAK;YACb;YAEA,IAAM,MAAK,EAAgB,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;YAC1C,GAAG,CAAC,MAAK,GAAI,KAAK,CAAC,IAAG,IAAK,IAAG,GAAI,KAAK,CAAC,MAAK,IAAK,SAAO,EAAE;gBAC1D,KAAK,CAAC,MAAK,EAAG,SAAO;gBACrB,OAAO,IAAI;YACZ;YAEA,IAAM,YAAW,EAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC;YAClD,GAAG,CAAC,YAAW,GAAI,CAAC,EAAE;gBACrB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;gBAC1C,OAAO,IAAI;YACZ;YAEA,OAAO,KAAK;QACb,CAAC;QAED,sBAAG,EAAH,UAAI,GAAQ;YACX,GAAG,CAAC,IAAG,IAAK,UAAS,GAAI,IAAG,IAAK,IAAI,EAAE;gBACtC,OAAO,SAAS;YACjB;YAEA,IAAM,MAAK,EAAgB,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;YAC1C,GAAG,CAAC,MAAK,GAAI,KAAK,CAAC,IAAG,IAAK,IAAG,GAAI,KAAK,CAAC,MAAK,IAAK,SAAO,EAAE;gBAC1D,OAAO,KAAK,CAAC,KAAK;YACnB;YAEA,IAAM,YAAW,EAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC;YAClD,GAAG,CAAC,YAAW,GAAI,CAAC,EAAE;gBACrB,OAAO,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,KAAK;YAC9C;QACD,CAAC;QAED,sBAAG,EAAH,UAAI,GAAQ;YACX,GAAG,CAAC,IAAG,IAAK,UAAS,GAAI,IAAG,IAAK,IAAI,EAAE;gBACtC,OAAO,KAAK;YACb;YAEA,IAAM,MAAK,EAAgB,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;YAC1C,GAAG,CAAC,OAAO,CAAC,MAAK,GAAI,KAAK,CAAC,IAAG,IAAK,IAAG,GAAI,KAAK,CAAC,MAAK,IAAK,SAAO,CAAC,EAAE;gBACnE,OAAO,IAAI;YACZ;YAEA,IAAM,YAAW,EAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC;YAClD,GAAG,CAAC,YAAW,GAAI,CAAC,EAAE;gBACrB,OAAO,IAAI;YACZ;YAEA,OAAO,KAAK;QACb,CAAC;QAED,sBAAG,EAAH,UAAI,GAAQ,EAAE,KAAW;YACxB,GAAG,CAAC,CAAC,IAAG,GAAI,CAAC,OAAO,IAAG,IAAK,SAAQ,GAAI,OAAO,IAAG,IAAK,UAAU,CAAC,EAAE;gBACnE,MAAM,IAAI,SAAS,CAAC,oCAAoC,CAAC;YAC1D;YACA,IAAI,MAAK,EAAgB,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;YACxC,GAAG,CAAC,CAAC,MAAK,GAAI,KAAK,CAAC,IAAG,IAAK,GAAG,EAAE;gBAChC,MAAK,EAAG,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE;oBAC3B,GAAG,EAAE,EAAE,KAAK,EAAE,IAAG;iBACjB,CAAC;gBAEF,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;oBACzB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC;gBAChC;gBACA,KAAK;oBACJ,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,EAAE;wBACtC,KAAK,EAAE;qBACP,CAAC;gBACH;YACD;YACA,KAAK,CAAC,MAAK,EAAG,KAAK;YACnB,OAAO,IAAI;QACZ,CAAC;QAGF,cAAC;IAAD,CA1GU,GA0GT;AACF;AAEA,kBAAe,eAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1MtB;AACA;AACA;AAGA;AAWA,IAAM,cAAa,EAAG,UAAC,MAAmB,EAAE,UAAe;IAClD,sBAAE,EAAE,wBAAe,EAAf,oCAAe,EAAE,sBAAW,EAAX,gCAAW,EAAE,4BAAO,EAAE,mEAAQ;IAC3D,IAAM,KAAI,EAAG,SAAQ,EAAG,MAAM,CAAC,IAAI,CAAC,EAAE,eAAO,MAAM,CAAC,gBAAgB,EAAE,EAAK,MAAM,GAAG,EAAG,EAAE;IACzF,IAAM,cAAa,EAAG,UAAC,KAAiB;QAEvC,GAAG,CAAC,OAAO,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC;QACf;QAEA,GAAG,CAAC,CAAC,KAAK,CAAC,iBAAgB,GAAI,KAAK,CAAC,OAAM,IAAK,EAAC,GAAI,CAAC,UAAU,CAAC,MAAM,EAAE;YACxE,KAAK,CAAC,cAAc,EAAE;YACtB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;QACrB;IACD,CAAC;IACD,OAAM,WACL,IAAI,QACJ,OAAO,EAAE,cAAa,GACnB,KAAK;AAEV,CAAC;AAED;IAA8B;IAA9B;;IAUA;IARS,4BAAQ,EAAhB,UAAiB,KAAiB;QACjC,IAAI,CAAC,UAAU,CAAC,QAAO,GAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC;IAC1D,CAAC;IAES,0BAAM,EAAhB;QACC,IAAM,MAAK,eAAQ,IAAI,CAAC,UAAU,IAAE,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE,UAAS,EAAE;QAChL,OAAO,KAAC,CAAC,GAAG,eAAO,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC;IAC3C,CAAC;IACF,eAAC;AAAD,CAVA,CAA8B,uBAAU;AAA3B;AAYb,oBAA2B,SAAc;IAExC;QAAmB;QAAnB;;QAA6B;QAAvB,KAAI;YADT,eAAM,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,aAAa,iBAAE;WACpC,IAAI,CAAoB;QAAD,WAAC;KAA9B,CAAmB,QAAQ;IAAG;IAC9B,OAAO,IAAI;AACZ;AAJA;AAMa,aAAI,EAAG,UAAU,CAAC,0BAAS,CAAC;;;;;;;;;;;ACtDzC;AAEA;AAAS,gCAAM;AAEf,IAAM,MAAK,EAAG,KAAK,CAAC,SAAS,CAAC,KAAK;AACnC,IAAM,eAAc,EAAG,MAAM,CAAC,SAAS,CAAC,cAAc;AAEtD;;;;;;;;;;AAUA,8BAA8B,KAAU;IACvC,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAC,IAAK,iBAAiB;AACnE;AAEA,mBAAsB,KAAU,EAAE,SAAkB;IACnD,OAAO,KAAK,CAAC,GAAG,CAAC,UAAU,IAAO;QACjC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACxB,OAAa,SAAS,CAAO,IAAI,EAAE,SAAS,CAAC;QAC9C;QAEA,OAAO,CAAC,oBAAoB,CAAC,IAAI,EAAC;YACjC,KAAI;YACJ,MAAM,CAAC;gBACN,IAAI,EAAE,IAAI;gBACV,SAAS,EAAE,SAAS;gBACpB,OAAO,EAAa,CAAE,IAAI,CAAE;gBAC5B,MAAM,EAAM;aACZ,CAAC;IACJ,CAAC,CAAC;AACH;AAUA,gBAA4C,MAAuB;IAClE,IAAM,KAAI,EAAG,MAAM,CAAC,IAAI;IACxB,IAAM,UAAS,EAAG,MAAM,CAAC,SAAS;IAClC,IAAM,OAAM,EAAQ,MAAM,CAAC,MAAM;IACjC,IAAM,OAAM,EAAG,MAAM,CAAC,OAAM,GAAI,EAAE;IAClC,IAAM,YAAW,mBAAQ,MAAM,CAAE;IAEjC,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC/C,IAAM,OAAM,EAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QAEhC,GAAG,CAAC,OAAM,IAAK,KAAI,GAAI,OAAM,IAAK,SAAS,EAAE;YAC5C,QAAQ;QACT;QACA,IAAI,CAAC,IAAI,IAAG,GAAI,MAAM,EAAE;YACvB,GAAG,CAAC,UAAS,GAAI,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;gBAClD,IAAI,MAAK,EAAQ,MAAM,CAAC,GAAG,CAAC;gBAE5B,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAC,IAAK,CAAC,CAAC,EAAE;oBACtC,QAAQ;gBACT;gBAEA,GAAG,CAAC,IAAI,EAAE;oBACT,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;wBACzB,MAAK,EAAG,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC;oBACpC;oBACA,KAAK,GAAG,CAAC,oBAAoB,CAAC,KAAK,CAAC,EAAE;wBACrC,IAAM,YAAW,EAAQ,MAAM,CAAC,GAAG,EAAC,GAAI,EAAE;wBAC1C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;wBACnB,MAAK,EAAG,MAAM,CAAC;4BACd,IAAI,EAAE,IAAI;4BACV,SAAS,EAAE,SAAS;4BACpB,OAAO,EAAE,CAAE,KAAK,CAAE;4BAClB,MAAM,EAAE,WAAW;4BACnB,MAAM;yBACN,CAAC;oBACH;gBACD;gBACA,MAAM,CAAC,GAAG,EAAC,EAAG,KAAK;YACpB;QACD;IACD;IAEA,OAAa,MAAM;AACpB;AAwBA,gBAAuB,SAAc;IAAE;SAAA,UAAgB,EAAhB,qBAAgB,EAAhB,IAAgB;QAAhB;;IACtC,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE;QACnB,MAAM,IAAI,UAAU,CAAC,iDAAiD,CAAC;IACxE;IAEA,IAAM,KAAI,EAAG,MAAM,CAAC,KAAK,EAAE;IAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IAEtC,OAAO,eAAM,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC;AAChC;AATA;AAyBA,oBAA2B,MAAW;IAAE;SAAA,UAAiB,EAAjB,qBAAiB,EAAjB,IAAiB;QAAjB;;IACvC,OAAO,MAAM,CAAC;QACb,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,KAAK;QAChB,OAAO,EAAE,OAAO;QAChB,MAAM,EAAE;KACR,CAAC;AACH;AAPA;AAuBA,mBAA0B,MAAW;IAAE;SAAA,UAAiB,EAAjB,qBAAiB,EAAjB,IAAiB;QAAjB;;IACtC,OAAO,MAAM,CAAC;QACb,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,IAAI;QACf,OAAO,EAAE,OAAO;QAChB,MAAM,EAAE;KACR,CAAC;AACH;AAPA;AASA;;;;;;;AAOA,mBAAwC,MAAS;IAChD,IAAM,OAAM,EAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IAE3D,OAAO,SAAS,CAAC,MAAM,EAAE,MAAM,CAAC;AACjC;AAJA;AAMA;;;;;;;AAOA,qBAA4B,CAAM,EAAE,CAAM;IACzC,OAAO,EAAC,IAAK,EAAC;QACb;QACA,CAAC,EAAC,IAAK,EAAC,GAAI,EAAC,IAAK,CAAC,CAAC;AACtB;AAJA;AAMA;;;;;;;;;;;AAWA,kBAAyB,QAAY,EAAE,MAAc;IAAE;SAAA,UAAsB,EAAtB,qBAAsB,EAAtB,IAAsB;QAAtB;;IACtD,OAAO,YAAY,CAAC,OAAM;QACzB;YACC,IAAM,KAAI,EAAU,SAAS,CAAC,OAAM,EAAG,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EAAC,EAAG,YAAY;YAEhG;YACA,OAAc,QAAS,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC;QACtD,EAAC;QACD;YACC;YACA,OAAc,QAAS,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC;QAC3D,CAAC;AACH;AAZA;AA0BA,eAAsB,MAAW;IAAE;SAAA,UAAiB,EAAjB,qBAAiB,EAAjB,IAAiB;QAAjB;;IAClC,OAAO,MAAM,CAAC;QACb,IAAI,EAAE,KAAK;QACX,SAAS,EAAE,IAAI;QACf,OAAO,EAAE,OAAO;QAChB,MAAM,EAAE;KACR,CAAC;AACH;AAPA;AASA;;;;;;;;AAQA,iBAAwB,cAAuC;IAAE;SAAA,UAAsB,EAAtB,qBAAsB,EAAtB,IAAsB;QAAtB;;IAChE,OAAO;QACN,IAAM,KAAI,EAAU,SAAS,CAAC,OAAM,EAAG,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EAAC,EAAG,YAAY;QAEhG,OAAO,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC;IACxC,CAAC;AACF;AANA;AAQA;;;;;;;;AAQA,sBAA6B,UAAsB;IAClD,OAAO;QACN,OAAO,EAAE;YACR,IAAI,CAAC,QAAO,EAAG,cAAa,CAAC;YAC7B,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC;QACtB;KACA;AACF;AAPA;AASA;;;;;;AAMA;IAAsC;SAAA,UAAoB,EAApB,qBAAoB,EAApB,IAAoB;QAApB;;IACrC,OAAO,YAAY,CAAC;QACnB,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACxC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE;QACrB;IACD,CAAC,CAAC;AACH;AANA;;;;;;;;;;;AC1RA;AACA;AACA;AAEA;AAQA;;;AAGa,yBAAgB,EAAG,gBAAM,CAAC,aAAa,CAAC;AAqErD;;;;;;AAMA,iCAAuE,IAAS;IAC/E,OAAO,OAAO,CAAC,KAAI,GAAI,IAAI,CAAC,MAAK,IAAK,wBAAgB,CAAC;AACxD;AAFA;AAIA;;;AAGA;IAA8B;IAA9B;;IAwGA;IA7FC;;;IAGQ,mCAAe,EAAvB,UAAwB,WAA0B,EAAE,IAAsE;QACzH,IAAI,CAAC,IAAI,CAAC;YACT,IAAI,EAAE,WAAW;YACjB,MAAM,EAAE,QAAQ;YAChB,IAAI;SACJ,CAAC;IACH,CAAC;IAEM,0BAAM,EAAb,UAAc,KAAoB,EAAE,IAAkB;QAAtD;QACC,GAAG,CAAC,IAAI,CAAC,gBAAe,IAAK,SAAS,EAAE;YACvC,IAAI,CAAC,gBAAe,EAAG,IAAI,aAAG,EAAE;QACjC;QAEA,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YACpC,MAAM,IAAI,KAAK,CAAC,6CAA2C,KAAK,CAAC,QAAQ,GAAE,KAAG,CAAC;QAChF;QAEA,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC;QAErC,GAAG,CAAC,KAAI,WAAY,iBAAO,EAAE;YAC5B,IAAI,CAAC,IAAI,CAAC,UAAC,UAAU;gBACpB,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,CAAC;gBAC3C,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,UAAU,CAAC;gBACvC,OAAO,UAAU;YAClB,CAAC,EAAE,UAAC,KAAK;gBACR,MAAM,KAAK;YACZ,CAAC,CAAC;QACH;QACA,KAAK;YACJ,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC;QAClC;IACD,CAAC;IAEM,kCAAc,EAArB,UAAsB,KAAoB,EAAE,IAAc;QACzD,GAAG,CAAC,IAAI,CAAC,kBAAiB,IAAK,SAAS,EAAE;YACzC,IAAI,CAAC,kBAAiB,EAAG,IAAI,aAAG,EAAE;QACnC;QAEA,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YACtC,MAAM,IAAI,KAAK,CAAC,+CAA6C,KAAK,CAAC,QAAQ,GAAE,KAAG,CAAC;QAClF;QAEA,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC;QACvC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC;IAClC,CAAC;IAEM,uBAAG,EAAV,UAAgE,KAAoB;QAApF;QACC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YACrB,OAAO,IAAI;QACZ;QAEA,IAAM,KAAI,EAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC;QAE5C,GAAG,CAAC,uBAAuB,CAAI,IAAI,CAAC,EAAE;YACrC,OAAO,IAAI;QACZ;QAEA,GAAG,CAAC,KAAI,WAAY,iBAAO,EAAE;YAC5B,OAAO,IAAI;QACZ;QAEA,IAAM,QAAO,EAAoC,IAAK,EAAE;QACxD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,EAAE,OAAO,CAAC;QAExC,OAAO,CAAC,IAAI,CAAC,UAAC,UAAU;YACvB,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,CAAC;YAC3C,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,UAAU,CAAC;YACvC,OAAO,UAAU;QAClB,CAAC,EAAE,UAAC,KAAK;YACR,MAAM,KAAK;QACZ,CAAC,CAAC;QAEF,OAAO,IAAI;IACZ,CAAC;IAEM,+BAAW,EAAlB,UAAuC,KAAoB;QAC1D,GAAG,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE;YAC7B,OAAO,IAAI;QACZ;QAEA,OAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,KAAK,CAAM;IAC9C,CAAC;IAEM,uBAAG,EAAV,UAAW,KAAoB;QAC9B,OAAO,OAAO,CAAC,IAAI,CAAC,gBAAe,GAAI,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IACxE,CAAC;IAEM,+BAAW,EAAlB,UAAmB,KAAoB;QACtC,OAAO,OAAO,CAAC,IAAI,CAAC,kBAAiB,GAAI,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IAC5E,CAAC;IACF,eAAC;AAAD,CAxGA,CAA8B,iBAAO;AAAxB;AA0Gb,kBAAe,QAAQ;;;;;;;;;;AC3MvB;AACA;AACA;AAqHA,GAAG,CAAC,aAAG,CAAC,YAAY,CAAC,EAAE;IACtB,IAAM,aAAY,EAAG,gBAAM,CAAC,MAAM;IAClC,eAAM,EAAG,YAAY,CAAC,MAAM;IAC5B,iCAAwB,EAAG,YAAY,CAAC,wBAAwB;IAChE,4BAAmB,EAAG,YAAY,CAAC,mBAAmB;IACtD,8BAAqB,EAAG,YAAY,CAAC,qBAAqB;IAC1D,WAAE,EAAG,YAAY,CAAC,EAAE;IACpB,aAAI,EAAG,YAAY,CAAC,IAAI;AACzB;AACA,KAAK;IACJ,aAAI,EAAG,yBAAyB,CAAS;QACxC,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,UAAC,GAAG,IAAK,QAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,EAA5B,CAA4B,CAAC;IACpE,CAAC;IAED,eAAM,EAAG,gBAAgB,MAAW;QAAE;aAAA,UAAiB,EAAjB,qBAAiB,EAAjB,IAAiB;YAAjB;;QACrC,GAAG,CAAC,OAAM,GAAI,IAAI,EAAE;YACnB,MAAM,IAAI,SAAS,CAAC,4CAA4C,CAAC;QAClE;QAEA,IAAM,GAAE,EAAG,MAAM,CAAC,MAAM,CAAC;QACzB,OAAO,CAAC,OAAO,CAAC,UAAC,UAAU;YAC1B,GAAG,CAAC,UAAU,EAAE;gBACf,YAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAC,OAAO;oBAChC,EAAE,CAAC,OAAO,EAAC,EAAG,UAAU,CAAC,OAAO,CAAC;gBAClC,CAAC,CAAC;YACH;QACD,CAAC,CAAC;QAEF,OAAO,EAAE;IACV,CAAC;IAED,iCAAwB,EAAG,kCAAkC,CAAM,EAAE,IAAqB;QACzF,GAAG,CAAC,iBAAQ,CAAC,IAAI,CAAC,EAAE;YACnB,OAAc,MAAO,CAAC,wBAAwB,CAAC,CAAC,EAAE,IAAI,CAAC;QACxD;QAAE,KAAK;YACN,OAAO,MAAM,CAAC,wBAAwB,CAAC,CAAC,EAAE,IAAI,CAAC;QAChD;IACD,CAAC;IAED,4BAAmB,EAAG,6BAA6B,CAAM;QACxD,OAAO,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,UAAC,GAAG,IAAK,QAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,EAA5B,CAA4B,CAAC;IACnF,CAAC;IAED,8BAAqB,EAAG,+BAA+B,CAAM;QAC5D,OAAO,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,UAAC,GAAG,IAAK,cAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,EAA3B,CAA2B;aAC9E,GAAG,CAAC,UAAC,GAAG,IAAK,aAAM,CAAC,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAA5B,CAA4B,CAAC;IAC7C,CAAC;IAED,WAAE,EAAG,YAAY,MAAW,EAAE,MAAW;QACxC,GAAG,CAAC,OAAM,IAAK,MAAM,EAAE;YACtB,OAAO,OAAM,IAAK,EAAC,GAAI,EAAC,EAAG,OAAM,IAAK,EAAC,EAAG,MAAM,EAAE;QACnD;QACA,OAAO,OAAM,IAAK,OAAM,GAAI,OAAM,IAAK,MAAM,EAAE;IAChD,CAAC;AACF;AAEA,GAAG,CAAC,aAAG,CAAC,eAAe,CAAC,EAAE;IACzB,IAAM,aAAY,EAAG,gBAAM,CAAC,MAAM;IAClC,kCAAyB,EAAG,YAAY,CAAC,yBAAyB;IAClE,gBAAO,EAAG,YAAY,CAAC,OAAO;IAC9B,eAAM,EAAG,YAAY,CAAC,MAAM;AAC7B;AACA,KAAK;IACJ,kCAAyB,EAAG,mCAAmC,CAAM;QACpE,OAAO,2BAAmB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,UAAC,QAAQ,EAAE,GAAG;YAClD,QAAQ,CAAC,GAAG,EAAC,EAAG,gCAAwB,CAAC,CAAC,EAAE,GAAG,CAAE;YACjD,OAAO,QAAQ;QAChB,CAAC,EAAE,EAA2C,CAAC;IAChD,CAAC;IAED,gBAAO,EAAG,iBAAiB,CAAM;QAChC,OAAO,YAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,UAAC,GAAG,IAAK,QAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAmB,EAAhC,CAAgC,CAAC;IAC9D,CAAC;IAED,eAAM,EAAG,gBAAgB,CAAM;QAC9B,OAAO,YAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,UAAC,GAAG,IAAK,QAAC,CAAE,GAAG,CAAE,EAAR,CAAQ,CAAC;IACtC,CAAC;AACF;;;;;;;;;;ACpMA;AACA;AAuBA,IAAM,WAAU,EAAwB,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,UAAS,CAAE;AAExE;;;AAGA;IAKC,sBAAY,IAAgC;QAHpC,gBAAU,EAAW,CAAC,CAAC;QAI9B,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACrB,IAAI,CAAC,gBAAe,EAAG,IAAI,CAAE,MAAM,CAAC,QAAQ,CAAE,EAAE;QACjD;QACA,KAAK;YACJ,IAAI,CAAC,MAAK,EAAG,IAAI;QAClB;IACD;IAAC;IAED;;;IAGA,4BAAI,EAAJ;QACC,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE;YACzB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE;QACnC;QACA,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE;YAChB,OAAO,UAAU;QAClB;QACA,GAAG,CAAC,EAAE,IAAI,CAAC,WAAU,EAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YAC1C,OAAO;gBACN,IAAI,EAAE,KAAK;gBACX,KAAK,EAAE,IAAI,CAAC,KAAK,CAAE,IAAI,CAAC,UAAU;aAClC;QACF;QACA,OAAO,UAAU;IAClB,CAAC;IAAA;IAED,uBAAC,MAAM,CAAC,QAAQ,EAAC,EAAjB;QACC,OAAO,IAAI;IACZ,CAAC;IACF,mBAAC;AAAD,CApCA;AAAa;AAsCb;;;;;AAKA,oBAA2B,KAAU;IACpC,OAAO,MAAK,GAAI,OAAO,KAAK,CAAE,MAAM,CAAC,QAAQ,EAAE,IAAK,UAAU;AAC/D;AAFA;AAIA;;;;;AAKA,qBAA4B,KAAU;IACrC,OAAO,MAAK,GAAI,OAAO,KAAK,CAAC,OAAM,IAAK,QAAQ;AACjD;AAFA;AAIA;;;;;AAKA,aAAuB,QAAoC;IAC1D,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;QACzB,OAAO,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE;IACnC;IACA,KAAK,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE;QAC/B,OAAO,IAAI,YAAY,CAAC,QAAQ,CAAC;IAClC;AACD;AAPA;AAoBA;;;;;;;AAOA,eAAyB,QAA6C,EAAE,QAA0B,EAAE,OAAa;IAChH,IAAI,OAAM,EAAG,KAAK;IAElB;QACC,OAAM,EAAG,IAAI;IACd;IAEA;IACA,GAAG,CAAC,WAAW,CAAC,QAAQ,EAAC,GAAI,OAAO,SAAQ,IAAK,QAAQ,EAAE;QAC1D,IAAM,EAAC,EAAG,QAAQ,CAAC,MAAM;QACzB,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,CAAC,EAAE,EAAE,CAAC,EAAE;YAC3B,IAAI,KAAI,EAAG,QAAQ,CAAC,CAAC,CAAC;YACtB,GAAG,CAAC,CAAC,EAAC,EAAG,CAAC,EAAC,EAAG,CAAC,EAAE;gBAChB,IAAM,KAAI,EAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC/B,GAAG,CAAC,CAAC,KAAI,GAAI,2BAAkB,EAAC,GAAI,CAAC,KAAI,GAAI,2BAAkB,CAAC,EAAE;oBACjE,KAAI,GAAI,QAAQ,CAAC,EAAE,CAAC,CAAC;gBACtB;YACD;YACA,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC;YAC/C,GAAG,CAAC,MAAM,EAAE;gBACX,MAAM;YACP;QACD;IACD;IACA,KAAK;QACJ,IAAM,SAAQ,EAAG,GAAG,CAAC,QAAQ,CAAC;QAC9B,GAAG,CAAC,QAAQ,EAAE;YACb,IAAI,OAAM,EAAG,QAAQ,CAAC,IAAI,EAAE;YAE5B,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE;gBACpB,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,QAAQ,EAAE,OAAO,CAAC;gBACvD,GAAG,CAAC,MAAM,EAAE;oBACX,MAAM;gBACP;gBACA,OAAM,EAAG,QAAQ,CAAC,IAAI,EAAE;YACzB;QACD;IACD;AACD;AAtCA;;;;;;;;;;;ACpHA;AACA;AAEA;AACA;AAeW,oBAAW,EAAmB,gBAAM,CAAC,OAAO;AAE1C,mBAAU,EAAG,oBAAuB,KAAU;IAC1D,OAAO,MAAK,GAAI,OAAO,KAAK,CAAC,KAAI,IAAK,UAAU;AACjD,CAAC;AAED,GAAG,CAAC,CAAC,aAAG,CAAC,aAAa,CAAC,EAAE;IAOxB,gBAAM,CAAC,QAAO,EAAG,oBAAW;YA2E3B;;;;;;;;;;;;YAYA,iBAAY,QAAqB;gBAAjC;gBA4HA;;;gBAGQ,WAAK;gBAWb,KAAC,MAAM,CAAC,WAAW,EAAC,EAAc,SAAS;gBAzI1C;;;gBAGA,IAAI,UAAS,EAAG,KAAK;gBAErB;;;gBAGA,IAAM,WAAU,EAAG;oBAClB,OAAO,KAAI,CAAC,MAAK,oBAAkB,GAAI,SAAS;gBACjD,CAAC;gBAED;;;gBAGA,IAAI,UAAS,EAA+B,EAAE;gBAE9C;;;;gBAIA,IAAI,aAAY,EAAG,UAAU,QAAoB;oBAChD,GAAG,CAAC,SAAS,EAAE;wBACd,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC;oBACzB;gBACD,CAAC;gBAED;;;;;;gBAMA,IAAM,OAAM,EAAG,UAAC,QAAe,EAAE,KAAU;oBAC1C;oBACA,GAAG,CAAC,KAAI,CAAC,MAAK,mBAAkB,EAAE;wBACjC,MAAM;oBACP;oBAEA,KAAI,CAAC,MAAK,EAAG,QAAQ;oBACrB,KAAI,CAAC,cAAa,EAAG,KAAK;oBAC1B,aAAY,EAAG,sBAAc;oBAE7B;oBACA;oBACA,GAAG,CAAC,UAAS,GAAI,SAAS,CAAC,OAAM,EAAG,CAAC,EAAE;wBACtC,sBAAc,CAAC;4BACd,GAAG,CAAC,SAAS,EAAE;gCACd,IAAI,MAAK,EAAG,SAAS,CAAC,MAAM;gCAC5B,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,KAAK,EAAE,EAAE,CAAC,EAAE;oCAC/B,SAAS,CAAE,CAAC,CAAE,CAAC,IAAI,CAAC,IAAI,CAAC;gCAC1B;gCACA,UAAS,EAAG,IAAI;4BACjB;wBACD,CAAC,CAAC;oBACH;gBACD,CAAC;gBAED;;;;;;gBAMA,IAAM,QAAO,EAAG,UAAC,QAAe,EAAE,KAAU;oBAC3C,GAAG,CAAC,UAAU,EAAE,EAAE;wBACjB,MAAM;oBACP;oBAEA,GAAG,CAAC,kBAAU,CAAC,KAAK,CAAC,EAAE;wBACtB,KAAK,CAAC,IAAI,CACT,MAAM,CAAC,IAAI,CAAC,IAAI,oBAAkB,EAClC,MAAM,CAAC,IAAI,CAAC,IAAI,mBAAiB,CACjC;wBACD,UAAS,EAAG,IAAI;oBACjB;oBACA,KAAK;wBACJ,MAAM,CAAC,QAAQ,EAAE,KAAK,CAAC;oBACxB;gBACD,CAAC;gBAED,IAAI,CAAC,KAAI,EAAG,UAAiC,WAAiF,EAC5H,UAAmF;oBACpF,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;wBAClC;wBACA;wBACA;wBACA,YAAY,CAAC;4BACZ,IAAM,SAAQ,EAA8C,KAAI,CAAC,MAAK,qBAAmB,EAAG,WAAU,EAAG,WAAW;4BAEpH,GAAG,CAAC,OAAO,SAAQ,IAAK,UAAU,EAAE;gCACnC,IAAI;oCACH,OAAO,CAAC,QAAQ,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;gCACtC;gCACA,MAAM,CAAC,KAAK,EAAE;oCACb,MAAM,CAAC,KAAK,CAAC;gCACd;4BACD;4BACA,KAAK,GAAG,CAAC,KAAI,CAAC,MAAK,oBAAmB,EAAE;gCACvC,MAAM,CAAC,KAAI,CAAC,aAAa,CAAC;4BAC3B;4BACA,KAAK;gCACJ,OAAO,CAAC,KAAI,CAAC,aAAa,CAAC;4BAC5B;wBACD,CAAC,CAAC;oBACH,CAAC,CAAC;gBACH,CAAC;gBAED,IAAI;oBACH,QAAQ,CACP,OAAO,CAAC,IAAI,CAAC,IAAI,oBAAkB,EACnC,OAAO,CAAC,IAAI,CAAC,IAAI,mBAAiB,CAClC;gBACF;gBACA,MAAM,CAAC,KAAK,EAAE;oBACb,MAAM,mBAAiB,KAAK,CAAC;gBAC9B;YACD;YA5MO,YAAG,EAAV,UAAW,QAAyE;gBACnF,OAAO,IAAI,IAAI,CAAC,UAAU,OAAO,EAAE,MAAM;oBACxC,IAAM,OAAM,EAAU,EAAE;oBACxB,IAAI,SAAQ,EAAG,CAAC;oBAChB,IAAI,MAAK,EAAG,CAAC;oBACb,IAAI,WAAU,EAAG,IAAI;oBAErB,iBAAiB,KAAa,EAAE,KAAU;wBACzC,MAAM,CAAE,KAAK,EAAE,EAAG,KAAK;wBACvB,EAAE,QAAQ;wBACV,MAAM,EAAE;oBACT;oBAEA;wBACC,GAAG,CAAC,WAAU,GAAI,SAAQ,EAAG,KAAK,EAAE;4BACnC,MAAM;wBACP;wBACA,OAAO,CAAC,MAAM,CAAC;oBAChB;oBAEA,qBAAqB,KAAa,EAAE,IAAS;wBAC5C,EAAE,KAAK;wBACP,GAAG,CAAC,kBAAU,CAAC,IAAI,CAAC,EAAE;4BACrB;4BACA;4BACA,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,MAAM,CAAC;wBAC7C;wBACA,KAAK;4BACJ,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;wBACtD;oBACD;oBAEA,IAAI,EAAC,EAAG,CAAC;;wBACT,IAAI,CAAgB,0CAAQ;4BAAvB,IAAM,MAAK;4BACf,WAAW,CAAC,CAAC,EAAE,KAAK,CAAC;4BACrB,CAAC,EAAE;;;;;;;;;;oBAEJ,WAAU,EAAG,KAAK;oBAElB,MAAM,EAAE;;gBACT,CAAC,CAAC;YACH,CAAC;YAEM,aAAI,EAAX,UAAe,QAAiE;gBAC/E,OAAO,IAAI,IAAI,CAAC,UAAU,OAA8B,EAAE,MAAM;;wBAC/D,IAAI,CAAe,0CAAQ;4BAAtB,IAAM,KAAI;4BACd,GAAG,CAAC,KAAI,WAAY,OAAO,EAAE;gCAC5B;gCACA;gCACA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;4BAC3B;4BACA,KAAK;gCACJ,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;4BACpC;;;;;;;;;;;gBAEF,CAAC,CAAC;YACH,CAAC;YAEM,eAAM,EAAb,UAAc,MAAY;gBACzB,OAAO,IAAI,IAAI,CAAC,UAAU,OAAO,EAAE,MAAM;oBACxC,MAAM,CAAC,MAAM,CAAC;gBACf,CAAC,CAAC;YACH,CAAC;YAIM,gBAAO,EAAd,UAAkB,KAAW;gBAC5B,OAAO,IAAI,IAAI,CAAC,UAAU,OAAO;oBAChC,OAAO,CAAK,KAAK,CAAC;gBACnB,CAAC,CAAC;YACH,CAAC;YAwID,wBAAK,EAAL,UAAuB,UAAiF;gBACvG,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC;YACxC,CAAC;YAiBF,cAAC;QAAD,CAlO+B;QAyEvB,GAAC,MAAM,CAAC,OAAO,EAAC,EAAuB,mBAAkC;WAyJhF;AACF;AAEA,kBAAe,mBAAW;;;;;;;;ACtQ1B;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;ACpBA;;;;;;;;;AASA,4BAAsC,KAAQ,EAAE,UAA2B,EAAE,QAAwB,EAAE,YAA4B;IAAnF,+CAA2B;IAAE,0CAAwB;IAAE,kDAA4B;IAClI,OAAO;QACN,KAAK,EAAE,KAAK;QACZ,UAAU,EAAE,UAAU;QACtB,QAAQ,EAAE,QAAQ;QAClB,YAAY,EAAE;KACd;AACF;AAPA;AASA;;;;;;AAMA,oBAAoC,cAAmC;IACtE,OAAO,UAAU,MAAS;QAAE;aAAA,UAAY,EAAZ,qBAAY,EAAZ,IAAY;YAAZ;;QAC3B,OAAO,cAAc,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC;IAC1C,CAAC;AACF;AAJA;;;;;;;;;;ACxBA;;;;;;AAMA,yBAAgC,OAAoD;IACnF,OAAO,UAAU,MAAW,EAAE,WAAoB,EAAE,UAA+B;QAClF,GAAG,CAAC,OAAO,OAAM,IAAK,UAAU,EAAE;YACjC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC;QACrC;QACA,KAAK;YACJ,OAAO,CAAC,MAAM,EAAE,WAAW,CAAC;QAC7B;IACD,CAAC;AACF;AATA;AAWA,kBAAe,eAAe;;;;;;;;;;AChB9B;AAGA;AAEA;AAGA;;;AAGa,kBAAS,EAAG,MAAM,EAAE;AAWjC;;;;;;;;AAQA,gCAAuC,MAAqB,EAAE,QAAkB,EAAE,OAAmC;IAAnC,sCAAmC;IAC5G,oBAAe,EAAf,4CAAe,EAAE,oBAA2B,EAA3B,0DAA2B;IAEpD,GAAG,CAAC,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE;QAC9B,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC;IACnD;IACA,IAAM,OAAM,EAAG,IAAI,eAAM,CAAC,EAAE,OAAO,WAAE,MAAM,UAAE,CAAC;IAC9C,IAAM,SAAQ,EAAG,IAAI,mBAAQ,CAAC,MAAM,CAAC;IACrC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE;QACrB,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,aAAY,CAAE,CAAC;IACtC,CAAC,CAAC;IACF,QAAQ,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,CAAC;IACtC,OAAO,MAAM;AACd;AAbA;;;;;;;;;;AC9BA;AAOA;;;AAGA,0BAA0B,KAAa;IACtC,IAAM,MAAK,EAAmB,EAAE;IAChC,IAAM,OAAM,EAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;IAE/B,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACvC,IAAM,MAAK,EAAG,MAAM,CAAC,CAAC,CAAC;QACvB,IAAM,mBAAkB,EAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;QAC7C,IAAI,IAAG,QAAQ;QACf,IAAI,MAAK,EAAG,EAAE;QAEd,GAAG,CAAC,mBAAkB,GAAI,CAAC,EAAE;YAC5B,IAAG,EAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,kBAAkB,CAAC;YACxC,MAAK,EAAG,KAAK,CAAC,KAAK,CAAC,mBAAkB,EAAG,CAAC,CAAC;QAC5C;QACA,KAAK;YACJ,IAAG,EAAG,KAAK;QACZ;QAEA,IAAG,EAAG,IAAG,EAAG,kBAAkB,CAAC,GAAG,EAAC,EAAG,EAAE;QACxC,MAAK,EAAG,MAAK,EAAG,kBAAkB,CAAC,KAAK,EAAC,EAAG,EAAE;QAE9C,GAAG,CAAC,IAAG,GAAI,KAAK,EAAE;YACjB,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;QACvB;QACA,KAAK;YACJ,KAAK,CAAC,GAAG,EAAC,EAAG,CAAC,KAAK,CAAC;QACrB;IACD;IACA,OAAO,KAAK;AACb;AAEA;;;AAGA;IACC;;;;IAIA,yBAAY,KAA4C;QACvD,IAAI,IAAe;QAEnB,GAAG,CAAC,MAAK,WAAY,eAAe,EAAE;YACrC;YACA,KAAI,EAAe,gBAAS,CAAC,KAAK,CAAC,KAAK,CAAC;QAC1C;QACA,KAAK,GAAG,CAAC,OAAO,MAAK,IAAK,QAAQ,EAAE;YACnC;YACA,KAAI,EAAG,EAAE;YACT,IAAI,CAAC,IAAM,IAAG,GAAI,KAAK,EAAE;gBACxB,IAAM,MAAK,EAAgB,KAAM,CAAC,GAAG,CAAC;gBAEtC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBACzB,IAAI,CAAC,GAAG,EAAC,EAAG,KAAK,CAAC,OAAM,EAAG,KAAK,CAAC,KAAK,GAAE,EAAG,CAAE,EAAE,CAAE;gBAClD;gBACA,KAAK,GAAG,CAAC,MAAK,GAAI,IAAI,EAAE;oBACvB,IAAI,CAAC,GAAG,EAAC,EAAG,CAAE,EAAE,CAAE;gBACnB;gBACA,KAAK;oBACJ,IAAI,CAAC,GAAG,EAAC,EAAG,CAAW,KAAK,CAAE;gBAC/B;YACD;QACD;QACA,KAAK,GAAG,CAAC,OAAO,MAAK,IAAK,QAAQ,EAAE;YACnC;YACA,KAAI,EAAG,gBAAgB,CAAC,KAAK,CAAC;QAC/B;QACA,KAAK;YACJ,KAAI,EAAG,EAAE;QACV;QAEA,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,KAAI,CAAE,CAAC;IACtD;IAQA;;;;;IAKA,iCAAM,EAAN,UAAO,GAAW,EAAE,KAAa;QAChC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YACnB,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC;QACrB;QACA,KAAK;YACJ,IAAM,OAAM,EAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;YAC9B,GAAG,CAAC,MAAM,EAAE;gBACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;YACnB;QACD;IACD,CAAC;IAED;;;;IAIA,iCAAM,EAAN,UAAO,GAAW;QACjB;QACA;QACA;QACA,IAAI,CAAC,KAAK,CAAC,GAAG,EAAC,EAAG,SAAS;IAC5B,CAAC;IAED;;;;;IAKA,8BAAG,EAAH,UAAI,GAAW;QACd,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YACnB,OAAO,SAAS;QACjB;QACA,IAAM,MAAK,EAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;QAC7B,OAAO,MAAK,EAAG,KAAK,CAAC,CAAC,EAAC,EAAG,SAAS;IACpC,CAAC;IAED;;;;;IAKA,iCAAM,EAAN,UAAO,GAAW;QACjB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YACnB,OAAO,SAAS;QACjB;QACA,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;IACvB,CAAC;IAED;;;;;IAKA,8BAAG,EAAH,UAAI,GAAW;QACd,OAAO,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACtC,CAAC;IAED;;;;IAIA,+BAAI,EAAJ;QACC,IAAM,KAAI,EAAa,EAAE;QAEzB,IAAI,CAAC,IAAM,IAAG,GAAI,IAAI,CAAC,KAAK,EAAE;YAC7B,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBAClB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACf;QACD;QAEA,OAAO,IAAI;IACZ,CAAC;IAED;;;;IAIA,8BAAG,EAAH,UAAI,GAAW,EAAE,KAAa;QAC7B,IAAI,CAAC,KAAK,CAAC,GAAG,EAAC,EAAG,CAAE,KAAK,CAAE;IAC5B,CAAC;IAED;;;;IAIA,mCAAQ,EAAR;QACC,IAAM,MAAK,EAAa,EAAE;QAE1B,IAAI,CAAC,IAAM,IAAG,GAAI,IAAI,CAAC,KAAK,EAAE;YAC7B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBACnB,QAAQ;YACT;YAEA,IAAM,OAAM,EAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;YAC9B,GAAG,CAAC,MAAM,EAAE;gBACX,IAAM,WAAU,EAAG,kBAAkB,CAAC,GAAG,CAAC;gBAC1C,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACvC,KAAK,CAAC,IAAI,CAAC,WAAU,EAAG,CAAC,MAAM,CAAC,CAAC,EAAC,EAAG,CAAC,IAAG,EAAG,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAC,EAAG,EAAE,CAAC,CAAC;gBAClF;YACD;QACD;QAEA,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC;IACvB,CAAC;IACF,sBAAC;AAAD,CA3JA;;;;;;;;;;;AC0RA;;;AAGA,IAAY,SAIX;AAJD,WAAY,SAAS;IACpB,2CAAS;IACT,+CAAO;IACP,2CAAK;AACN,CAAC,EAJW,UAAS,EAAT,kBAAS,IAAT,kBAAS;;;;;;;;;;AC1UrB;AAEA;AAEA;AAGA;;;AAGA,IAAM,uBAAsB,EAAoC,IAAI,iBAAO,EAAE;AA2B7E;;;;;;;AAOA,gBAAuB,EAAqC;QAAnC,cAAI,EAAE,gCAAa;IAC3C,OAAO,iCAAe,CAAC,UAAC,MAAM,EAAE,WAAW;QAC1C,mCAAgB,CAAC,UAA2B,UAAe;YAA1C;YAChB,IAAM,SAAQ,EAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC;YAChD,GAAG,CAAC,QAAQ,EAAE;gBACb,IAAM,oBAAmB,EAAG,sBAAsB,CAAC,GAAG,CAAC,IAAI,EAAC,GAAI,EAAE;gBAClE,GAAG,CAAC,mBAAmB,CAAC,OAAM,IAAK,CAAC,EAAE;oBACrC,sBAAsB,CAAC,GAAG,CAAC,IAAI,EAAE,mBAAmB,CAAC;gBACtD;gBACA,GAAG,CAAC,mBAAmB,CAAC,OAAO,CAAC,QAAQ,EAAC,IAAK,CAAC,CAAC,EAAE;oBACjD,QAAQ,CAAC,EAAE,CAAC,YAAY,EAAE;wBACzB,KAAI,CAAC,UAAU,EAAE;oBAClB,CAAC,CAAC;oBACF,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC;gBACnC;gBACA,OAAO,aAAa,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,UAAU,CAAC;YACjD;QACD,CAAC,CAAC,CAAC,MAAM,CAAC;IACX,CAAC,CAAC;AACH;AAnBA;AAqBA,kBAAe,MAAM;;;;;;;;;;;ACjErB;AACA;AAEA;AAIA,mBACC,SAAyC,EACzC,IAAmB,EACnB,EAAmD;QAAjD,gCAAa;IAGf;QAA8B;QAA9B;;QAQA;QAPQ,4CAAiB,EAAxB,UAAyB,UAAoC;YAC5D,iBAAM,iBAAiB,YAAC,UAAiB,CAAC;YAC1C,IAAI,CAAC,UAAU,EAAE;QAClB,CAAC;QACS,iCAAM,EAAhB;YACC,OAAO,KAAC,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC;QACpD,CAAC;QAPI,gBAAe;YADpB,eAAM,CAAC,EAAE,IAAI,QAAE,aAAa,iBAAE;WACzB,eAAe,CAQpB;QAAD,sBAAC;KARD,CAA8B,uBAAU;IASxC,OAAO,eAAe;AACvB;AAhBA;AAkBA,kBAAe,SAAS;;;;;;;;;;;AlBzBxB;AACA;AAEA;AACA,kBAAe,aAAG;AAElB,SAAG,CAAC,eAAe,EAAE,OAAO,gBAAM,CAAC,MAAM,CAAC,OAAM,IAAK,UAAU,EAAE,IAAI,CAAC;AAEtE,SAAG,CAAC,aAAa,EAAE,OAAO,gBAAM,CAAC,YAAW,IAAK,WAAW,EAAE,IAAI,CAAC;AACnE,SAAG,CAAC,UAAU,EAAE,OAAO,gBAAM,CAAC,SAAQ,IAAK,WAAW,EAAE,IAAI,CAAC;AAC7D,SAAG,CAAC,YAAY,EAAE,OAAO,gBAAM,CAAC,WAAU,IAAK,WAAW,EAAE,IAAI,CAAC;AACjE,SAAG,CAAC,KAAK,EAAE,OAAO,gBAAM,CAAC,eAAc,IAAK,WAAW,EAAE,IAAI,CAAC;AAC9D,SAAG,CAAC,MAAM,EAAE,aAAG,CAAC,KAAK,EAAC,GAAI,eAAc,GAAI,gBAAM,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC;AAClF,SAAG,CAAC,MAAM,EAAE;IACX,GAAG,CAAC,CAAC,aAAG,CAAC,MAAM,CAAC,EAAE;QACjB,OAAO,KAAK;IACb;IAEA,IAAM,QAAO,EAAG,IAAI,gBAAM,CAAC,cAAc,EAAE;IAC3C,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,uBAAuB,EAAE,IAAI,CAAC;IAClD,OAAO,CAAC,aAAY,EAAG,MAAM;IAC7B,OAAO,CAAC,KAAK,EAAE;IACf,OAAO,OAAO,CAAC,aAAY,IAAK,MAAM;AACvC,CAAC,EAAE,IAAI,CAAC;AAER,SAAG,CAAC,aAAa,EAAE,SAAQ,GAAI,iBAAM,GAAI,OAAO,gBAAM,CAAC,OAAM,IAAK,UAAU,EAAE,IAAI,CAAC;AAEnF,SAAG,CAAC,OAAO,EAAE,QAAO,GAAI,iBAAM,GAAI,OAAO,gBAAM,CAAC,MAAK,IAAK,UAAU,EAAE,IAAI,CAAC;AAE3E,SAAG,CAAC,uBAAuB,EAAE,IAAI,OAAO,CAAC,UAAC,OAAO;IAChD,IAAI;QACH,GAAG,CAAC,gBAAM,CAAC,OAAM,IAAK,UAAS,GAAI,gBAAM,CAAC,IAAG,GAAI,gBAAM,CAAC,GAAG,CAAC,eAAe,EAAE;YAC5E,IAAM,KAAI,EAAG,IAAI,IAAI,CAAC,CAAE,uNAUpB,CAAE,EAAE,EAAE,IAAI,EAAE,yBAAwB,CAAE,CAAC;YAC3C,IAAM,OAAM,EAAG,IAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACpD,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,EAAgB;oBAAd,gBAAY;gBACjD,OAAO,CAAC,OAAM,IAAK,MAAM,CAAC;YAC3B,CAAC,CAAC;YACF,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC;QACvB;QAAE,KAAK;YACN,OAAO,CAAC,KAAK,CAAC;QACf;IACD;IAAE,MAAM,CAAC,CAAC,EAAE;QACX;QACA,OAAO,CAAC,KAAK,CAAC;IACf;AACD,CAAC,CAAC,EAAE,IAAI,CAAC;;;;;;;;;;AAtCT,+BAA+B,KAAU;IACxC,OAAO,MAAK,GAAI,KAAK,CAAC,IAAI;AAC3B;AAEA;;;AAGa,kBAAS,EAA6C,EAAE;AAErE;;;AAGa,sBAAa,EAAuC,EAAE;AAEnE;;;;AAIA,IAAM,cAAa,EAA8C,EAAE;AAwBnE;;;AAGA,IAAM,YAAW,EAAG,CAAC;IACpB;IACA,GAAG,CAAC,OAAO,OAAM,IAAK,WAAW,EAAE;QAClC;QACA,OAAO,MAAM;IACd;IACA,KAAK,GAAG,CAAC,OAAO,OAAM,IAAK,WAAW,EAAE;QACvC;QACA,OAAO,MAAM;IACd;IACA,KAAK,GAAG,CAAC,OAAO,KAAI,IAAK,WAAW,EAAE;QACrC;QACA,OAAO,IAAI;IACZ;IACA;IACA,OAAO,EAAE;AACV,CAAC,CAAC,EAAE;AAEJ;AACQ,0EAAc;AAEtB;AACA,GAAG,CAAC,qBAAoB,GAAI,WAAW,EAAE;IACxC,OAAO,WAAW,CAAC,kBAAkB;AACtC;AAEA;;;;;;AAMA,iCAAiC,KAAU;IAC1C,OAAO,OAAO,MAAK,IAAK,UAAU;AACnC;AAEA;;;;AAIA,IAAM,YAAW,EAAsB;MACpC,uBAAuB,CAAC,cAAc;UACrC,cAAc,CAAC,KAAK,CAAC,WAAW;UAChC;MACD,EAAE,CAAE;;;;;;;;;;;;AAYP,cAAqB,UAAkB,EAAE,OAAgB,EAAE,IAA2B,EAAE,MAAe;IACtG,WAAU,EAAG,OAAO,CAAC,CAAE,UAAU,CAAE,EAAE,IAAI,EAAC,EAAG,IAAI,EAAE;AACpD;AAFA;AAIA;;;;;;;;;AASA,mBAA0B,UAAkB,EAAE,SAAuC;IACpF,IAAM,OAAM,EAAqB,UAAU,CAAC,KAAK,CAAC,gBAAgB,EAAC,GAAI,EAAE;IACzE,IAAI,EAAC,EAAG,CAAC;IAET,aAAa,IAAc;QAC1B,IAAM,KAAI,EAAG,MAAM,CAAC,CAAC,EAAE,CAAC;QACxB,GAAG,CAAC,KAAI,IAAK,GAAG,EAAE;YACjB;YACA,OAAO,IAAI;QACZ;QACA,KAAK;YACJ;YACA,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,EAAC,IAAK,GAAG,EAAE;gBACxB,GAAG,CAAC,CAAC,KAAI,GAAI,GAAG,CAAC,IAAI,CAAC,EAAE;oBACvB;oBACA,OAAO,GAAG,EAAE;gBACb;gBACA,KAAK;oBACJ;oBACA,GAAG,CAAC,IAAI,CAAC;oBACT,OAAO,GAAG,CAAC,IAAI,CAAC;gBACjB;YACD;YACA;YACA,OAAO,IAAI;QACZ;IACD;IAEA,IAAM,GAAE,EAAG,GAAG,EAAE;IAEhB,OAAO,GAAE,GAAI,SAAS,CAAC,EAAE,CAAC;AAC3B;AA/BA;AAiCA;;;;;AAKA,gBAAuB,OAAe;IACrC,IAAM,kBAAiB,EAAG,OAAO,CAAC,WAAW,EAAE;IAE/C,OAAO,OAAO,CAAC,kBAAiB,GAAI,YAAW,GAAI,kBAAiB,GAAI,kBAAS,GAAI,qBAAa,CAAC,iBAAiB,CAAC,CAAC;AACvH;AAJA;AAMA;;;;;;;;;;;;;;;AAeA,aAAoB,OAAe,EAAE,KAA4D,EAAE,SAA0B;IAA1B,6CAA0B;IAC5H,IAAM,kBAAiB,EAAG,OAAO,CAAC,WAAW,EAAE;IAE/C,GAAG,CAAC,MAAM,CAAC,iBAAiB,EAAC,GAAI,CAAC,UAAS,GAAI,CAAC,CAAC,kBAAiB,GAAI,WAAW,CAAC,EAAE;QACnF,MAAM,IAAI,SAAS,CAAC,eAAY,QAAO,qCAAkC,CAAC;IAC3E;IAEA,GAAG,CAAC,OAAO,MAAK,IAAK,UAAU,EAAE;QAChC,qBAAa,CAAC,iBAAiB,EAAC,EAAG,KAAK;IACzC;IACA,KAAK,GAAG,CAAC,qBAAqB,CAAC,KAAK,CAAC,EAAE;QACtC,aAAa,CAAE,OAAO,EAAE,EAAG,KAAK,CAAC,IAAI,CAAC,UAAC,aAAgC;YACtE,iBAAS,CAAG,OAAO,EAAE,EAAG,aAAa;YACrC,OAAO,aAAa,CAAG,OAAO,CAAE;QACjC,CAAC,EAAE;YACF,OAAO,aAAa,CAAG,OAAO,CAAE;QACjC,CAAC,CAAC;IACH;IACA,KAAK;QACJ,iBAAS,CAAC,iBAAiB,EAAC,EAAG,KAAK;QACpC,OAAO,qBAAa,CAAC,iBAAiB,CAAC;IACxC;AACD;AAtBA;AAwBA;;;;;AAKA,aAA4B,OAAe;IAC1C,IAAI,MAAyB;IAE7B,IAAM,kBAAiB,EAAG,OAAO,CAAC,WAAW,EAAE;IAE/C,GAAG,CAAC,kBAAiB,GAAI,WAAW,EAAE;QACrC,OAAM,EAAG,WAAW,CAAC,iBAAiB,CAAC;IACxC;IACA,KAAK,GAAG,CAAC,qBAAa,CAAC,iBAAiB,CAAC,EAAE;QAC1C,OAAM,EAAG,iBAAS,CAAC,iBAAiB,EAAC,EAAG,qBAAa,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;QACnF,OAAO,qBAAa,CAAC,iBAAiB,CAAC;IACxC;IACA,KAAK,GAAG,CAAC,kBAAiB,GAAI,iBAAS,EAAE;QACxC,OAAM,EAAG,iBAAS,CAAC,iBAAiB,CAAC;IACtC;IACA,KAAK,GAAG,CAAC,QAAO,GAAI,aAAa,EAAE;QAClC,OAAO,KAAK;IACb;IACA,KAAK;QACJ,MAAM,IAAI,SAAS,CAAC,kDAA+C,QAAO,MAAG,CAAC;IAC/E;IAEA,OAAO,MAAM;AACd;AAvBA;AAyBA;;;AAIA;AAEA;AACA,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC;AAElB;AACA,GAAG,CAAC,cAAc,EAAE,OAAO,SAAQ,IAAK,YAAW,GAAI,OAAO,SAAQ,IAAK,WAAW,CAAC;AAEvF;AACA,GAAG,CAAC,WAAW,EAAE;IAChB,GAAG,CAAC,OAAO,QAAO,IAAK,SAAQ,GAAI,OAAO,CAAC,SAAQ,GAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE;QAC7E,OAAO,OAAO,CAAC,QAAQ,CAAC,IAAI;IAC7B;AACD,CAAC,CAAC;;;;;;;;AmBrQF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;ACvLtC;AAaA;AACA;AACA;AACA;AAIA,IAAM,aAAY,EAAG,oBAAoB;AACzC,IAAM,cAAa,EAAG,aAAY,EAAG,UAAU;AAC/C,IAAM,gBAAe,EAAG,aAAY,EAAG,YAAY;AAEnD,IAAM,WAAU,EAAsC,EAAE;AA8D3C,0BAAiB,EAAG,IAAI,iBAAO,EAAmB;AAE/D,cAAc,MAAqB,EAAE,MAAqB;IACzD,GAAG,CAAC,WAAO,CAAC,MAAM,EAAC,GAAI,WAAO,CAAC,MAAM,CAAC,EAAE;QACvC,GAAG,CAAC,MAAM,CAAC,IAAG,IAAK,MAAM,CAAC,GAAG,EAAE;YAC9B,OAAO,KAAK;QACb;QACA,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,IAAG,IAAK,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE;YACpD,OAAO,KAAK;QACb;QACA,OAAO,IAAI;IACZ;IACA,KAAK,GAAG,CAAC,WAAO,CAAC,MAAM,EAAC,GAAI,WAAO,CAAC,MAAM,CAAC,EAAE;QAC5C,GAAG,CAAC,MAAM,CAAC,kBAAiB,IAAK,MAAM,CAAC,iBAAiB,EAAE;YAC1D,OAAO,KAAK;QACb;QACA,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,IAAG,IAAK,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE;YACpD,OAAO,KAAK;QACb;QACA,OAAO,IAAI;IACZ;IACA,OAAO,KAAK;AACb;AAEA,IAAM,kBAAiB,EAAG;IACzB,MAAM,IAAI,KAAK,CAAC,wEAAwE,CAAC;AAC1F,CAAC;AAED,8BAA8B,gBAA6C;IAC1E,IAAM,SAAQ,EAAG;QAChB,SAAS,EAAE,SAAS;QACpB,YAAY,EAAE,UAAS,OAAoB,EAAE,SAAiB,EAAE,KAAa;YAC3E,OAAO,CAAC,KAAa,CAAC,SAAS,EAAC,EAAG,KAAK;QAC1C,CAAC;QACD,WAAW,EAAE;YACZ,KAAK,EAAE,iBAAiB;YACxB,IAAI,EAAE;SACN;QACD,uBAAuB,EAAE,EAAE;QAC3B,oBAAoB,EAAE,EAAE;QACxB,OAAO,EAAE,IAAI,iBAAO,EAAE;QACtB,KAAK,EAAE;KACP;IACD,OAAO,qBAAK,QAAQ,EAAK,gBAAgB,CAAuB;AACjE;AAEA,yBAAyB,UAAkB;IAC1C,GAAG,CAAC,OAAO,WAAU,IAAK,QAAQ,EAAE;QACnC,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC;IAChD;AACD;AAEA,sBACC,OAAa,EACb,QAAgB,EAChB,UAAgC,EAChC,iBAAoC,EACpC,kBAAyC;IAEzC,IAAM,SAAQ,EAAG,mBAAkB,GAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;IAC1D,IAAM,aAAY,EAAG,UAAU,CAAC,QAAQ,CAAC;IACzC,IAAM,cAAa,EAAG,QAAQ,CAAC,QAAQ,CAAC;IAExC,IAAM,UAAS,EAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;IACpC,IAAM,SAAQ,EAAG,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAC,GAAI,IAAI,iBAAO,EAAE;IAExE,GAAG,CAAC,aAAa,EAAE;QAClB,IAAM,cAAa,EAAG,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC;QACjD,OAAO,CAAC,mBAAmB,CAAC,SAAS,EAAE,aAAa,CAAC;IACtD;IAEA,IAAI,SAAQ,EAAG,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;IAEjD,GAAG,CAAC,UAAS,IAAK,OAAO,EAAE;QAC1B,SAAQ,EAAG,UAAoB,GAAU;YACxC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC;YAC3B,GAAG,CAAC,MAAc,CAAC,eAAe,EAAC,EAAI,GAAG,CAAC,MAA2B,CAAC,KAAK;QAC9E,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;IACxB;IAEA,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,QAAQ,CAAC;IAC7C,QAAQ,CAAC,GAAG,CAAC,YAAY,EAAE,QAAQ,CAAC;IACpC,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,CAAC;AACjD;AAEA,oBAAoB,OAAa,EAAE,OAA2B;IAC7D,GAAG,CAAC,OAAO,EAAE;QACZ,IAAM,WAAU,EAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;QACrC,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,OAAmB,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAClD;IACD;AACD;AAEA,uBAAuB,OAAa,EAAE,OAA2B;IAChE,GAAG,CAAC,OAAO,EAAE;QACZ,IAAM,WAAU,EAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;QACrC,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,OAAmB,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACrD;IACD;AACD;AAEA,uBAAuB,OAAa,EAAE,UAAgC,EAAE,iBAAoC;IAC3G,IAAM,UAAS,EAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IACzC,IAAM,UAAS,EAAG,SAAS,CAAC,MAAM;IAClC,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,SAAS,EAAE,CAAC,EAAE,EAAE;QACnC,IAAM,SAAQ,EAAG,SAAS,CAAC,CAAC,CAAC;QAC7B,IAAI,UAAS,EAAG,UAAU,CAAC,QAAQ,CAAC;QACpC,GAAG,CAAC,SAAQ,IAAK,SAAS,EAAE;YAC3B,IAAM,eAAc,EAAG,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,UAAU,EAAE,CAAE,SAAS,CAAE;YAC3E,GAAG,CAAC,CAAE,OAAmB,CAAC,SAAS,EAAE;gBACnC,OAAmB,CAAC,UAAS,EAAG,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE;YACjE;YACA,KAAK;gBACJ,IAAI,CAAC,IAAI,IAAC,EAAG,CAAC,EAAE,IAAC,EAAG,cAAc,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;oBAC/C,UAAU,CAAC,OAAO,EAAE,cAAc,CAAC,GAAC,CAAC,CAAC;gBACvC;YACD;QACD;QACA,KAAK,GAAG,CAAC,SAAQ,IAAK,QAAQ,EAAE;YAC/B,IAAM,WAAU,EAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YACzC,IAAM,WAAU,EAAG,UAAU,CAAC,MAAM;YACpC,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,UAAU,EAAE,CAAC,EAAE,EAAE;gBACpC,IAAM,UAAS,EAAG,UAAU,CAAC,CAAC,CAAC;gBAC/B,IAAM,WAAU,EAAG,SAAS,CAAC,SAAS,CAAC;gBACvC,GAAG,CAAC,UAAU,EAAE;oBACf,eAAe,CAAC,UAAU,CAAC;oBAC3B,iBAAiB,CAAC,YAAa,CAAC,OAAsB,EAAE,SAAS,EAAE,UAAU,CAAC;gBAC/E;YACD;QACD;QACA,KAAK,GAAG,CAAC,SAAQ,IAAK,MAAK,GAAI,UAAS,IAAK,KAAI,GAAI,UAAS,IAAK,SAAS,EAAE;YAC7E,IAAM,KAAI,EAAG,OAAO,SAAS;YAC7B,GAAG,CAAC,KAAI,IAAK,WAAU,GAAI,QAAQ,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,EAAC,IAAK,CAAC,EAAE;gBAC/D,YAAY,CAAC,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,iBAAiB,CAAC;YAC/D;YACA,KAAK,GAAG,CAAC,KAAI,IAAK,SAAQ,GAAI,SAAQ,IAAK,QAAO,GAAI,SAAQ,IAAK,WAAW,EAAE;gBAC/E,GAAG,CAAC,iBAAiB,CAAC,UAAS,IAAK,cAAa,GAAI,SAAQ,IAAK,MAAM,EAAE;oBACxE,OAAmB,CAAC,cAAc,CAAC,eAAe,EAAE,QAAQ,EAAE,SAAS,CAAC;gBAC1E;gBACA,KAAK;oBACH,OAAmB,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAS,CAAC;gBACvD;YACD;YACA,KAAK;gBACH,OAAe,CAAC,QAAQ,EAAC,EAAG,SAAS;YACvC;QACD;IACD;AACD;AAEA,8BACC,OAAa,EACb,kBAAwC,EACxC,UAAgC,EAChC,iBAAoC;IAEpC,IAAM,SAAQ,EAAG,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;IACvD,GAAG,CAAC,QAAQ,EAAE;QACb,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,UAAC,QAAQ;YAChD,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAC,IAAK,KAAI,GAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;gBAC5D,IAAM,cAAa,EAAG,QAAQ,CAAC,GAAG,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;gBAChE,GAAG,CAAC,aAAa,EAAE;oBAClB,OAAO,CAAC,mBAAmB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC;gBAC/D;YACD;QACD,CAAC,CAAC;IACH;AACD;AAEA,0BACC,OAAa,EACb,kBAAwC,EACxC,UAAgC,EAChC,iBAAoC;IAEpC,IAAI,kBAAiB,EAAG,KAAK;IAC7B,IAAM,UAAS,EAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IACzC,IAAM,UAAS,EAAG,SAAS,CAAC,MAAM;IAClC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,EAAC,IAAK,CAAC,EAAC,GAAI,kBAAkB,CAAC,OAAO,EAAE;QACtE,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,kBAAkB,CAAC,OAAO,CAAC,EAAE;YAC9C,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,kBAAkB,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC3D,aAAa,CAAC,OAAO,EAAE,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACtD;QACD;QACA,KAAK;YACJ,aAAa,CAAC,OAAO,EAAE,kBAAkB,CAAC,OAAO,CAAC;QACnD;IACD;IAEA,oBAAoB,CAAC,OAAO,EAAE,kBAAkB,EAAE,UAAU,EAAE,iBAAiB,CAAC;IAEhF,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,SAAS,EAAE,CAAC,EAAE,EAAE;QACnC,IAAM,SAAQ,EAAG,SAAS,CAAC,CAAC,CAAC;QAC7B,IAAI,UAAS,EAAG,UAAU,CAAC,QAAQ,CAAC;QACpC,IAAM,cAAa,EAAG,kBAAmB,CAAC,QAAQ,CAAC;QACnD,GAAG,CAAC,SAAQ,IAAK,SAAS,EAAE;YAC3B,IAAM,gBAAe,EAAG,KAAK,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,cAAc,EAAE,CAAE,aAAa,CAAE;YACxF,IAAM,eAAc,EAAG,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,UAAU,EAAE,CAAE,SAAS,CAAE;YAC3E,GAAG,CAAC,gBAAe,GAAI,eAAe,CAAC,OAAM,EAAG,CAAC,EAAE;gBAClD,GAAG,CAAC,CAAC,UAAS,GAAI,SAAS,CAAC,OAAM,IAAK,CAAC,EAAE;oBACzC,IAAI,CAAC,IAAI,IAAC,EAAG,CAAC,EAAE,IAAC,EAAG,eAAe,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;wBAChD,aAAa,CAAC,OAAO,EAAE,eAAe,CAAC,GAAC,CAAC,CAAC;oBAC3C;gBACD;gBACA,KAAK;oBACJ,IAAM,WAAU,mBAAuC,cAAc,CAAE;oBACvE,IAAI,CAAC,IAAI,IAAC,EAAG,CAAC,EAAE,IAAC,EAAG,eAAe,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;wBAChD,IAAM,kBAAiB,EAAG,eAAe,CAAC,GAAC,CAAC;wBAC5C,GAAG,CAAC,iBAAiB,EAAE;4BACtB,IAAM,WAAU,EAAG,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC;4BACxD,GAAG,CAAC,WAAU,IAAK,CAAC,CAAC,EAAE;gCACtB,aAAa,CAAC,OAAO,EAAE,iBAAiB,CAAC;4BAC1C;4BACA,KAAK;gCACJ,UAAU,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC;4BACjC;wBACD;oBACD;oBACA,IAAI,CAAC,IAAI,IAAC,EAAG,CAAC,EAAE,IAAC,EAAG,UAAU,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;wBAC3C,UAAU,CAAC,OAAO,EAAE,UAAU,CAAC,GAAC,CAAC,CAAC;oBACnC;gBACD;YACD;YACA,KAAK;gBACJ,IAAI,CAAC,IAAI,IAAC,EAAG,CAAC,EAAE,IAAC,EAAG,cAAc,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;oBAC/C,UAAU,CAAC,OAAO,EAAE,cAAc,CAAC,GAAC,CAAC,CAAC;gBACvC;YACD;QACD;QACA,KAAK,GAAG,CAAC,SAAQ,IAAK,QAAQ,EAAE;YAC/B,IAAM,WAAU,EAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YACzC,IAAM,WAAU,EAAG,UAAU,CAAC,MAAM;YACpC,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,UAAU,EAAE,CAAC,EAAE,EAAE;gBACpC,IAAM,UAAS,EAAG,UAAU,CAAC,CAAC,CAAC;gBAC/B,IAAM,cAAa,EAAG,SAAS,CAAC,SAAS,CAAC;gBAC1C,IAAM,cAAa,EAAG,aAAa,CAAC,SAAS,CAAC;gBAC9C,GAAG,CAAC,cAAa,IAAK,aAAa,EAAE;oBACpC,QAAQ;gBACT;gBACA,kBAAiB,EAAG,IAAI;gBACxB,GAAG,CAAC,aAAa,EAAE;oBAClB,eAAe,CAAC,aAAa,CAAC;oBAC9B,iBAAiB,CAAC,YAAa,CAAC,OAAsB,EAAE,SAAS,EAAE,aAAa,CAAC;gBAClF;gBACA,KAAK;oBACJ,iBAAiB,CAAC,YAAa,CAAC,OAAsB,EAAE,SAAS,EAAE,EAAE,CAAC;gBACvE;YACD;QACD;QACA,KAAK;YACJ,GAAG,CAAC,CAAC,UAAS,GAAI,OAAO,cAAa,IAAK,QAAQ,EAAE;gBACpD,UAAS,EAAG,EAAE;YACf;YACA,GAAG,CAAC,SAAQ,IAAK,OAAO,EAAE;gBACzB,IAAM,SAAQ,EAAI,OAAe,CAAC,QAAQ,CAAC;gBAC3C,GAAG,CACF,SAAQ,IAAK;uBACV,CAAE,OAAe,CAAC,eAAe;wBACnC,EAAE,SAAQ,IAAM,OAAe,CAAC,eAAe;wBAC/C,EAAE,UAAS,IAAK,aAAa,CAE/B,EAAE;oBACA,OAAe,CAAC,QAAQ,EAAC,EAAG,SAAS;oBACrC,OAAe,CAAC,eAAe,EAAC,EAAG,SAAS;gBAC9C;gBACA,GAAG,CAAC,UAAS,IAAK,aAAa,EAAE;oBAChC,kBAAiB,EAAG,IAAI;gBACzB;YACD;YACA,KAAK,GAAG,CAAC,UAAS,IAAK,aAAa,EAAE;gBACrC,IAAM,KAAI,EAAG,OAAO,SAAS;gBAC7B,GAAG,CAAC,KAAI,IAAK,WAAU,GAAI,QAAQ,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,EAAC,IAAK,CAAC,EAAE;oBAC/D,YAAY,CAAC,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,iBAAiB,EAAE,kBAAkB,CAAC;gBACnF;gBACA,KAAK,GAAG,CAAC,KAAI,IAAK,SAAQ,GAAI,SAAQ,IAAK,WAAW,EAAE;oBACvD,GAAG,CAAC,iBAAiB,CAAC,UAAS,IAAK,cAAa,GAAI,SAAQ,IAAK,MAAM,EAAE;wBACxE,OAAmB,CAAC,cAAc,CAAC,eAAe,EAAE,QAAQ,EAAE,SAAS,CAAC;oBAC1E;oBACA,KAAK,GAAG,CAAC,SAAQ,IAAK,OAAM,GAAI,UAAS,IAAK,EAAE,EAAE;wBAChD,OAAe,CAAC,eAAe,CAAC,QAAQ,CAAC;oBAC3C;oBACA,KAAK;wBACH,OAAmB,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAS,CAAC;oBACvD;gBACD;gBACA,KAAK;oBACJ,GAAG,CAAE,OAAe,CAAC,QAAQ,EAAC,IAAK,SAAS,EAAE;wBAC5C,OAAe,CAAC,QAAQ,EAAC,EAAG,SAAS;oBACvC;gBACD;gBACA,kBAAiB,EAAG,IAAI;YACzB;QACD;IACD;IACA,OAAO,iBAAiB;AACzB;AAEA,0BAA0B,QAAyB,EAAE,MAAqB,EAAE,KAAa;IACxF,IAAI,CAAC,IAAI,EAAC,EAAG,KAAK,EAAE,EAAC,EAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC7C,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE;YAC9B,OAAO,CAAC;QACT;IACD;IACA,OAAO,CAAC,CAAC;AACV;AAEA,qBAA4B,IAAS;IACpC,OAAO;QACN,GAAG,EAAE,EAAE;QACP,UAAU,EAAE,EAAE;QACd,QAAQ,EAAE,SAAS;QACnB,IAAI,EAAE,KAAG,IAAM;QACf,OAAO,EAAE,SAAS;QAClB,IAAI,EAAE;KACN;AACF;AATA;AAWA,mCAA0C,QAAqC,EAAE,QAAoC;IACpH,GAAG,CAAC,SAAQ,IAAK,SAAS,EAAE;QAC3B,OAAO,UAAU;IAClB;IACA,SAAQ,EAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,SAAS,EAAE,CAAE,QAAQ,CAAE;IAE5D,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,QAAQ,CAAC,MAAM,GAAI;QACtC,IAAM,MAAK,EAAG,QAAQ,CAAC,CAAC,CAAkB;QAC1C,GAAG,CAAC,MAAK,IAAK,UAAS,GAAI,MAAK,IAAK,IAAI,EAAE;YAC1C,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;YACrB,QAAQ;QACT;QACA,KAAK,GAAG,CAAC,OAAO,MAAK,IAAK,QAAQ,EAAE;YACnC,QAAQ,CAAC,CAAC,EAAC,EAAG,WAAW,CAAC,KAAK,CAAC;QACjC;QACA,KAAK;YACJ,GAAG,CAAC,WAAO,CAAC,KAAK,CAAC,EAAE;gBACnB,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,KAAI,IAAK,SAAS,EAAE;oBACvC,KAAK,CAAC,UAAkB,CAAC,KAAI,EAAG,QAAQ;oBACzC,GAAG,CAAC,KAAK,CAAC,SAAQ,GAAI,KAAK,CAAC,QAAQ,CAAC,OAAM,EAAG,CAAC,EAAE;wBAChD,yBAAyB,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC;oBACpD;gBACD;YACD;YACA,KAAK;gBACJ,GAAG,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE;oBAC1B,IAAM,aAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,QAAQ,CAAE;oBACrD,KAAK,CAAC,eAAc,EAAG;wBACtB,IAAI,EAAE,QAAQ;wBACd,YAAY,EAAE,YAAY,CAAC,cAAc,CAAC;qBAC1C;gBACF;gBACA,GAAG,CAAC,KAAK,CAAC,SAAQ,GAAI,KAAK,CAAC,QAAQ,CAAC,OAAM,EAAG,CAAC,EAAE;oBAChD,yBAAyB,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC;gBACpD;YACD;QACD;QACA,CAAC,EAAE;IACJ;IACA,OAAO,QAA2B;AACnC;AAxCA;AA0CA,0BAA0B,gBAAiC,EAAE,QAAyC;IACrG,IAAM,YAAW,EAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC;IAC3C,GAAG,CAAC,WAAW,EAAE;QAChB,OAAO,iBAAgB,IAAK,QAAQ;IACrC;IACA,KAAK;QACJ,OAAO,KAAK,CAAC,OAAO,CAAC,gBAAgB,EAAC,GAAI,gBAAgB,CAAC,CAAC,EAAC,IAAK,QAAQ;IAC3E;AACD;AAEA,mBAAmB,KAAoB,EAAE,WAA+B;IACvE,GAAG,CAAC,WAAO,CAAC,KAAK,EAAC,GAAI,KAAK,CAAC,UAAU,EAAE;QACvC,IAAM,eAAc,EAAG,KAAK,CAAC,UAAU,CAAC,cAAc;QACtD,GAAG,CAAC,cAAc,EAAE;YACnB,GAAG,CAAC,OAAO,eAAc,IAAK,UAAU,EAAE;gBACzC,cAAc,CAAC,KAAK,CAAC,OAAkB,EAAE,KAAK,CAAC,UAAU,CAAC;YAC3D;YACA,KAAK;gBACJ,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,OAAkB,EAAE,KAAK,CAAC,UAAU,EAAE,cAAwB,CAAC;YACxF;QACD;IACD;AACD;AAEA,sBAAsB,MAAuC,EAAE,cAA0C;IACxG,OAAM,EAAG,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,CAAE,MAAM,CAAE;IACpD,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACvC,IAAM,MAAK,EAAG,MAAM,CAAC,CAAC,CAAC;QACvB,GAAG,CAAC,WAAO,CAAC,KAAK,CAAC,EAAE;YACnB,YAAY,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC;YAC5C,IAAM,aAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAE;YAC3D,YAAY,CAAC,QAAQ,EAAE;QACxB;QACA,KAAK;YACJ,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACnB,YAAY,CAAC,KAAK,CAAC,QAA2B,EAAE,cAAc,CAAC;YAChE;QACD;IACD;AACD;AAEA,sBAAsB,KAAoB,EAAE,WAA+B,EAAE,iBAAoC;IAChH,GAAG,CAAC,WAAO,CAAC,KAAK,CAAC,EAAE;QACnB,IAAM,SAAQ,EAAG,KAAK,CAAC,SAAQ,GAAI,UAAU;QAC7C,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzC,IAAM,MAAK,EAAG,QAAQ,CAAC,CAAC,CAAC;YACzB,GAAG,CAAC,WAAO,CAAC,KAAK,CAAC,EAAE;gBACnB,KAAK,CAAC,OAAQ,CAAC,UAAW,CAAC,WAAW,CAAC,KAAK,CAAC,OAAQ,CAAC;YACvD;YACA,KAAK;gBACJ,YAAY,CAAC,KAAK,EAAE,WAAW,EAAE,iBAAiB,CAAC;YACpD;QACD;IACD;IACA,KAAK;QACJ,IAAM,UAAO,EAAG,KAAK,CAAC,OAAO;QAC7B,IAAM,WAAU,EAAG,KAAK,CAAC,UAAU;QACnC,IAAM,cAAa,EAAG,UAAU,CAAC,aAAa;QAC9C,GAAG,CAAC,WAAU,GAAI,aAAa,EAAE;YAC/B,SAAuB,CAAC,KAAK,CAAC,cAAa,EAAG,MAAM;YACrD,IAAM,cAAa,EAAG;gBACrB,UAAO,GAAI,SAAO,CAAC,WAAU,GAAI,SAAO,CAAC,UAAU,CAAC,WAAW,CAAC,SAAO,CAAC;YACzE,CAAC;YACD,GAAG,CAAC,OAAO,cAAa,IAAK,UAAU,EAAE;gBACxC,aAAa,CAAC,SAAkB,EAAE,aAAa,EAAE,UAAU,CAAC;gBAC5D,MAAM;YACP;YACA,KAAK;gBACJ,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,OAAkB,EAAE,UAAU,EAAE,aAAuB,EAAE,aAAa,CAAC;gBAC9F,MAAM;YACP;QACD;QACA,UAAO,GAAI,SAAO,CAAC,WAAU,GAAI,SAAO,CAAC,UAAU,CAAC,WAAW,CAAC,SAAO,CAAC;IACzE;AACD;AAEA,8BAA8B,UAA2B,EAAE,YAAoB,EAAE,UAAmB,EAAE,SAAiB;IACtH,IAAM,UAAS,EAAG,UAAU,CAAC,YAAY,CAAC;IAC1C,GAAG,CAAC,WAAO,CAAC,SAAS,EAAC,GAAI,SAAS,CAAC,IAAG,IAAK,EAAE,EAAE;QAC/C,MAAM,EAAE;IACT;IACA,IAAM,WAAU,EAAG,SAAS,CAAC,UAAU;IACvC,IAAM,IAAG,EAAG,WAAU,GAAI,UAAU,CAAC,GAAG;IAExC,GAAG,CAAC,CAAC,GAAG,EAAE;QACT,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC3C,GAAG,CAAC,EAAC,IAAK,YAAY,EAAE;gBACvB,IAAM,KAAI,EAAG,UAAU,CAAC,CAAC,CAAC;gBAC1B,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE;oBAC1B,GAAG,CAAC,WAAO,CAAC,SAAS,CAAC,EAAE;wBACvB,IAAM,WAAU,EAAI,SAAS,CAAC,iBAAyB,CAAC,IAAI;wBAC5D,IAAI,SAAQ,EAAG,8GAA8G;wBAE7H,GAAG,CAAC,UAAU,EAAE;4BACf,SAAQ,EAAG,sFAAoF,WAAU,gCAA8B;wBACxI;wBACA,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;oBACvB;oBACA,KAAK;wBACJ,GAAG,CAAC,UAAS,IAAK,OAAO,EAAE;4BAC1B,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC,QAAO,EAAG,UAAS,EAAG,SAAS,CAAC,IAAG,EAAG,UAAS;gCACzE,yGAAyG,CAAC;wBAC5G;wBACA,KAAK;4BACJ,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC,QAAO,EAAG,UAAS,EAAG,SAAS,CAAC,IAAG,EAAG,UAAS;gCACzE,yGAAyG,CAAC;wBAC5G;oBACD;gBACD;YACD;QACD;IACD;AACD;AAEA,wBACC,OAAgB,EAChB,WAA4B,EAC5B,WAA4B,EAC5B,cAA0C,EAC1C,iBAAoC;IAEpC,YAAW,EAAG,YAAW,GAAI,UAAU;IACvC,YAAW,EAAG,WAAW;IACzB,IAAM,kBAAiB,EAAG,WAAW,CAAC,MAAM;IAC5C,IAAM,kBAAiB,EAAG,WAAW,CAAC,MAAM;IAC5C,IAAM,YAAW,EAAG,iBAAiB,CAAC,WAAY;IAElD,IAAI,SAAQ,EAAG,CAAC;IAChB,IAAI,SAAQ,EAAG,CAAC;IAChB,IAAI,CAAS;IACb,IAAI,YAAW,EAAG,KAAK;IACvB,OAAO,SAAQ,EAAG,iBAAiB,EAAE;QACpC,IAAM,SAAQ,EAAG,CAAC,SAAQ,EAAG,iBAAiB,EAAE,EAAE,WAAW,CAAC,QAAQ,EAAE,EAAE,SAAS;QACnF,IAAM,SAAQ,EAAG,WAAW,CAAC,QAAQ,CAAC;QAEtC,GAAG,CAAC,SAAQ,IAAK,UAAS,GAAI,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE;YACvD,YAAW,EAAG,SAAS,CAAC,QAAQ,EAAE,QAAQ,EAAE,iBAAiB,EAAE,OAAO,EAAE,cAAc,EAAC,GAAI,WAAW;YACtG,QAAQ,EAAE;QACX;QACA,KAAK;YACJ,IAAM,aAAY,EAAG,gBAAgB,CAAC,WAAW,EAAE,QAAQ,EAAE,SAAQ,EAAG,CAAC,CAAC;YAC1E,GAAG,CAAC,aAAY,GAAI,CAAC,EAAE;;oBAErB,IAAM,WAAQ,EAAG,WAAW,CAAC,CAAC,CAAC;oBAC/B,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,CAAC;wBAC3C,YAAY,CAAC,UAAQ,EAAE,cAAc,CAAC;oBACvC,CAAC,CAAC;oBACF,YAAY,CAAC,UAAQ,EAAE,WAAW,EAAE,iBAAiB,CAAC;oBACtD,oBAAoB,CAAC,WAAW,EAAE,CAAC,EAAE,OAAO,EAAE,SAAS,CAAC;gBACzD,CAAC;gBAPD,IAAI,CAAC,EAAC,EAAG,QAAQ,EAAE,EAAC,EAAG,YAAY,EAAE,CAAC,EAAE;;;gBAQxC,YAAW,EAAG,SAAS,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,QAAQ,EAAE,iBAAiB,EAAE,OAAO,EAAE,cAAc,EAAC,GAAI,WAAW;gBACvH,SAAQ,EAAG,aAAY,EAAG,CAAC;YAC5B;YACA,KAAK;gBACJ,IAAI,aAAY,EAAqB,SAAS;gBAC9C,IAAI,MAAK,EAAkB,WAAW,CAAC,QAAQ,CAAC;gBAChD,GAAG,CAAC,KAAK,EAAE;oBACV,IAAI,UAAS,EAAG,SAAQ,EAAG,CAAC;oBAC5B,OAAO,aAAY,IAAK,SAAS,EAAE;wBAClC,GAAG,CAAC,WAAO,CAAC,KAAK,CAAC,EAAE;4BACnB,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE;gCACnB,MAAK,EAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;4BAC1B;4BACA,KAAK,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE;gCAChC,MAAK,EAAG,WAAW,CAAC,SAAS,CAAC;gCAC9B,SAAS,EAAE;4BACZ;4BACA,KAAK;gCACJ,KAAK;4BACN;wBACD;wBACA,KAAK;4BACJ,aAAY,EAAG,KAAK,CAAC,OAAO;wBAC7B;oBACD;gBACD;gBAEA,SAAS,CAAC,QAAQ,EAAE,OAAO,EAAE,YAAY,EAAE,iBAAiB,EAAE,cAAc,CAAC;gBAC7E,SAAS,CAAC,QAAQ,EAAE,WAAW,CAAC;gBAChC,oBAAoB,CAAC,WAAW,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC;YAC9D;QACD;QACA,QAAQ,EAAE;IACX;IACA,GAAG,CAAC,kBAAiB,EAAG,QAAQ,EAAE;;YAGhC,IAAM,SAAQ,EAAG,WAAW,CAAC,CAAC,CAAC;YAC/B,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,CAAC;gBAC3C,YAAY,CAAC,QAAQ,EAAE,cAAc,CAAC;YACvC,CAAC,CAAC;YACF,YAAY,CAAC,QAAQ,EAAE,WAAW,EAAE,iBAAiB,CAAC;YACtD,oBAAoB,CAAC,WAAW,EAAE,CAAC,EAAE,OAAO,EAAE,SAAS,CAAC;QACzD,CAAC;QARD;QACA,IAAI,CAAC,EAAC,EAAG,QAAQ,EAAE,EAAC,EAAG,iBAAiB,EAAE,CAAC,EAAE;;;IAQ9C;IACA,OAAO,WAAW;AACnB;AAEA,qBACC,OAAa,EACb,QAAqC,EACrC,iBAAoC,EACpC,cAA0C,EAC1C,YAA0C,EAC1C,UAAmB;IADnB,uDAA0C;IAG1C,GAAG,CAAC,SAAQ,IAAK,SAAS,EAAE;QAC3B,MAAM;IACP;IAEA,GAAG,CAAC,iBAAiB,CAAC,MAAK,GAAI,WAAU,IAAK,SAAS,EAAE;QACxD,WAAU,EAAG,YAAS,CAAC,OAAO,CAAC,UAAU,CAAC;IAC3C;IAEA,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACzC,IAAM,MAAK,EAAG,QAAQ,CAAC,CAAC,CAAC;QAEzB,GAAG,CAAC,WAAO,CAAC,KAAK,CAAC,EAAE;YACnB,GAAG,CAAC,iBAAiB,CAAC,MAAK,GAAI,UAAU,EAAE;gBAC1C,IAAI,WAAU,EAA4B,SAAS;gBACnD,OAAO,KAAK,CAAC,QAAO,IAAK,UAAS,GAAI,UAAU,CAAC,OAAM,EAAG,CAAC,EAAE;oBAC5D,WAAU,EAAG,UAAU,CAAC,KAAK,EAAiB;oBAC9C,GAAG,CAAC,WAAU,GAAI,UAAU,CAAC,QAAO,IAAK,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,GAAE,GAAI,SAAS,CAAC,EAAE;wBAChF,KAAK,CAAC,QAAO,EAAG,UAAU;oBAC3B;gBACD;YACD;YACA,SAAS,CAAC,KAAK,EAAE,OAAO,EAAE,YAAY,EAAE,iBAAiB,EAAE,cAAc,CAAC;QAC3E;QACA,KAAK;YACJ,SAAS,CAAC,KAAK,EAAE,OAAO,EAAE,YAAY,EAAE,iBAAiB,EAAE,cAAc,EAAE,UAAU,CAAC;QACvF;IACD;AACD;AAEA,mCACC,OAAa,EACb,KAAoB,EACpB,cAA0C,EAC1C,iBAAoC;IAEpC,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC,QAAQ,EAAE,iBAAiB,EAAE,cAAc,EAAE,SAAS,CAAC;IAClF,GAAG,CAAC,OAAO,KAAK,CAAC,2BAA0B,IAAK,UAAU,EAAE;QAC3D,qBAAqB,CAAC,KAAK,EAAE,iBAAiB,CAAC;IAChD;IACA,aAAa,CAAC,OAAO,EAAE,KAAK,CAAC,UAAU,EAAE,iBAAiB,CAAC;IAC3D,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,IAAG,IAAK,KAAI,GAAI,KAAK,CAAC,UAAU,CAAC,IAAG,IAAK,SAAS,EAAE;QACxE,IAAM,eAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,cAAc,CAAE;QAC3D,cAAY,CAAC,WAAW,CAAC,GAAG,CAAC,OAAsB,EAAE,KAAG,KAAK,CAAC,UAAU,CAAC,GAAK,CAAC;QAC/E,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC3C,cAAY,CAAC,gBAAgB,CAAC,OAAsB,EAAE,KAAK,CAAC,UAAU,CAAC,GAAU,CAAC;QACnF,CAAC,CAAC;IACH;IACA,KAAK,CAAC,SAAQ,EAAG,IAAI;AACtB;AAEA,mBACC,KAAoB,EACpB,UAAgB,EAChB,YAA8B,EAC9B,iBAAoC,EACpC,cAA0C,EAC1C,UAAmB;IAEnB,IAAI,OAAyB;IAC7B,GAAG,CAAC,WAAO,CAAC,KAAK,CAAC,EAAE;QACb,+CAAiB;QACvB,IAAM,mBAAkB,EAAG,yBAAiB,CAAC,GAAG,CAAC,cAAc,CAAE;QACjE,GAAG,CAAC,CAAC,kCAAuB,CAA6B,iBAAiB,CAAC,EAAE;YAC5E,IAAM,KAAI,EAAG,kBAAkB,CAAC,QAAQ,EAAE,CAAC,GAAG,CAA6B,iBAAiB,CAAC;YAC7F,GAAG,CAAC,KAAI,IAAK,IAAI,EAAE;gBAClB,MAAM;YACP;YACA,kBAAiB,EAAG,IAAI;QACzB;QACA,IAAM,SAAQ,EAAG,IAAI,iBAAiB,EAAE;QACxC,KAAK,CAAC,SAAQ,EAAG,QAAQ;QACzB,IAAM,eAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,QAAQ,CAAE;QACrD,cAAY,CAAC,iBAAgB,EAAG,kBAAkB,CAAC,UAAU;QAC7D,QAAQ,CAAC,qBAAqB,CAAC,KAAK,CAAC,cAAc,CAAC;QACpD,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC;QACxC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,CAAC;QAC5C,IAAM,SAAQ,EAAG,QAAQ,CAAC,UAAU,EAAE;QACtC,GAAG,CAAC,QAAQ,EAAE;YACb,IAAM,iBAAgB,EAAG,yBAAyB,CAAC,QAAQ,EAAE,QAAQ,CAAC;YACtE,KAAK,CAAC,SAAQ,EAAG,gBAAgB;YACjC,WAAW,CAAC,UAAU,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,QAAQ,EAAE,YAAY,EAAE,UAAU,CAAC;QACjG;QACA,cAAY,CAAC,WAAW,CAAC,OAAO,EAAE;QAClC,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC3C,cAAY,CAAC,QAAQ,EAAE;QACxB,CAAC,CAAC;IACH;IACA,KAAK;QACJ,GAAG,CAAC,iBAAiB,CAAC,MAAK,GAAI,iBAAiB,CAAC,aAAY,IAAK,SAAS,EAAE;YAC5E,QAAO,EAAG,KAAK,CAAC,QAAO,EAAG,iBAAiB,CAAC,YAAY;YACxD,iBAAiB,CAAC,aAAY,EAAG,SAAS;YAC1C,yBAAyB,CAAC,OAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,iBAAiB,CAAC;YAC7E,MAAM;QACP;QACA,IAAM,IAAG,EAAG,UAAU,CAAC,aAAa;QACpC,GAAG,CAAC,KAAK,CAAC,IAAG,IAAK,EAAE,EAAE;YACrB,GAAG,CAAC,KAAK,CAAC,QAAO,IAAK,SAAS,EAAE;gBAChC,IAAM,WAAU,EAAG,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,cAAc,CAAC,KAAK,CAAC,IAAK,CAAC;gBAC1E,KAAK,CAAC,OAAO,CAAC,UAAW,CAAC,YAAY,CAAC,UAAU,EAAE,KAAK,CAAC,OAAO,CAAC;gBACjE,KAAK,CAAC,QAAO,EAAG,UAAU;YAC3B;YACA,KAAK;gBACJ,QAAO,EAAG,KAAK,CAAC,QAAO,EAAG,GAAG,CAAC,cAAc,CAAC,KAAK,CAAC,IAAK,CAAC;gBACzD,GAAG,CAAC,aAAY,IAAK,SAAS,EAAE;oBAC/B,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,YAAY,CAAC;gBAC/C;gBACA,KAAK;oBACJ,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC;gBAChC;YACD;QACD;QACA,KAAK;YACJ,GAAG,CAAC,KAAK,CAAC,QAAO,IAAK,SAAS,EAAE;gBAChC,GAAG,CAAC,KAAK,CAAC,IAAG,IAAK,KAAK,EAAE;oBACxB,kBAAiB,uBAAQ,iBAAiB,EAAK,EAAE,SAAS,EAAE,cAAa,CAAE,CAAE;gBAC9E;gBACA,GAAG,CAAC,iBAAiB,CAAC,UAAS,IAAK,SAAS,EAAE;oBAC9C,QAAO,EAAG,KAAK,CAAC,QAAO,EAAG,GAAG,CAAC,eAAe,CAAC,iBAAiB,CAAC,SAAS,EAAE,KAAK,CAAC,GAAG,CAAC;gBACtF;gBACA,KAAK;oBACJ,QAAO,EAAG,KAAK,CAAC,QAAO,EAAG,CAAC,KAAK,CAAC,QAAO,GAAI,GAAG,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC1E;YACD;YACA,KAAK;gBACJ,QAAO,EAAG,KAAK,CAAC,OAAO;YACxB;YACA,GAAG,CAAC,aAAY,IAAK,SAAS,EAAE;gBAC/B,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,YAAY,CAAC;YAC/C;YACA,KAAK,GAAG,CAAC,OAAQ,CAAC,WAAU,IAAK,UAAU,EAAE;gBAC5C,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC;YAChC;YACA,yBAAyB,CAAC,OAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,iBAAiB,CAAC;QAC9E;IACD;AACD;AAEA,mBAAmB,QAAa,EAAE,KAAoB,EAAE,iBAAoC,EAAE,UAAmB,EAAE,cAA0C;IAC5J,GAAG,CAAC,WAAO,CAAC,KAAK,CAAC,EAAE;QACX,gCAAQ,EAAE,oCAA0B;QAC5C,GAAG,CAAC,SAAQ,GAAI,gBAAgB,EAAE;YACjC,IAAM,aAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,QAAQ,CAAE;YACrD,QAAQ,CAAC,qBAAqB,CAAC,KAAK,CAAC,cAAc,CAAC;YACpD,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC;YACxC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,CAAC;YAC5C,KAAK,CAAC,SAAQ,EAAG,QAAQ;YACzB,IAAM,SAAQ,EAAG,QAAQ,CAAC,UAAU,EAAE;YACtC,KAAK,CAAC,SAAQ,EAAG,yBAAyB,CAAC,QAAQ,EAAE,QAAQ,CAAC;YAC9D,GAAG,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,QAAQ,CAAC,EAAE;gBACjD,cAAc,CAAC,UAAU,EAAE,gBAAgB,EAAE,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,iBAAiB,CAAC;gBACzF,YAAY,CAAC,WAAW,CAAC,OAAO,EAAE;YACnC;QACD;QACA,KAAK;YACJ,SAAS,CAAC,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,iBAAiB,EAAE,cAAc,CAAC;QAC3E;IACD;IACA,KAAK;QACJ,GAAG,CAAC,SAAQ,IAAK,KAAK,EAAE;YACvB,OAAO,KAAK;QACb;QACA,IAAM,UAAO,EAAG,QAAQ,CAAC,OAAQ;QACjC,IAAI,YAAW,EAAG,KAAK;QACvB,IAAI,QAAO,EAAG,KAAK;QACnB,KAAK,CAAC,SAAQ,EAAG,QAAQ,CAAC,QAAQ;QAClC,GAAG,CAAC,KAAK,CAAC,IAAG,IAAK,EAAE,EAAE;YACrB,GAAG,CAAC,KAAK,CAAC,KAAI,IAAK,QAAQ,CAAC,IAAI,EAAE;gBACjC,IAAM,WAAU,EAAG,SAAO,CAAC,aAAa,CAAC,cAAc,CAAC,KAAK,CAAC,IAAK,CAAC;gBACpE,SAAO,CAAC,UAAW,CAAC,YAAY,CAAC,UAAU,EAAE,SAAO,CAAC;gBACrD,KAAK,CAAC,QAAO,EAAG,UAAU;gBAC1B,YAAW,EAAG,IAAI;gBAClB,OAAO,WAAW;YACnB;QACD;QACA,KAAK;YACJ,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,EAAC,IAAK,CAAC,EAAE;gBAC1C,kBAAiB,uBAAQ,iBAAiB,EAAK,EAAE,SAAS,EAAE,cAAa,CAAE,CAAE;YAC9E;YACA,GAAG,CAAC,QAAQ,CAAC,SAAQ,IAAK,KAAK,CAAC,QAAQ,EAAE;gBACzC,IAAM,SAAQ,EAAG,yBAAyB,CAAC,KAAK,CAAC,QAAQ,EAAE,cAAc,CAAC;gBAC1E,KAAK,CAAC,SAAQ,EAAG,QAAQ;gBACzB,QAAO,EAAG,cAAc,CAAC,SAAO,EAAE,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,cAAc,EAAE,iBAAiB,EAAC,GAAI,OAAO;YAC7G;YAEA,GAAG,CAAC,OAAO,KAAK,CAAC,2BAA0B,IAAK,UAAU,EAAE;gBAC3D,qBAAqB,CAAC,KAAK,EAAE,iBAAiB,CAAC;YAChD;YAEA,QAAO,EAAG,gBAAgB,CAAC,SAAO,EAAE,QAAQ,CAAC,UAAU,EAAE,KAAK,CAAC,UAAU,EAAE,iBAAiB,EAAC,GAAI,OAAO;YAExG,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,IAAG,IAAK,KAAI,GAAI,KAAK,CAAC,UAAU,CAAC,IAAG,IAAK,SAAS,EAAE;gBACxE,IAAM,eAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,cAAc,CAAE;gBAC3D,cAAY,CAAC,WAAW,CAAC,GAAG,CAAC,SAAO,EAAE,KAAG,KAAK,CAAC,UAAU,CAAC,GAAK,CAAC;gBAChE,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,CAAC;oBAC3C,cAAY,CAAC,gBAAgB,CAAC,SAAsB,EAAE,KAAK,CAAC,UAAU,CAAC,GAAU,CAAC;gBACnF,CAAC,CAAC;YACH;QACD;QACA,GAAG,CAAC,QAAO,GAAI,KAAK,CAAC,WAAU,GAAI,KAAK,CAAC,UAAU,CAAC,eAAe,EAAE;YACpE,KAAK,CAAC,UAAU,CAAC,eAAe,CAAC,SAAkB,EAAE,KAAK,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC;QAC5F;QACA,KAAK,CAAC,QAAO,EAAG,QAAQ,CAAC,OAAO;QAChC,OAAO,WAAW;IACnB;AACD;AAEA,+BAA+B,KAAoB,EAAE,iBAAoC;IACxF;IACA,KAAK,CAAC,4BAA2B,EAAG,KAAK,CAAC,UAAU;IACpD,IAAM,WAAU,EAAG,KAAK,CAAC,0BAA2B,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC;IACtE,KAAK,CAAC,WAAU,uBAAQ,UAAU,EAAK,KAAK,CAAC,2BAA2B,CAAE;IAC1E,iBAAiB,CAAC,uBAAuB,CAAC,IAAI,CAAC;QAC9C,IAAM,WAAU,uBACZ,KAAK,CAAC,0BAA2B,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,EACnD,KAAK,CAAC,2BAA2B,CACpC;QACD,gBAAgB,CAAC,KAAK,CAAC,OAAQ,EAAE,KAAK,CAAC,UAAU,EAAE,UAAU,EAAE,iBAAiB,CAAC;QACjF,KAAK,CAAC,WAAU,EAAG,UAAU;IAC9B,CAAC,CAAC;AACH;AAEA,oCAAoC,iBAAoC;IACvE,GAAG,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,MAAM,EAAE;QACrD,GAAG,CAAC,iBAAiB,CAAC,IAAI,EAAE;YAC3B,OAAO,iBAAiB,CAAC,uBAAuB,CAAC,MAAM,EAAE;gBACxD,IAAM,SAAQ,EAAG,iBAAiB,CAAC,uBAAuB,CAAC,KAAK,EAAE;gBAClE,SAAQ,GAAI,QAAQ,EAAE;YACvB;QACD;QACA,KAAK;YACJ,gBAAM,CAAC,qBAAqB,CAAC;gBAC5B,OAAO,iBAAiB,CAAC,uBAAuB,CAAC,MAAM,EAAE;oBACxD,IAAM,SAAQ,EAAG,iBAAiB,CAAC,uBAAuB,CAAC,KAAK,EAAE;oBAClE,SAAQ,GAAI,QAAQ,EAAE;gBACvB;YACD,CAAC,CAAC;QACH;IACD;AACD;AAEA,iCAAiC,iBAAoC;IACpE,GAAG,CAAC,iBAAiB,CAAC,IAAI,EAAE;QAC3B,OAAO,iBAAiB,CAAC,oBAAoB,CAAC,MAAM,EAAE;YACrD,IAAM,SAAQ,EAAG,iBAAiB,CAAC,oBAAoB,CAAC,KAAK,EAAE;YAC/D,SAAQ,GAAI,QAAQ,EAAE;QACvB;IACD;IACA,KAAK;QACJ,GAAG,CAAC,gBAAM,CAAC,mBAAmB,EAAE;YAC/B,gBAAM,CAAC,mBAAmB,CAAC;gBAC1B,OAAO,iBAAiB,CAAC,oBAAoB,CAAC,MAAM,EAAE;oBACrD,IAAM,SAAQ,EAAG,iBAAiB,CAAC,oBAAoB,CAAC,KAAK,EAAE;oBAC/D,SAAQ,GAAI,QAAQ,EAAE;gBACvB;YACD,CAAC,CAAC;QACH;QACA,KAAK;YACJ,UAAU,CAAC;gBACV,OAAO,iBAAiB,CAAC,oBAAoB,CAAC,MAAM,EAAE;oBACrD,IAAM,SAAQ,EAAG,iBAAiB,CAAC,oBAAoB,CAAC,KAAK,EAAE;oBAC/D,SAAQ,GAAI,QAAQ,EAAE;gBACvB;YACD,CAAC,CAAC;QACH;IACD;AACD;AAEA,0BAA0B,KAAsC,EAAE,cAA0C,EAAE,iBAAoC;IACjJ,IAAI,gBAAe,EAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,CAAE;IAC9D,iBAAiB,CAAC,MAAK,EAAG,KAAK;IAC/B,OAAO;QACN,MAAM,EAAE,UAAS,YAA0B;YAC1C,IAAI,QAAO,EAAG,iBAAiB,CAAC,QAAQ;YAExC,aAAY,EAAG,yBAAyB,CAAC,YAAY,EAAE,cAAc,CAAC;YACtE,cAAc,CAAC,OAAO,EAAE,eAAe,EAAE,YAA+B,EAAE,cAAc,EAAE,iBAAiB,CAAC;YAC5G,IAAM,aAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,cAAc,CAAE;YAC3D,YAAY,CAAC,WAAW,CAAC,OAAO,EAAE;YAClC,0BAA0B,CAAC,iBAAiB,CAAC;YAC7C,uBAAuB,CAAC,iBAAiB,CAAC;YAC1C,gBAAe,EAAG,YAA+B;QAClD,CAAC;QACD,OAAO,EAAE,iBAAiB,CAAC;KAC3B;AACF;AAEa,YAAG,EAAG;IAClB,MAAM,EAAE,UAAS,KAAmB,EAAE,QAAoC,EAAE,iBAA8C;QACzH,IAAM,sBAAqB,EAAG,oBAAoB,CAAC,iBAAiB,CAAC;QACrE,IAAM,SAAQ,EAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QAC9C,qBAAqB,CAAC,SAAQ,EAAG,QAAQ;QACzC,IAAM,cAAa,EAAG,yBAAyB,CAAC,KAAK,EAAE,QAAQ,CAAC;QAChE,WAAW,CAAC,QAAQ,EAAE,aAAa,EAAE,qBAAqB,EAAE,QAAQ,EAAE,SAAS,CAAC;QAChF,IAAM,aAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,QAAQ,CAAE;QACrD,YAAY,CAAC,WAAW,CAAC,OAAO,EAAE;QAClC,qBAAqB,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC/C,YAAY,CAAC,QAAQ,EAAE;QACxB,CAAC,CAAC;QACF,0BAA0B,CAAC,qBAAqB,CAAC;QACjD,uBAAuB,CAAC,qBAAqB,CAAC;QAC9C,OAAO,gBAAgB,CAAC,aAAa,EAAE,QAAQ,EAAE,qBAAqB,CAAC;IACxE,CAAC;IACD,MAAM,EAAE,UAAS,UAAmB,EAAE,KAAmB,EAAE,QAAoC,EAAE,iBAA8C;QAC9I,IAAM,sBAAqB,EAAG,oBAAoB,CAAC,iBAAiB,CAAC;QACrE,qBAAqB,CAAC,SAAQ,EAAG,UAAU;QAC3C,IAAM,cAAa,EAAG,yBAAyB,CAAC,KAAK,EAAE,QAAQ,CAAC;QAChE,WAAW,CAAC,UAAU,EAAE,aAAa,EAAE,qBAAqB,EAAE,QAAQ,EAAE,SAAS,CAAC;QAClF,IAAM,aAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,QAAQ,CAAE;QACrD,YAAY,CAAC,WAAW,CAAC,OAAO,EAAE;QAClC,qBAAqB,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC/C,YAAY,CAAC,QAAQ,EAAE;QACxB,CAAC,CAAC;QACF,0BAA0B,CAAC,qBAAqB,CAAC;QACjD,uBAAuB,CAAC,qBAAqB,CAAC;QAC9C,OAAO,gBAAgB,CAAC,aAAa,EAAE,QAAQ,EAAE,qBAAqB,CAAC;IACxE,CAAC;IACD,KAAK,EAAE,UAAS,OAAgB,EAAE,KAAmB,EAAE,QAAoC,EAAE,iBAA8C;QAC1I,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACzB,MAAM,IAAI,KAAK,CAAC,yFAAyF,CAAC;QAC3G;QACA,IAAM,sBAAqB,EAAG,oBAAoB,CAAC,iBAAiB,CAAC;QACrE,qBAAqB,CAAC,MAAK,EAAG,IAAI;QAClC,qBAAqB,CAAC,aAAY,EAAG,OAAO;QAC5C,qBAAqB,CAAC,SAAQ,EAAG,OAAO,CAAC,UAAqB;QAC9D,IAAM,cAAa,EAAG,yBAAyB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAkB;QAEpF,SAAS,CAAC,aAAa,EAAE,qBAAqB,CAAC,QAAQ,EAAE,SAAS,EAAE,qBAAqB,EAAE,QAAQ,CAAC;QACpG,IAAM,aAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,QAAQ,CAAE;QACrD,YAAY,CAAC,WAAW,CAAC,OAAO,EAAE;QAClC,qBAAqB,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC/C,YAAY,CAAC,QAAQ,EAAE;QACxB,CAAC,CAAC;QACF,0BAA0B,CAAC,qBAAqB,CAAC;QACjD,uBAAuB,CAAC,qBAAqB,CAAC;QAC9C,OAAO,gBAAgB,CAAC,aAAa,EAAE,QAAQ,EAAE,qBAAqB,CAAC;IACxE,CAAC;IACD,OAAO,EAAE,UAAS,OAAgB,EAAE,KAAmB,EAAE,QAAoC,EAAE,iBAA8C;QAC5I,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACzB,MAAM,IAAI,KAAK,CAAC,uGAAuG,CAAC;QACzH;QACA,IAAM,sBAAqB,EAAG,oBAAoB,CAAC,iBAAiB,CAAC;QACrE,IAAM,cAAa,EAAG,yBAAyB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAkB;QACpF,qBAAqB,CAAC,SAAQ,EAAG,OAAO,CAAC,UAAsB;QAC/D,SAAS,CAAC,aAAa,EAAE,OAAO,CAAC,UAAW,EAAE,OAAO,EAAE,qBAAqB,EAAE,QAAQ,CAAC;QACvF,IAAM,aAAY,EAAG,yBAAiB,CAAC,GAAG,CAAC,QAAQ,CAAE;QACrD,YAAY,CAAC,WAAW,CAAC,OAAO,EAAE;QAClC,qBAAqB,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC/C,YAAY,CAAC,QAAQ,EAAE;QACxB,CAAC,CAAC;QACF,0BAA0B,CAAC,qBAAqB,CAAC;QACjD,uBAAuB,CAAC,qBAAqB,CAAC;QAC9C,OAAO,CAAC,UAAW,CAAC,WAAW,CAAC,OAAO,CAAC;QACxC,OAAO,gBAAgB,CAAC,aAAa,EAAE,QAAQ,EAAE,qBAAqB,CAAC;IACxE;CACA;;;;;;;;;;;AC/+BD;AACA;AACA;AACA;AACA;AAqHA,GAAG,CAAC,aAAG,CAAC,WAAW,EAAC,GAAI,aAAG,CAAC,gBAAgB,CAAC,EAAE;IAC9C,aAAI,EAAG,gBAAM,CAAC,KAAK,CAAC,IAAI;IACxB,WAAE,EAAG,gBAAM,CAAC,KAAK,CAAC,EAAE;IACpB,mBAAU,EAAG,iBAAU,CAAC,gBAAM,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC;IAC1D,aAAI,EAAG,iBAAU,CAAC,gBAAM,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC;IAC9C,aAAI,EAAG,iBAAU,CAAC,gBAAM,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC;IAC9C,kBAAS,EAAG,iBAAU,CAAC,gBAAM,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC;AACzD;AACA,KAAK;IACJ;IACA;IAEA;;;;;;IAMA,IAAM,WAAQ,EAAG,kBAAkB,MAAc;QAChD,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;YAClB,OAAO,CAAC;QACT;QAEA,OAAM,EAAG,MAAM,CAAC,MAAM,CAAC;QACvB,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;YACrB,OAAM,EAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAC5B;QACA;QACA,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,yBAAgB,CAAC;IACvD,CAAC;IAED;;;;;;IAMA,IAAM,YAAS,EAAG,mBAAmB,KAAU;QAC9C,MAAK,EAAG,MAAM,CAAC,KAAK,CAAC;QACrB,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;YACjB,OAAO,CAAC;QACT;QACA,GAAG,CAAC,MAAK,IAAK,EAAC,GAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YACpC,OAAO,KAAK;QACb;QAEA,OAAO,CAAC,MAAK,EAAG,EAAC,EAAG,EAAC,EAAG,CAAC,CAAC,EAAC,EAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IAC1D,CAAC;IAED;;;;;;;IAOA,IAAM,kBAAe,EAAG,yBAAyB,KAAa,EAAE,MAAc;QAC7E,OAAO,MAAK,EAAG,EAAC,EAAG,IAAI,CAAC,GAAG,CAAC,OAAM,EAAG,KAAK,EAAE,CAAC,EAAC,EAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC;IACzE,CAAC;IAED,aAAI,EAAG,cAAsC,SAAyC,EAAE,WAAmC,EAAE,OAAa;QACzI,GAAG,CAAC,UAAS,GAAI,IAAI,EAAE;YACtB,MAAM,IAAI,SAAS,CAAC,qCAAqC,CAAC;QAC3D;QAEA,GAAG,CAAC,YAAW,GAAI,OAAO,EAAE;YAC3B,YAAW,EAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC;QACxC;QAEA;QACA,IAAM,YAAW,EAAG,IAAI;QACxB,IAAM,OAAM,EAAW,UAAQ,CAAQ,SAAU,CAAC,MAAM,CAAC;QAEzD;QACA,IAAM,MAAK,EAAU,CAAC,OAAO,YAAW,IAAK,UAAU,EAAC,EAAW,MAAM,CAAC,IAAI,WAAW,CAAC,MAAM,CAAC,EAAC,EAAG,IAAI,KAAK,CAAC,MAAM,CAAC;QAEtH,GAAG,CAAC,CAAC,sBAAW,CAAC,SAAS,EAAC,GAAI,CAAC,qBAAU,CAAC,SAAS,CAAC,EAAE;YACtD,OAAO,KAAK;QACb;QAEA;QACA;QACA,GAAG,CAAC,sBAAW,CAAC,SAAS,EAAC,GAAI,OAAM,IAAK,CAAC,EAAE;YAC3C,OAAO,EAAE;QACV;QAEA,IAAI,EAAC,EAAG,CAAC;;YACT,IAAI,CAAgB,4CAAS;gBAAxB,IAAM,MAAK;gBACf,KAAK,CAAC,CAAC,EAAC,EAAG,YAAW,EAAG,WAAW,CAAC,KAAK,EAAE,CAAC,EAAC,EAAG,KAAK;gBACtD,CAAC,EAAE;;;;;;;;;;QAGJ,GAAG,CAAQ,SAAU,CAAC,OAAM,IAAK,SAAS,EAAE;YAC3C,KAAK,CAAC,OAAM,EAAG,MAAM;QACtB;QAEA,OAAO,KAAK;;IACb,CAAC;IAED,WAAE,EAAG;QAAe;aAAA,UAAa,EAAb,qBAAa,EAAb,IAAa;YAAb;;QACnB,OAAO,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;IACzC,CAAC;IAED,mBAAU,EAAG,oBAAuB,MAAoB,EAAE,MAAc,EAAE,KAAa,EAAE,GAAY;QACpG,GAAG,CAAC,OAAM,GAAI,IAAI,EAAE;YACnB,MAAM,IAAI,SAAS,CAAC,iDAAiD,CAAC;QACvE;QAEA,IAAM,OAAM,EAAG,UAAQ,CAAC,MAAM,CAAC,MAAM,CAAC;QACtC,OAAM,EAAG,iBAAe,CAAC,WAAS,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC;QACnD,MAAK,EAAG,iBAAe,CAAC,WAAS,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC;QACjD,IAAG,EAAG,iBAAe,CAAC,IAAG,IAAK,UAAS,EAAG,OAAM,EAAG,WAAS,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC;QAC1E,IAAI,MAAK,EAAG,IAAI,CAAC,GAAG,CAAC,IAAG,EAAG,KAAK,EAAE,OAAM,EAAG,MAAM,CAAC;QAElD,IAAI,UAAS,EAAG,CAAC;QACjB,GAAG,CAAC,OAAM,EAAG,MAAK,GAAI,OAAM,EAAG,CAAC,MAAK,EAAG,KAAK,CAAC,EAAE;YAC/C,UAAS,EAAG,CAAC,CAAC;YACd,MAAK,GAAI,MAAK,EAAG,CAAC;YAClB,OAAM,GAAI,MAAK,EAAG,CAAC;QACpB;QAEA,OAAO,MAAK,EAAG,CAAC,EAAE;YACjB,GAAG,CAAC,MAAK,GAAI,MAAM,EAAE;gBACnB,MAA+B,CAAC,MAAM,EAAC,EAAG,MAAM,CAAC,KAAK,CAAC;YACzD;YACA,KAAK;gBACJ,OAAQ,MAA+B,CAAC,MAAM,CAAC;YAChD;YAEA,OAAM,GAAI,SAAS;YACnB,MAAK,GAAI,SAAS;YAClB,KAAK,EAAE;QACR;QAEA,OAAO,MAAM;IACd,CAAC;IAED,aAAI,EAAG,cAAiB,MAAoB,EAAE,KAAU,EAAE,KAAc,EAAE,GAAY;QACrF,IAAM,OAAM,EAAG,UAAQ,CAAC,MAAM,CAAC,MAAM,CAAC;QACtC,IAAI,EAAC,EAAG,iBAAe,CAAC,WAAS,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC;QACjD,IAAG,EAAG,iBAAe,CAAC,IAAG,IAAK,UAAS,EAAG,OAAM,EAAG,WAAS,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC;QAE1E,OAAO,EAAC,EAAG,GAAG,EAAE;YACd,MAA+B,CAAC,CAAC,EAAE,EAAC,EAAG,KAAK;QAC9C;QAEA,OAAO,MAAM;IACd,CAAC;IAED,aAAI,EAAG,cAAiB,MAAoB,EAAE,QAAyB,EAAE,OAAY;QACpF,IAAM,MAAK,EAAG,iBAAS,CAAI,MAAM,EAAE,QAAQ,EAAE,OAAO,CAAC;QACrD,OAAO,MAAK,IAAK,CAAC,EAAC,EAAG,MAAM,CAAC,KAAK,EAAC,EAAG,SAAS;IAChD,CAAC;IAED,kBAAS,EAAG,mBAAsB,MAAoB,EAAE,QAAyB,EAAE,OAAY;QAC9F,IAAM,OAAM,EAAG,UAAQ,CAAC,MAAM,CAAC,MAAM,CAAC;QAEtC,GAAG,CAAC,CAAC,QAAQ,EAAE;YACd,MAAM,IAAI,SAAS,CAAC,0CAA0C,CAAC;QAChE;QAEA,GAAG,CAAC,OAAO,EAAE;YACZ,SAAQ,EAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC;QAClC;QAEA,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,EAAC,EAAG,MAAM,EAAE,CAAC,EAAE,EAAE;YAChC,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,EAAE;gBACnC,OAAO,CAAC;YACT;QACD;QAEA,OAAO,CAAC,CAAC;IACV,CAAC;AACF;AAEA,GAAG,CAAC,aAAG,CAAC,WAAW,CAAC,EAAE;IACrB,iBAAQ,EAAG,iBAAU,CAAC,gBAAM,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC;AACvD;AACA,KAAK;IACJ;;;;;;IAMA,IAAM,WAAQ,EAAG,kBAAkB,MAAc;QAChD,OAAM,EAAG,MAAM,CAAC,MAAM,CAAC;QACvB,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;YAClB,OAAO,CAAC;QACT;QACA,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;YACrB,OAAM,EAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAC5B;QACA;QACA,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,yBAAgB,CAAC;IACvD,CAAC;IAED,iBAAQ,EAAG,kBAAqB,MAAoB,EAAE,aAAgB,EAAE,SAAqB;QAArB,yCAAqB;QAC5F,IAAI,IAAG,EAAG,UAAQ,CAAC,MAAM,CAAC,MAAM,CAAC;QAEjC,IAAI,CAAC,IAAI,EAAC,EAAG,SAAS,EAAE,EAAC,EAAG,GAAG,EAAE,EAAE,CAAC,EAAE;YACrC,IAAM,eAAc,EAAG,MAAM,CAAC,CAAC,CAAC;YAChC,GAAG,CAAC,cAAa,IAAK,eAAc;gBACnC,CAAC,cAAa,IAAK,cAAa,GAAI,eAAc,IAAK,cAAc,CAAC,EAAE;gBACxE,OAAO,IAAI;YACZ;QACD;QAEA,OAAO,KAAK;IACb,CAAC;AACF;;;;;;;;;;;AC3UA;AAEA;IAAuC;IAItC,kBAAY,OAAU;QAAtB,YACC,kBAAM,EAAE,EAAC;QACT,KAAI,CAAC,SAAQ,EAAG,OAAO;;IACxB;IAEO,uBAAG,EAAV;QACC,OAAO,IAAI,CAAC,QAAQ;IACrB,CAAC;IAEM,uBAAG,EAAV,UAAW,OAAU;QACpB,IAAI,CAAC,SAAQ,EAAG,OAAO;QACvB,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,aAAY,CAAE,CAAC;IAClC,CAAC;IACF,eAAC;AAAD,CAjBA,CAAuC,iBAAO;AAAjC;AAmBb,kBAAe,QAAQ;;;;;;;;;;;ACpBvB;AAyBA,cAA4C,MAAW,EAAE,KAAsB;IAC9E,GAAG,CACF,MAAM,CAAC,cAAa;QACnB,CAAC,CAAC,MAAM,CAAC,cAAa,GAAI,MAAM,CAAC,aAAa,CAAC,WAAW,EAAC;YAC3D,CAAC,MAAM,CAAC,SAAQ,GAAI,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAC;YAChD,MAAM,CAAC,WAAW,EAAE,sBACtB,EAAE;QACD,IAAM,YAAW,EAAG,CAAC,MAAM,CAAC,cAAa,GAAI,MAAM,CAAC,SAAQ,GAAI,MAAM,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC;QACjG,WAAW,CAAC,SAAS,CACpB,KAAK,CAAC,IAAI,EACV,OAAO,CAAmB,KAAM,CAAC,OAAO,CAAC,EACzC,OAAO,CAAmB,KAAM,CAAC,UAAU,CAAC,CAC5C;QAED,IAAI,CAAC,IAAI,IAAG,GAAI,KAAK,EAAE;YACtB,GAAG,CAAC,CAAC,CAAC,IAAG,GAAI,WAAW,CAAC,EAAE;gBAC1B,WAAW,CAAC,GAAG,EAAC,EAAU,KAAM,CAAC,GAAG,CAAC;YACtC;QACD;QAEA,OAAO,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC;IACzC;IAEA,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE;QAChB,GAAG,CAAC,MAAM,CAAC,cAAc,EAAE;YAC1B;YACA,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC;YAC9B,OAAO,KAAK;QACb;QACA,KAAK,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE;YACnB;YACA,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;YAClB,OAAO,KAAK;QACb;IACD;IAEA,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC;AACnD;AArCA;AAiDA,YAA2B,MAAW,EAAE,IAAS,EAAE,QAAa,EAAE,OAAiB;IAClF,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;QACxB,IAAI,QAAO,EAAa,IAAI,CAAC,GAAG,CAAC,UAAU,IAAY;YACtD,OAAO,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC;QAC3C,CAAC,CAAC;QAEF,OAAO,4BAAqB,gCAAI,OAAO;IACxC;IAEA,IAAM,SAAQ,EAAG;QAChB,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC;IAChC,CAAC;IAED;IACA,GAAG,CAAC,MAAM,CAAC,iBAAgB,GAAI,MAAM,CAAC,mBAAmB,EAAE;QAC1D,MAAM,CAAC,gBAAgB,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC;QAChD,OAAO,mBAAY,CAAC;YACnB,MAAM,CAAC,mBAAmB,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC;QACpD,CAAC,CAAC;IACH;IAEA,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE;QACd;QACA,GAAG,CAAC,MAAM,CAAC,cAAc,EAAE;YAC1B,MAAM,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC;YACzB,OAAO,mBAAY,CAAC;gBACnB,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,QAAQ,CAAC;YACtC,CAAC,CAAC;QACH;QAEA,KAAK,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE;YACrB,OAAO,MAAM,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC;QACjC;IACD;IAEA,MAAM,IAAI,SAAS,CAAC,8BAA8B,CAAC;AACpD;AApCA;AAiDA,cAAqB,MAAW,EAAE,IAAS,EAAE,QAAa,EAAE,OAAiB;IAC5E;IACA;IACA,IAAI,OAAM,EAAG,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE;QAC7B,MAAM,CAAC,OAAO,EAAE;QAChB,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC;IACvC,CAAC,EAAE,OAAO,CAAC;IAEX,OAAO,MAAM;AACd;AATA;AA0BA,kBAAyB,MAAW,EAAE,IAAS,EAAE,QAAa,EAAE,OAAiB;IAChF,IAAI,MAAe;IAEnB,IAAM,OAAM,EAAoB,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE;QAChD,GAAG,CAAC,CAAC,MAAM,EAAE;YACZ,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC;QACvC;IACD,CAAC,EAAE,OAAO,CAAC;IAEX,MAAM,CAAC,MAAK,EAAG;QACd,OAAM,EAAG,IAAI;IACd,CAAC;IAED,MAAM,CAAC,OAAM,EAAG;QACf,OAAM,EAAG,KAAK;IACf,CAAC;IAED,OAAO,MAAM;AACd;AAlBA;;;;;;;;;;ACtJA;AAmBA;;;;;AAKA,eAAsB,IAAY;IACjC,IAAM,OAAM,EAAa,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;IAE9D,IAAI,eAAc,EAAG,MAAM;IAC3B,IAAI,YAA6B;IAEjC,IAAM,YAAW,EAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC;IACvC,IAAM,UAAS,EAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC;IACrC,GAAG,CAAC,YAAW,GAAI,CAAC,EAAE;QACrB,GAAG,CAAC,UAAS,GAAI,CAAC,EAAE;YACnB;YACA,eAAc,EAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;YAClE,aAAY,EAAG,IAAI,yBAAe,CAAC,MAAM,CAAC,KAAK,CAAC,YAAW,EAAG,CAAC,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACtF;QACA,KAAK;YACJ;YACA,eAAc,EAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC;YAC7C,aAAY,EAAG,IAAI,yBAAe,CAAC,MAAM,CAAC,KAAK,CAAC,YAAW,EAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC3E;IACD;IACA,KAAK;QACJ,aAAY,EAAG,IAAI,yBAAe,EAAE;QACpC,GAAG,CAAC,UAAS,GAAI,CAAC,EAAE;YACnB;YACA,eAAc,EAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,CAAC;QAC5C;IACD;IAEA,IAAM,SAAQ,EAAG,cAAc,CAAC,MAAM,CAAC,WAAC,IAAI,SAAC,IAAK,GAAG,EAAT,CAAS,CAAC;IACtD,IAAM,cAAa,EAAG,cAAc,CAAC,cAAc,CAAC,OAAM,EAAG,CAAC,EAAC,IAAK,IAAG,GAAI,QAAQ,CAAC,OAAM,EAAG,CAAC;IAE9F,OAAO;QACN,YAAY;QACZ,QAAQ;QACR,aAAa;KACb;AACF;AApCA;AAuDA;;;;;;AAMA,eAAsB,EAAuC,EAAE,QAAkB;QAAzD,sCAAgB;IACvC,GAAG,CAAC,gBAAgB,CAAC,OAAM,IAAK,CAAC,EAAE;QAClC,OAAO;YACN,YAAY,EAAE,QAAQ,CAAC,OAAM,EAAG,CAAC;YACjC,MAAM,EAAE,CAAC;YACT,MAAM,EAAE;SACR;IACF;IAEA,GAAG,CAAC,gBAAgB,CAAC,OAAM,EAAG,QAAQ,CAAC,MAAM,EAAE;QAC9C,OAAO,IAAI;IACZ;IAEA,IAAI,QAAO,EAAG,IAAI;IAClB,IAAM,OAAM,EAAa,EAAE;IAC3B,IAAI,CAAC,IAAI,EAAC,EAAG,CAAC,EAAE,QAAO,GAAI,EAAC,EAAG,gBAAgB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC5D,IAAM,MAAK,EAAG,QAAQ,CAAC,CAAC,CAAC;QACzB,IAAM,SAAQ,EAAG,gBAAgB,CAAC,CAAC,CAAC;QACpC,GAAG,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;YAC7B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACnB;QACA,KAAK,GAAG,CAAC,QAAQ,CAAC,QAAO,IAAK,KAAK,EAAE;YACpC,QAAO,EAAG,KAAK;QAChB;IACD;IAEA,GAAG,CAAC,CAAC,OAAO,EAAE;QACb,OAAO,IAAI;IACZ;IAEA,OAAO;QACN,YAAY,EAAE,gBAAgB,CAAC,OAAM,EAAG,QAAQ,CAAC,MAAM;QACvD,MAAM,EAAE,gBAAgB,CAAC,MAAM;QAC/B,MAAM;KACN;AACF;AAnCA;AA+CA;;;;;;AAMA,wBAA+B,OAAgB;IAC9C,OAAuB,OAAQ,CAAC,KAAI,IAAK,SAAS;AACnD;AAFA;AAkCA;;;;;AAKA,qBAA4B,IAAY;IACvC,IAAM,iBAAgB,EAAc,EAAE;IACtC,IAAM,WAAU,EAAa,EAAE;IAC/B,IAAM,iBAAgB,EAAa,EAAE;IACrC,IAAI,cAAa,EAAG,KAAK;IAEzB,IAAM,OAAM,EAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;IACtD,IAAM,aAAY,EAAG,MAAM,CAAC,CAAC,EAAC,IAAK,GAAG;IAEtC,IAAI,EAAC,EAAG,CAAC;IACT,IAAM,QAAO,EAAG,cAAM,aAAM,CAAC,CAAC,EAAE,CAAC,EAAX,CAAW;IACjC,IAAM,KAAI,EAAG,cAAM,aAAM,CAAC,CAAC,CAAC,EAAT,CAAS;IAE5B,IAAI,kBAAiB,EAAG,KAAK;IAC7B,OAAO,EAAC,EAAG,MAAM,CAAC,MAAM,EAAE;QACzB,IAAM,EAAC,EAAG,OAAO,EAAE;QAEnB,OAAO,CAAC,CAAC,EAAE;YACV,KAAK,GAAG,EAAE;gBACT,IAAM,OAAI,EAAG,OAAO,EAAE;gBACtB,GAAG,CAAC,CAAC,OAAI,GAAI,OAAI,IAAK,GAAG,EAAE;oBAC1B,MAAM,IAAI,SAAS,CAAC,4BAA4B,CAAC;gBAClD;gBACA;gBACA,GAAG,CAAC,OAAI,IAAK,IAAG,GAAI,OAAI,IAAK,IAAG,GAAI,GAAG,CAAC,IAAI,CAAC,MAAI,CAAC,EAAE;oBACnD,MAAM,IAAI,SAAS,CAAC,uDAAuD,CAAC;gBAC7E;gBACA,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,MAAI,EAAC,IAAK,CAAC,EAAC,GAAI,gBAAgB,CAAC,OAAO,CAAC,MAAI,EAAC,IAAK,CAAC,CAAC,EAAE;oBAC7E,MAAM,IAAI,SAAS,CAAC,6CAA2C,OAAI,KAAG,CAAC;gBACxE;gBAEA,IAAM,QAAO,EAAG,OAAO,EAAE;gBACzB,GAAG,CAAC,CAAC,QAAO,GAAI,QAAO,IAAK,GAAG,EAAE;oBAChC,MAAM,IAAI,SAAS,CAAC,kDAAgD,QAAO,KAAG,CAAC;gBAChF;gBAEA,IAAM,UAAS,EAAG,IAAI,EAAE;gBACxB,GAAG,CAAC,SAAS,EAAE;oBACd,GAAG,CAAC,iBAAiB,EAAE;wBACtB,GAAG,CAAC,UAAS,IAAK,GAAG,EAAE;4BACtB,MAAM,IAAI,SAAS,CAAC,oDAAkD,UAAS,KAAG,CAAC;wBACpF;oBACD;oBACA,KAAK,GAAG,CAAC,UAAS,IAAK,IAAG,GAAI,UAAS,IAAK,GAAG,EAAE;wBAChD,MAAM,IAAI,SAAS,CAAC,oDAAkD,UAAS,KAAG,CAAC;oBACpF;gBACD;gBAEA,GAAG,CAAC,iBAAiB,EAAE;oBACtB,gBAAgB,CAAC,IAAI,CAAC,MAAI,CAAC;gBAC5B;gBAAE,KAAK;oBACN,UAAU,CAAC,IAAI,CAAC,MAAI,CAAC;oBACrB,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,IAAI,UAAE,CAAC,CAAC;gBAC/C;gBAEA,KAAK;YACN;YAEA,KAAK,GAAG;YACR,KAAK,GAAG;gBACP,GAAG,CAAC,iBAAiB,EAAE;oBACtB,MAAM,IAAI,SAAS,CAAC,kDAAgD,EAAC,KAAG,CAAC;gBAC1E;gBAEA,GAAG,CAAC,EAAC,IAAK,GAAG,EAAE;oBACd,kBAAiB,EAAG,IAAI;oBACxB,GAAG,CAAC,gBAAgB,CAAC,OAAM,IAAK,CAAC,EAAE;wBAClC,MAAM,IAAI,SAAS,CAAC,wCAAwC,CAAC;oBAC9D;gBACD;gBAEA,GAAG,CAAC,EAAC,IAAK,GAAG,EAAE;oBACd,IAAM,OAAI,EAAG,IAAI,EAAE;oBACnB,GAAG,CAAC,OAAI,IAAK,GAAG,EAAE;wBACjB,MAAM,IAAI,SAAS,CAAC,gCAAgC,CAAC;oBACtD;oBACA,GAAG,CAAC,gBAAgB,CAAC,OAAM,EAAG,EAAC,GAAI,CAAC,CAAC,OAAI,GAAI,OAAI,IAAK,GAAG,CAAC,EAAE;wBAC3D,cAAa,EAAG,IAAI;oBACrB;gBACD;gBAEA,KAAK;YAEN,KAAK,GAAG;gBACP,GAAG,CAAC,CAAC,iBAAiB,EAAE;oBACvB,MAAM,IAAI,SAAS,CAAC,qCAAqC,CAAC;gBAC3D;gBAEA,IAAM,KAAI,EAAG,IAAI,EAAE;gBACnB,GAAG,CAAC,KAAI,IAAK,GAAG,EAAE;oBACjB,MAAM,IAAI,SAAS,CAAC,mDAAmD,CAAC;gBACzE;gBAEA,KAAK;YAEN;gBACC,GAAG,CAAC,iBAAiB,EAAE;oBACtB,MAAM,IAAI,SAAS,CAAC,kDAAgD,EAAC,KAAG,CAAC;gBAC1E;gBAEA,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,EAAC,CAAE,CAAC,CAAC;QACtD;IACD;IAEA,OAAO,MAAM,CAAC,MAAM,CAAC;QACpB,gBAAgB,EAAc,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC;QAC7D,YAAY;QACZ,UAAU,EAAa,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC;QAChD,gBAAgB,EAAa,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC;QAC5D,aAAa;KACb,CAAC;AACH;AA/GA;;;;;;;;;;ACjLA;AAGa,kBAAS,EAAG,IAAI,iBAAO,EAAiE;AAErG;;;AAGA,yBAAgC,KAA0C;IACzE,OAAO,iBAAS,CAAC,GAAG,CAAC,KAAK,EAAC,GAAI,KAAK,CAAC,OAAM,IAAK,SAAS;AAC1D;AAFA;AAIA;;;;;AAKA,oBAA2B,KAA0C;IACpE,OAAO,KAAK,CAAC,MAAM,EAAE;QACpB,MAAK,EAAG,KAAK,CAAC,MAAM;IACrB;IAEA,IAAM,OAAM,EAAG,iBAAS,CAAC,GAAG,CAAC,KAAK,CAAC;IACnC,GAAG,CAAC,CAAC,MAAM,EAAE;QACZ,MAAM,IAAI,KAAK,CAAC,6DAA6D,CAAC;IAC/E;IACA,KAAK;QACJ,OAAO,MAAM;IACd;AACD;AAZA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AAGA;AACA;AAQA,qBAA2D,KAAU;IACpE,OAAO,OAAO,CAAC,MAAK,GAAI,CAAC,CAAC,OAAO,MAAK,IAAK,QAAQ,EAAC,GAAI,CAAC,OAAO,MAAK,IAAK,UAAU,EAAC,GAAI,CAAC,OAAO,MAAK,IAAK,QAAQ,CAAC,CAAC,CAAC;AACvH;AAFA;AASA,gBACC,gBAA0D,EAC1D,MAAc,EACd,SAAwD,EACxD,GAA8B;IAD9B,kDAAwB,OAAyB,IAAM,CAAC;IACxD,4BAAqB,0BAAS;IAE9B,IAAM,eAAc,EAAG,WAAW,CAAC,gBAAgB,EAAC,EAAG,UAAS,EAAG,gBAAgB,CAAC,KAAK;IACzF,IAAM,cAAa,EAAG,WAAW,CAAC,gBAAgB,EAAC,EAAG,iBAAgB,EAAG,gBAAgB,CAAC,IAAI;IAC9F,IAAM,eAAc,EAAG,WAAW,CAAC,gBAAgB,EAAC,EAAG,UAAS,EAAG,gBAAgB,CAAC,KAAK;IACzF,uBAAyC,MAAmB,EAAE,UAAe;QAC5E,OAAO,EAAE,MAAM,UAAE;IAClB;IAAC;IAGD;QAA8B;QAA9B;;QA0BA;QAxBQ,4CAAiB,EAAxB,UAAyB,UAA8D;YACtF,iBAAM,iBAAiB,YAAC,UAAU,CAAC;YACnC,IAAI,CAAC,UAAU,EAAE;QAClB,CAAC;QAES,iCAAM,EAAhB;YACS,mCAAM;YACd,IAAM,cAAa,EAAG,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;YAC9C,GAAG,CAAC,aAAa,EAAE;gBACV,iCAAM,EAAE,yBAAI,EAAE,mCAAQ;gBAC9B,IAAM,WAAU,eAAQ,IAAI,CAAC,UAAU,EAAK,SAAS,CAAC,EAAE,MAAM,UAAE,IAAI,QAAE,QAAQ,cAAE,MAAM,UAAE,CAAC,CAAE;gBAE3F,GAAG,CAAC,CAAC,KAAI,IAAK,sBAAS,CAAC,MAAK,GAAI,KAAI,IAAK,sBAAS,CAAC,KAAK,EAAC,GAAI,cAAc,EAAE;oBAC7E,OAAO,KAAC,CAAC,cAAc,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC;gBACpD;gBACA,KAAK,GAAG,CAAC,KAAI,IAAK,sBAAS,CAAC,MAAK,GAAI,cAAc,EAAE;oBACpD,OAAO,KAAC,CAAC,cAAc,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC;gBACpD;gBACA,KAAK,GAAG,CAAC,KAAI,IAAK,sBAAS,CAAC,MAAK,GAAI,aAAa,EAAE;oBACnD,OAAO,KAAC,CAAC,aAAa,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC;gBACnD;YACD;YACA,OAAO,IAAI;QACZ,CAAC;QAzBI,gBAAe;YADpB,eAAM,CAAC,EAAE,IAAI,EAAE,0BAAS,EAAE,aAAa,iBAAE;WACpC,eAAe,CA0BpB;QAAD,sBAAC;KA1BD,CAA8B,uBAAU;IA2BxC,OAAO,eAAe;AACvB;AA1CA;AA4CA,kBAAe,MAAM;;;;;;;;;;;;;;;;;AC1ErB,mBAAO,CAAC,EAAwB,CAAC,CAAC,OAAO,EAAE,CAAC;;;;;;;ACA5C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;;;AAG1B;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;;;AAIA;;AAEA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;;;AAIA;;;;AAIA;AACA;AACA;;;;;;;;;;ACrDA,oCAA6C;AAC7C,EAAE,CAAC,CAAC,CAAC,YAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;IAClC,SAAG,CAAC,mBAAmB,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;AACxC,CAAC;;;;;;;ACHD,yC;;;;;;;;;ACAA;AACA;AACA;AACA;AAEA;AAEA,IAAM,SAAQ,EAAG,IAAI,mBAAQ,EAAE;AAC/B,IAAM,QAAO,EAAG,IAAI,iBAAO,EAAE;AAC7B,QAAQ,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC;AAEzC,IAAM,cAAa,EAAG;IACrB;QACC,IAAI,EAAE,aAAa;QACnB,MAAM,EAAE;KACR;IACD;QACC,IAAI,EAAE,eAAe;QACrB,MAAM,EAAE;KACR;IACD;QACC,IAAI,EAAE,mBAAmB;QACzB,MAAM,EAAE,SAAS;QACjB,YAAY,EAAE,IAAI;QAClB,aAAa,EAAE;YACd,QAAQ,EAAE,KAAK;YACf,IAAI,EAAE;;;CAGR;AAED,IAAM,OAAM,EAAG,uCAAsB,CAAC,aAAa,EAAE,QAAQ,CAAC;AAC9D,MAAM,CAAC,KAAK,EAAE;AACd,IAAM,UAAS,EAAG,0BAAc,CAAC,SAAG,CAAC;AACrC,IAAM,UAAS,EAAG,IAAI,SAAS,EAAE;AACjC,SAAS,CAAC,aAAa,CAAC,EAAE,QAAQ,YAAE,CAAC;AACrC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,EAAC,GAAI,SAAS,CAAC;;;;;;;;;;;ACpC5D;AACA;AACA;AAEA;AACA;AAGA;AACA;AAEA;AAEA;;;AAGA,IAAY,oBAGX;AAHD,WAAY,oBAAoB;IAC/B,uEAAY;IACZ,uEAAQ;AACT,CAAC,EAHW,qBAAoB,EAApB,6BAAoB,IAApB,6BAAoB;AAKhC;;;AAGA,IAAY,UAIX;AAJD,WAAY,UAAU;IACrB,+CAAU;IACV,6CAAS;IACT,iDAAW;AACZ,CAAC,EAJW,WAAU,EAAV,mBAAU,IAAV,mBAAU;AAqHtB,wBAAwE,IAAO;IAC9E;QAAwB;QAoBvB;YAAY;iBAAA,UAAc,EAAd,qBAAc,EAAd,IAAc;gBAAd;;YAAZ,gDACU,IAAI;YAfN,aAAM,EAAG,IAAI;YAQb,yBAAkB,EAAY,EAAE;YAChC,2BAAoB,EAAuB,EAAwB;YAGnE,eAAQ,EAAe,EAAE;YAKhC,IAAM,aAAY,EAAG,wBAAiB,CAAC,GAAG,CAAC,KAAI,CAAE;YAEjD,YAAY,CAAC,iBAAgB,EAAG;gBAC/B,KAAI,CAAC,cAAc,EAAE;YACtB,CAAC;YACD,KAAI,CAAC,mBAAkB,EAAG;gBACzB,WAAW,EAAE;aACb;YAED,KAAI,CAAC,eAAc,EAAG,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC;YAC/C,KAAI,CAAC,aAAY,EAAG,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC;YAC9C,KAAI,CAAC,KAAI,EAAG,QAAQ,CAAC,IAAI;YACzB,KAAI,CAAC,eAAc,EAAG,oBAAoB,CAAC,QAAQ;;QACpD;QAEO,2BAAM,EAAb,UAAc,IAAc;YAC3B,IAAM,QAAO,EAAG;gBACf,IAAI,EAAE,UAAU,CAAC,MAAM;gBACvB,IAAI;aACJ;YAED,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;QAC7B,CAAC;QAEM,0BAAK,EAAZ,UAAa,IAAc;YAC1B,IAAM,QAAO,EAAG;gBACf,IAAI,EAAE,UAAU,CAAC,KAAK;gBACtB,IAAI;aACJ;YAED,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;QAC7B,CAAC;QAEM,4BAAO,EAAd,UAAe,IAAc;YAC5B,IAAM,QAAO,EAAG;gBACf,IAAI,EAAE,UAAU,CAAC,OAAO;gBACxB,IAAI;aACJ;YAED,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;QAC7B,CAAC;QAEM,0BAAK,EAAZ;YACC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE;gBACpB,gBAAM,CAAC,oBAAoB,CAAC,IAAI,CAAC,UAAU,CAAC;gBAC5C,IAAI,CAAC,WAAU,EAAG,SAAS;YAC5B;YACA,IAAI,CAAC,QAAO,EAAG,IAAI;QACpB,CAAC;QAEM,2BAAM,EAAb;YACC,IAAI,CAAC,QAAO,EAAG,KAAK;YACpB,IAAI,CAAC,cAAc,EAAE;QACtB,CAAC;QAEM,mCAAc,EAArB;YACC,GAAG,CAAC,IAAI,CAAC,eAAc,IAAK,oBAAoB,CAAC,SAAS,CAAC,EAAC;gBAC3D,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,oBAAoB,CAAC;gBACjD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,kBAAkB,CAAC;gBAC5C,IAAY,CAAC,aAAY,EAAG,CAAC;gBAC9B,GAAG,CAAC,CAAC,IAAI,CAAC,WAAU,GAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBACtC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE;wBAChB,IAAI,CAAC,WAAU,EAAG,gBAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,cAAc,CAAC;oBACpE;oBACA,KAAK;wBACJ,IAAI,CAAC,cAAc,EAAE;oBACtB;gBACD;YACD;QACD,CAAC;QAED,sBAAW,2BAAI;iBAOf;gBACC,OAAO,IAAI,CAAC,KAAK;YAClB,CAAC;iBATD,UAAgB,IAAa;gBAC5B,GAAG,CAAC,IAAI,CAAC,eAAc,IAAK,oBAAoB,CAAC,QAAQ,EAAE;oBAC1D,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC;gBAC1E;gBACA,IAAI,CAAC,MAAK,EAAG,IAAI;YAClB,CAAC;;;;QAMD,sBAAW,4BAAK;iBAAhB;gBACC,OAAO,IAAI,CAAC,MAAM;YACnB,CAAC;iBAED,UAAiB,KAAc;gBAC9B,GAAG,CAAC,IAAI,CAAC,eAAc,IAAK,oBAAoB,CAAC,QAAQ,EAAE;oBAC1D,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC;gBACxE;gBACA,IAAI,CAAC,OAAM,EAAG,KAAK;YACpB,CAAC;;;;QAEM,4BAAO,EAAd,UAAe,GAAwB;YAAvC;YAAe,oCAAwB;YACtC,GAAG,CAAC,IAAI,CAAC,eAAc,IAAK,oBAAoB,CAAC,QAAQ,EAAE;gBAC1D,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC;YACrE;YACA,IAAI,CAAC,OAAM,EAAG,KAAK;YACnB,IAAM,aAAY,EAAG,IAAI,CAAC,IAAI;YAE9B;YACA,IAAI,CAAC,GAAG,CAAC;gBACR,KAAI,CAAC,MAAK,EAAG,YAAY;YAC1B,CAAC,CAAC;YAEF,IAAI,CAAC,OAAO,CAAC;gBACZ;gBACA,IAAI,EAAE,GAAG,CAAC,sBAAsB,EAAS;gBACzC,IAAI,EAAE,UAAU,CAAC;aACjB,CAAC;QACH,CAAC;QAEM,gCAAW,EAAlB,UAAmB,QAAiB;YACnC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;YAC9B,IAAI,CAAC,cAAc,EAAE;QACtB,CAAC;QAEM,oCAAe,EAAtB,UAAuB,QAAiB;YACvC,IAAI,CAAC,mBAAkB,mBAAQ,QAAQ,CAAE;YACzC,iBAAM,eAAe,YAAC,QAAQ,CAAC;QAChC,CAAC;QAEM,kCAAa,EAApB,UAAqB,UAA8B;YAClD,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC;YAClC,IAAI,CAAC,cAAc,EAAE;QACtB,CAAC;QAEM,sCAAiB,EAAxB,UAAyB,UAA8B;YACtD,GAAG,CAAC,IAAI,CAAC,qBAAoB,GAAI,IAAI,CAAC,oBAAoB,CAAC,SAAQ,IAAK,UAAU,CAAC,QAAQ,EAAE;gBAC5F,GAAG,CAAC,IAAI,CAAC,oBAAoB,CAAC,QAAQ,EAAE;oBACvC,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,OAAO,EAAE;gBAC7C;YACD;YACA,IAAI,CAAC,qBAAoB,EAAG,aAAM,CAAC,EAAE,EAAE,UAAU,CAAC;YAClD,iBAAM,qBAAqB,YAAC,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY,EAAE,UAAU,CAAC,SAAQ,CAAE,CAAC;YAC9E,iBAAM,iBAAiB,YAAC,UAAU,CAAC;QACpC,CAAC;QAEM,2BAAM,EAAb;YACC,GAAG,CAAC,IAAI,CAAC,eAAc,IAAK,oBAAoB,CAAC,SAAQ,GAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBAC/E,MAAM,IAAI,KAAK,CAAC,wEAAwE,CAAC;YAC1F;YACA,OAAQ,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAa,CAAC,SAAS;QACrE,CAAC;QAGM,gCAAW,EAAlB,UAAmB,MAAa;YAC/B,IAAI,KAAI,EAAG,MAAM;YACjB,GAAG,CAAC,OAAO,OAAM,IAAK,SAAQ,GAAI,OAAM,IAAK,KAAI,GAAI,OAAM,IAAK,SAAS,EAAE;gBAC1E,KAAI,EAAG,KAAC,CAAC,MAAM,EAAE,EAAE,EAAE,CAAE,MAAM,CAAE,CAAC;YACjC;YAEA,OAAO,IAAI;QACZ,CAAC;QAEO,8BAAS,EAAjB;YACC,IAAI,CAAC,WAAU,EAAG,SAAS;YAE3B,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE;gBACrB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YAC7C;QACD,CAAC;QAEO,wBAAG,EAAX,UAAY,MAAgB;YAC3B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;QAC3B,CAAC;QAEM,4BAAO,EAAd;YACC,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAM,EAAG,CAAC,EAAE;gBAChC,IAAM,OAAM,EAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE;gBAClC,GAAG,CAAC,MAAM,EAAE;oBACX,MAAM,EAAE;gBACT;YACD;QACD,CAAC;QAEO,4BAAO,EAAf,UAAgB,EAA6B;YAA7C;gBAAkB,cAAI,EAAE,cAAI;YAC3B,IAAI,CAAC,YAAW,EAAG,IAAI;YACvB,GAAG,CAAC,IAAI,EAAE;gBACT,IAAI,CAAC,KAAI,EAAG,IAAI;YACjB;YAEA,GAAG,CAAC,IAAI,CAAC,eAAc,IAAK,oBAAoB,CAAC,QAAQ,EAAE;gBAC1D,OAAO,IAAI,CAAC,aAAa;YAC1B;YAEA,IAAI,CAAC,eAAc,EAAG,oBAAoB,CAAC,QAAQ;YAEnD,IAAM,OAAM,EAAG;gBACd,GAAG,CAAC,KAAI,CAAC,eAAc,IAAK,oBAAoB,CAAC,QAAQ,EAAE;oBAC1D,KAAI,CAAC,KAAK,EAAE;oBACZ,KAAI,CAAC,YAAW,EAAG,SAAS;oBAC5B,KAAI,CAAC,eAAc,EAAG,oBAAoB,CAAC,QAAQ;gBACpD;YACD,CAAC;YAED,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;YAChB,IAAI,CAAC,cAAa,EAAG,mBAAY,CAAC,MAAM,CAAC;YAEzC,IAAI,CAAC,mBAAkB,uBAAQ,IAAI,CAAC,kBAAkB,EAAK,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,OAAM,CAAE,CAAE;YAEnF,OAAO,CAAC,IAAI,EAAE;gBACb,KAAK,UAAU,CAAC,MAAM;oBACrB,IAAI,CAAC,YAAW,EAAG,UAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,kBAAkB,CAAC;oBAC7F,KAAK;gBACL,KAAK,UAAU,CAAC,KAAK;oBACpB,IAAI,CAAC,aAAY,EAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE;oBACpD,IAAI,CAAC,YAAW,EAAG,UAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,EAAG,IAAI,CAAC,kBAAkB,CAAC;oBAC7F,KAAK;gBACL,KAAK,UAAU,CAAC,OAAO;oBACtB,IAAI,CAAC,YAAW,EAAG,UAAG,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,kBAAkB,CAAC;oBAC9F,KAAK;YACN;YAEA,OAAO,IAAI,CAAC,aAAa;QAC1B,CAAC;QArED;YADC,yBAAW,EAAE;;;;oDAQb;QA+DF,gBAAC;KA/OD,CAAwB,IAAI;IAiP5B,OAAO,SAAS;AACjB;AAnPA;AAqPA,kBAAe,cAAc;;;;;;;AClY7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,oBAAoB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,sBAAsB,wBAAwB;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yBAAyB,2CAA2C;;AAEpE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yBAAyB,2CAA2C;;AAEpE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,MAAM;AACrB,gBAAgB,MAAM;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA,qBAAqB,wBAAwB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6BAA6B,yBAAyB,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0CAA0C,aAAa;AACvD,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC,uBAAuB;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,2BAA2B,wCAAwC;AACnE;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,2BAA2B,wCAAwC;AACnE;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,2BAA2B,wCAAwC;AACnE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,yCAAyC,wBAAwB;AACjE;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;ACxLD;AACA;AAUA;;;;;AAKA,mBAAmB,KAAU;IAC5B,OAAO,MAAK,GAAI,OAAO,KAAK,CAAC,IAAG,IAAK,WAAU,GAAI,OAAO,KAAK,CAAC,IAAG,IAAK,UAAU;AACnF;AAgFA;;;AAGA,IAAM,kBAAiB,EAAG,IAAI,iBAAO,EAA0C;AAE/E;;;AAGA,IAAI,OAAM,EAAG,CAAC;AAEd;;;;;;;;;AASA,sBACC,UAAkC,EAClC,IAAgB,EAChB,MAA4B,EAC5B,gBAA0B;IAE1B,IAAI,SAAQ,EA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","file":"src/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"src/main\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"src/main\"] = factory();\n\telse\n\t\troot[\"src/main\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f6005422d0dd660f8669","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/tslib/tslib.es6.js\n// module id = 0\n// module chunks = 0","const globalObject: any = (function (): any {\n\n\tif (typeof global !== 'undefined') {\n\t\t// global spec defines a reference to the global object called 'global'\n\t\t// https://github.com/tc39/proposal-global\n\t\t// `global` is also defined in NodeJS\n\t\treturn global;\n\t}\n\telse if (typeof window !== 'undefined') {\n\t\t// window is defined in browsers\n\t\treturn window;\n\t}\n\telse if (typeof self !== 'undefined') {\n\t\t// self is defined in WebWorkers\n\t\treturn self;\n\t}\n})();\n\nexport default globalObject;\n\n\n\n// WEBPACK FOOTER //\n// global.ts","import Symbol from '@dojo/shim/Symbol';\nimport {\n\tConstructor,\n\tDefaultWidgetBaseInterface,\n\tDeferredVirtualProperties,\n\tDNode,\n\tHNode,\n\tRegistryLabel,\n\tVirtualDomProperties,\n\tWidgetBaseInterface,\n\tWNode\n} from './interfaces';\n\n/**\n * The symbol identifier for a WNode type\n */\nexport const WNODE = Symbol('Identifier for a WNode.');\n\n/**\n * The symbol identifier for a HNode type\n */\nexport const HNODE = Symbol('Identifier for a HNode.');\n\n/**\n * Helper function that returns true if the `DNode` is a `WNode` using the `type` property\n */\nexport function isWNode<W extends WidgetBaseInterface = DefaultWidgetBaseInterface>(child: DNode<W>): child is WNode<W> {\n\treturn Boolean(child && (typeof child !== 'string') && child.type === WNODE);\n}\n\n/**\n * Helper function that returns true if the `DNode` is a `HNode` using the `type` property\n */\nexport function isHNode(child: DNode): child is HNode {\n\treturn Boolean(child && (typeof child !== 'string') && child.type === HNODE);\n}\n\n/**\n * Generic decorate function for DNodes. The nodes are modified in place based on the provided predicate\n * and modifier functions.\n *\n * The children of each node are flattened and added to the array for decoration.\n *\n * If no predicate is supplied then the modifier will be executed on all nodes.\n */\nexport function decorate(dNodes: DNode, modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode;\nexport function decorate(dNodes: DNode[], modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode[];\nexport function decorate(dNodes: DNode | DNode[], modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode | DNode[];\nexport function decorate(dNodes: DNode | DNode[], modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode | DNode[] {\n\tlet nodes = Array.isArray(dNodes) ? [ ...dNodes ] : [ dNodes ];\n\twhile (nodes.length) {\n\t\tconst node = nodes.pop();\n\t\tif (node) {\n\t\t\tif (!predicate || predicate(node)) {\n\t\t\t\tmodifier(node);\n\t\t\t}\n\t\t\tif ((isWNode(node) || isHNode(node)) && node.children) {\n\t\t\t\tnodes = [ ...nodes, ...node.children ];\n\t\t\t}\n\t\t}\n\t}\n\treturn dNodes;\n}\n\n/**\n * Wrapper function for calls to create a widget.\n */\nexport function w<W extends WidgetBaseInterface>(widgetConstructor: Constructor<W> | RegistryLabel, properties: W['properties'], children: W['children'] = []): WNode<W> {\n\n\treturn {\n\t\tchildren,\n\t\twidgetConstructor,\n\t\tproperties,\n\t\ttype: WNODE\n\t};\n}\n\n/**\n * Wrapper function for calls to create HNodes.\n */\nexport function v(tag: string, properties: VirtualDomProperties | DeferredVirtualProperties, children?: DNode[]): HNode;\nexport function v(tag: string, children: undefined | DNode[]): HNode;\nexport function v(tag: string): HNode;\nexport function v(tag: string, propertiesOrChildren: VirtualDomProperties | DeferredVirtualProperties | DNode[] = {}, children: undefined | DNode[] = undefined): HNode {\n\t\tlet properties: VirtualDomProperties | DeferredVirtualProperties = propertiesOrChildren;\n\t\tlet deferredPropertiesCallback;\n\n\t\tif (Array.isArray(propertiesOrChildren)) {\n\t\t\tchildren = propertiesOrChildren;\n\t\t\tproperties = {};\n\t\t}\n\n\t\tif (typeof properties === 'function') {\n\t\t\tdeferredPropertiesCallback = properties;\n\t\t\tproperties = {};\n\t\t}\n\n\t\treturn {\n\t\t\ttag,\n\t\t\tdeferredPropertiesCallback,\n\t\t\tchildren,\n\t\t\tproperties,\n\t\t\ttype: HNODE\n\t\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// d.ts","import { EventTypedObject } from '@dojo/interfaces/core';\nimport Map from '@dojo/shim/Map';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport { v } from './d';\nimport { auto } from './diff';\nimport {\n\tAfterRender,\n\tBeforeProperties,\n\tBeforeRender,\n\tCoreProperties,\n\tDiffPropertyReaction,\n\tDNode,\n\tRender,\n\tWidgetMetaBase,\n\tWidgetMetaConstructor,\n\tWidgetBaseInterface,\n\tWidgetProperties\n} from './interfaces';\nimport RegistryHandler from './RegistryHandler';\nimport NodeHandler from './NodeHandler';\nimport { widgetInstanceMap } from './vdom';\nimport { isWidgetBaseConstructor, WIDGET_BASE_TYPE } from './Registry';\n\nenum WidgetRenderState {\n\tIDLE = 1,\n\tPROPERTIES,\n\tCHILDREN,\n\tRENDER\n}\n\ninterface ReactionFunctionArguments {\n\tpreviousProperties: any;\n\tnewProperties: any;\n\tchanged: boolean;\n}\n\ninterface ReactionFunctionConfig {\n\tpropertyName: string;\n\treaction: DiffPropertyReaction;\n}\n\nexport interface WidgetAndElementEvent extends EventTypedObject<'properties:changed'> {\n\tkey: string;\n\telement: HTMLElement;\n\ttarget: WidgetBase;\n}\n\nexport type BoundFunctionData = { boundFunc: (...args: any[]) => any, scope: any };\n\nconst decoratorMap = new Map<Function, Map<string, any[]>>();\nconst boundAuto = auto.bind(null);\n\n/**\n * Main widget base for all widgets to extend\n */\nexport class WidgetBase<P = WidgetProperties, C extends DNode = DNode> implements WidgetBaseInterface<P, C> {\n\n\t/**\n\t * static identifier\n\t */\n\tstatic _type: symbol = WIDGET_BASE_TYPE;\n\n\t/**\n\t * children array\n\t */\n\tprivate _children: (C | null)[];\n\n\t/**\n\t * Indicates if it is the initial set properties cycle\n\t */\n\tprivate _initialProperties = true;\n\n\t/**\n\t * internal widget properties\n\t */\n\tprivate _properties: P & WidgetProperties & { [index: string]: any };\n\n\t/**\n\t * Array of property keys considered changed from the previous set properties\n\t */\n\tprivate _changedPropertyKeys: string[] = [];\n\n\tprivate _cachedDNode: DNode | DNode[];\n\n\t/**\n\t * map of decorators that are applied to this widget\n\t */\n\tprivate _decoratorCache: Map<string, any[]>;\n\n\tprivate _registry: RegistryHandler;\n\n\t/**\n\t * Map of functions properties for the bound function\n\t */\n\tprivate _bindFunctionPropertyMap: WeakMap<(...args: any[]) => any, BoundFunctionData>;\n\n\tprivate _renderState: WidgetRenderState = WidgetRenderState.IDLE;\n\n\tprivate _metaMap: Map<WidgetMetaConstructor<any>, WidgetMetaBase>;\n\n\tprivate _boundRenderFunc: Render;\n\n\tprivate _boundInvalidate: () => void;\n\n\tprivate _nodeHandler: NodeHandler = new NodeHandler();\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis._children = [];\n\t\tthis._decoratorCache = new Map<string, any[]>();\n\t\tthis._properties = <P> {};\n\t\tthis._boundRenderFunc = this.render.bind(this);\n\t\tthis._boundInvalidate = this.invalidate.bind(this);\n\n\t\twidgetInstanceMap.set(this, {\n\t\t\tdirty: true,\n\t\t\tonElementCreated: (element: HTMLElement, key: string) => {\n\t\t\t\tthis.onElementCreated(element, key);\n\t\t\t},\n\t\t\tonElementUpdated: (element: HTMLElement, key: string) => {\n\t\t\t\tthis.onElementUpdated(element, key);\n\t\t\t},\n\t\t\tonAttach: (): void => {\n\t\t\t\tthis.onAttach();\n\t\t\t},\n\t\t\tonDetach: (): void => {\n\t\t\t\tthis.onDetach();\n\t\t\t},\n\t\t\tnodeHandler: this._nodeHandler,\n\t\t\tregistry: () => {\n\t\t\t\treturn this.registry;\n\t\t\t},\n\t\t\tcoreProperties: {} as CoreProperties,\n\t\t\tinvalidate: this._boundInvalidate\n\t\t});\n\t}\n\n\tprotected meta<T extends WidgetMetaBase>(MetaType: WidgetMetaConstructor<T>): T {\n\t\tif (this._metaMap === undefined) {\n\t\t\tthis._metaMap = new Map<WidgetMetaConstructor<any>, WidgetMetaBase>();\n\t\t}\n\t\tlet cached = this._metaMap.get(MetaType);\n\t\tif (!cached) {\n\t\t\tcached = new MetaType({\n\t\t\t\tinvalidate: this._boundInvalidate,\n\t\t\t\tnodeHandler: this._nodeHandler,\n\t\t\t\tbind: this\n\t\t\t});\n\t\t\tthis._metaMap.set(MetaType, cached);\n\t\t\tcached;\n\t\t}\n\n\t\treturn cached as T;\n\t}\n\n\t/**\n\t * Widget lifecycle method that is called whenever a dom node is created for a HNode.\n\t * Override this method to access the dom nodes that were inserted into the dom.\n\t * @param element The dom node represented by the vdom node.\n\t * @param key The vdom node's key.\n\t */\n\tprotected onElementCreated(element: Element, key: string): void {\n\t\t// Do nothing by default.\n\t}\n\n\t/**\n\t * Widget lifecycle method that is called whenever a dom node that is associated with a HNode is updated.\n\t * Override this method to access the dom node.\n\t * @param element The dom node represented by the vdom node.\n\t * @param key The vdom node's key.\n\t */\n\tprotected onElementUpdated(element: Element, key: string): void {\n\t\t// Do nothing by default.\n\t}\n\n\tprotected onAttach(): void {\n\t\t// Do nothing by default.\n\t}\n\n\tprotected onDetach(): void {\n\t\t// Do nothing by default.\n\t}\n\n\tpublic get properties(): Readonly<P> & Readonly<WidgetProperties> {\n\t\treturn this._properties;\n\t}\n\n\tpublic get changedPropertyKeys(): string[] {\n\t\treturn [ ...this._changedPropertyKeys ];\n\t}\n\n\tpublic __setCoreProperties__(coreProperties: CoreProperties): void {\n\t\tthis._renderState = WidgetRenderState.PROPERTIES;\n\t\tconst { baseRegistry } = coreProperties;\n\t\tconst instanceData = widgetInstanceMap.get(this)!;\n\n\t\tif (instanceData.coreProperties.baseRegistry !== baseRegistry) {\n\t\t\tif (this._registry === undefined) {\n\t\t\t\tthis._registry = new RegistryHandler();\n\t\t\t\tthis._registry.on('invalidate', this._boundInvalidate);\n\t\t\t}\n\t\t\tthis._registry.base = baseRegistry;\n\t\t\tthis.invalidate();\n\t\t}\n\t\tinstanceData.coreProperties = coreProperties;\n\t}\n\n\tpublic __setProperties__(originalProperties: this['properties']): void {\n\t\tconst properties = this._runBeforeProperties(originalProperties);\n\t\tconst registeredDiffPropertyNames = this.getDecorator('registeredDiffProperty');\n\t\tconst changedPropertyKeys: string[] = [];\n\t\tconst propertyNames = Object.keys(properties);\n\t\tconst instanceData = widgetInstanceMap.get(this)!;\n\t\tthis._renderState = WidgetRenderState.PROPERTIES;\n\n\t\tif (this._initialProperties === false || registeredDiffPropertyNames.length !== 0) {\n\t\t\tconst allProperties = [ ...propertyNames, ...Object.keys(this._properties) ];\n\t\t\tconst checkedProperties: string[] = [];\n\t\t\tconst diffPropertyResults: any = {};\n\t\t\tlet runReactions = false;\n\n\t\t\tfor (let i = 0; i < allProperties.length; i++) {\n\t\t\t\tconst propertyName = allProperties[i];\n\t\t\t\tif (checkedProperties.indexOf(propertyName) > 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcheckedProperties.push(propertyName);\n\t\t\t\tconst previousProperty = this._properties[propertyName];\n\t\t\t\tconst newProperty = this._bindFunctionProperty(properties[propertyName], instanceData.coreProperties.bind);\n\t\t\t\tif (registeredDiffPropertyNames.indexOf(propertyName) !== -1) {\n\t\t\t\t\trunReactions = true;\n\t\t\t\t\tconst diffFunctions = this.getDecorator(`diffProperty:${propertyName}`);\n\t\t\t\t\tfor (let i = 0; i < diffFunctions.length; i++) {\n\t\t\t\t\t\tconst result = diffFunctions[i](previousProperty, newProperty);\n\t\t\t\t\t\tif (result.changed && changedPropertyKeys.indexOf(propertyName) === -1) {\n\t\t\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (propertyName in properties) {\n\t\t\t\t\t\t\tdiffPropertyResults[propertyName] = result.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst result = boundAuto(previousProperty, newProperty);\n\t\t\t\t\tif (result.changed && changedPropertyKeys.indexOf(propertyName) === -1) {\n\t\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t\t}\n\t\t\t\t\tif (propertyName in properties) {\n\t\t\t\t\t\tdiffPropertyResults[propertyName] = result.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (runReactions) {\n\t\t\t\tthis._mapDiffPropertyReactions(properties, changedPropertyKeys).forEach((args, reaction) => {\n\t\t\t\t\tif (args.changed) {\n\t\t\t\t\t\treaction.call(this, args.previousProperties, args.newProperties);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._properties = diffPropertyResults;\n\t\t\tthis._changedPropertyKeys = changedPropertyKeys;\n\t\t}\n\t\telse {\n\t\t\tthis._initialProperties = false;\n\t\t\tfor (let i = 0; i < propertyNames.length; i++) {\n\t\t\t\tconst propertyName = propertyNames[i];\n\t\t\t\tif (typeof properties[propertyName] === 'function') {\n\t\t\t\t\tproperties[propertyName] = this._bindFunctionProperty(properties[propertyName], instanceData.coreProperties.bind);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._changedPropertyKeys = changedPropertyKeys;\n\t\t\tthis._properties = { ...properties };\n\t\t}\n\n\t\tif (this._changedPropertyKeys.length > 0) {\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tpublic get children(): (C | null)[] {\n\t\treturn this._children;\n\t}\n\n\tpublic __setChildren__(children: (C | null)[]): void {\n\t\tthis._renderState = WidgetRenderState.CHILDREN;\n\t\tif (this._children.length > 0 || children.length > 0) {\n\t\t\tthis._children = children;\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tpublic __render__(): DNode | DNode[] {\n\t\tconst instanceData = widgetInstanceMap.get(this)!;\n\t\tthis._renderState = WidgetRenderState.RENDER;\n\t\tif (instanceData.dirty || this._cachedDNode === undefined) {\n\t\t\tinstanceData.dirty = false;\n\t\t\tconst render = this._runBeforeRenders();\n\t\t\tlet dNode = render();\n\t\t\tthis._cachedDNode = this.runAfterRenders(dNode);\n\t\t\tthis._nodeHandler.clear();\n\t\t}\n\t\tthis._renderState = WidgetRenderState.IDLE;\n\t\treturn this._cachedDNode;\n\t}\n\n\tpublic invalidate(): void {\n\t\tconst instanceData = widgetInstanceMap.get(this)!;\n\t\tif (this._renderState === WidgetRenderState.IDLE) {\n\t\t\tinstanceData.dirty = true;\n\t\t\tif (instanceData.parentInvalidate) {\n\t\t\t\tinstanceData.parentInvalidate();\n\t\t\t}\n\t\t}\n\t\telse if (this._renderState === WidgetRenderState.PROPERTIES) {\n\t\t\tinstanceData.dirty = true;\n\t\t}\n\t\telse if (this._renderState === WidgetRenderState.CHILDREN) {\n\t\t\tinstanceData.dirty = true;\n\t\t}\n\t}\n\n\tprotected render(): DNode | DNode[] {\n\t\treturn v('div', {}, this.children);\n\t}\n\n\t/**\n\t * Function to add decorators to WidgetBase\n\t *\n\t * @param decoratorKey The key of the decorator\n\t * @param value The value of the decorator\n\t */\n\tprotected addDecorator(decoratorKey: string, value: any): void {\n\t\tvalue = Array.isArray(value) ? value : [ value ];\n\t\tif (this.hasOwnProperty('constructor')) {\n\t\t\tlet decoratorList = decoratorMap.get(this.constructor);\n\t\t\tif (!decoratorList) {\n\t\t\t\tdecoratorList = new Map<string, any[]>();\n\t\t\t\tdecoratorMap.set(this.constructor, decoratorList);\n\t\t\t}\n\n\t\t\tlet specificDecoratorList = decoratorList.get(decoratorKey);\n\t\t\tif (!specificDecoratorList) {\n\t\t\t\tspecificDecoratorList = [];\n\t\t\t\tdecoratorList.set(decoratorKey, specificDecoratorList);\n\t\t\t}\n\t\t\tspecificDecoratorList.push(...value);\n\t\t}\n\t\telse {\n\t\t\tconst decorators = this.getDecorator(decoratorKey);\n\t\t\tthis._decoratorCache.set(decoratorKey, [ ...decorators, ...value ]);\n\t\t}\n\t}\n\n\t/**\n\t * Function to build the list of decorators from the global decorator map.\n\t *\n\t * @param decoratorKey  The key of the decorator\n\t * @return An array of decorator values\n\t * @private\n\t */\n\tprivate _buildDecoratorList(decoratorKey: string): any[] {\n\t\tconst allDecorators = [];\n\n\t\tlet constructor = this.constructor;\n\n\t\twhile (constructor) {\n\t\t\tconst instanceMap = decoratorMap.get(constructor);\n\t\t\tif (instanceMap) {\n\t\t\t\tconst decorators = instanceMap.get(decoratorKey);\n\n\t\t\t\tif (decorators) {\n\t\t\t\t\tallDecorators.unshift(...decorators);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconstructor = Object.getPrototypeOf(constructor);\n\t\t}\n\n\t\treturn allDecorators;\n\t}\n\n\t/**\n\t * Function to retrieve decorator values\n\t *\n\t * @param decoratorKey The key of the decorator\n\t * @returns An array of decorator values\n\t */\n\tprotected getDecorator(decoratorKey: string): any[] {\n\t\tlet allDecorators = this._decoratorCache.get(decoratorKey);\n\n\t\tif (allDecorators !== undefined) {\n\t\t\treturn allDecorators;\n\t\t}\n\n\t\tallDecorators = this._buildDecoratorList(decoratorKey);\n\n\t\tthis._decoratorCache.set(decoratorKey, allDecorators);\n\t\treturn allDecorators;\n\t}\n\n\tprivate _mapDiffPropertyReactions(newProperties: any, changedPropertyKeys: string[]): Map<Function, ReactionFunctionArguments> {\n\t\tconst reactionFunctions: ReactionFunctionConfig[] = this.getDecorator('diffReaction');\n\n\t\treturn reactionFunctions.reduce((reactionPropertyMap, { reaction, propertyName }) => {\n\t\t\tlet reactionArguments = reactionPropertyMap.get(reaction);\n\t\t\tif (reactionArguments === undefined) {\n\t\t\t\treactionArguments = {\n\t\t\t\t\tpreviousProperties: {},\n\t\t\t\t\tnewProperties: {},\n\t\t\t\t\tchanged: false\n\t\t\t\t};\n\t\t\t}\n\t\t\treactionArguments.previousProperties[propertyName] = this._properties[propertyName];\n\t\t\treactionArguments.newProperties[propertyName] = newProperties[propertyName];\n\t\t\tif (changedPropertyKeys.indexOf(propertyName) !== -1) {\n\t\t\t\treactionArguments.changed = true;\n\t\t\t}\n\t\t\treactionPropertyMap.set(reaction, reactionArguments);\n\t\t\treturn reactionPropertyMap;\n\t\t}, new Map<Function, ReactionFunctionArguments>());\n\n\t}\n\n\t/**\n\t * Binds unbound property functions to the specified `bind` property\n\t *\n\t * @param properties properties to check for functions\n\t */\n\tprivate _bindFunctionProperty(property: any, bind: any): any {\n\t\tif (typeof property === 'function' && isWidgetBaseConstructor(property) === false) {\n\t\t\tif (this._bindFunctionPropertyMap === undefined) {\n\t\t\t\tthis._bindFunctionPropertyMap = new WeakMap<(...args: any[]) => any, { boundFunc: (...args: any[]) => any, scope: any }>();\n\t\t\t}\n\t\t\tconst bindInfo: Partial<BoundFunctionData> = this._bindFunctionPropertyMap.get(property) || {};\n\t\t\tlet { boundFunc, scope } = bindInfo;\n\n\t\t\tif (boundFunc === undefined || scope !== bind) {\n\t\t\t\tboundFunc = property.bind(bind) as (...args: any[]) => any;\n\t\t\t\tthis._bindFunctionPropertyMap.set(property, { boundFunc, scope: bind });\n\t\t\t}\n\t\t\treturn boundFunc;\n\t\t}\n\t\treturn property;\n\t}\n\n\tpublic get registry(): RegistryHandler {\n\t\tif (this._registry === undefined) {\n\t\t\tthis._registry = new RegistryHandler();\n\t\t\tthis._registry.on('invalidate', this._boundInvalidate);\n\t\t}\n\t\treturn this._registry;\n\t}\n\n\tprivate _runBeforeProperties(properties: any) {\n\t\tconst beforeProperties: BeforeProperties[] = this.getDecorator('beforeProperties');\n\t\tif (beforeProperties.length > 0) {\n\t\t\treturn beforeProperties.reduce((properties, beforePropertiesFunction) => {\n\t\t\t\treturn { ...properties, ...beforePropertiesFunction.call(this, properties) };\n\t\t\t}, { ...properties });\n\t\t}\n\t\treturn properties;\n\t}\n\n\t/**\n\t * Run all registered before renders and return the updated render method\n\t */\n\tprivate _runBeforeRenders(): Render {\n\t\tconst beforeRenders = this.getDecorator('beforeRender');\n\n\t\tif (beforeRenders.length > 0) {\n\t\t\treturn beforeRenders.reduce((render: Render, beforeRenderFunction: BeforeRender) => {\n\t\t\t\tconst updatedRender = beforeRenderFunction.call(this, render, this._properties, this._children);\n\t\t\t\tif (!updatedRender) {\n\t\t\t\t\tconsole.warn('Render function not returned from beforeRender, using previous render');\n\t\t\t\t\treturn render;\n\t\t\t\t}\n\t\t\t\treturn updatedRender;\n\t\t\t}, this._boundRenderFunc);\n\t\t}\n\t\treturn this._boundRenderFunc;\n\t}\n\n\t/**\n\t * Run all registered after renders and return the decorated DNodes\n\t *\n\t * @param dNode The DNodes to run through the after renders\n\t */\n\tprotected runAfterRenders(dNode: DNode | DNode[]): DNode | DNode[] {\n\t\tconst afterRenders = this.getDecorator('afterRender');\n\n\t\tif (afterRenders.length > 0) {\n\t\t\treturn afterRenders.reduce((dNode: DNode | DNode[], afterRenderFunction: AfterRender) => {\n\t\t\t\treturn afterRenderFunction.call(this, dNode);\n\t\t\t}, dNode);\n\t\t}\n\n\t\tif (this._metaMap !== undefined) {\n\t\t\tthis._metaMap.forEach((meta) => {\n\t\t\t\tmeta.afterRender();\n\t\t\t});\n\t\t}\n\n\t\treturn dNode;\n\t}\n}\n\nexport default WidgetBase;\n\n\n\n// WEBPACK FOOTER //\n// WidgetBase.ts","import { Require, Config } from './loader';\n\n/**\n * The valid return types from a feature test\n */\nexport type FeatureTestResult = boolean | string | number | undefined;\n\n/**\n * A function that tests for a feature and returns a result\n */\nexport type FeatureTest = () => FeatureTestResult;\n\nexport type FeatureTestThenable = {\n\tthen<U>(onFulfilled?: (value: FeatureTestResult) => U | FeatureTestThenable, onRejected?: (error: any) => U | FeatureTestThenable): FeatureTestThenable;\n\tthen<U>(onFulfilled?: (value: FeatureTestResult) => U | FeatureTestThenable, onRejected?: (error: any) => void): FeatureTestThenable;\n};\n\nfunction isFeatureTestThenable(value: any): value is FeatureTestThenable {\n\treturn value && value.then;\n}\n\n/**\n * A cache of results of feature tests\n */\nexport const testCache: { [feature: string]: FeatureTestResult } = {};\n\n/**\n * A cache of the un-resolved feature tests\n */\nexport const testFunctions: { [feature: string]: FeatureTest } = {};\n\n/**\n * A cache of unresolved thenables (probably promises)\n * @type {{}}\n */\nconst testThenables: { [feature: string]: FeatureTestThenable} = {};\n\nexport interface StaticHasFeatures {\n\t[ feature: string ]: FeatureTestResult;\n}\n\nexport interface DojoHasEnvironment {\n\t/**\n\t * Static features defined in the enviornment that should be used by the `has` module\n\t * instead of run-time detection.\n\t */\n\tstaticFeatures?: StaticHasFeatures | (() => StaticHasFeatures);\n}\n\ndeclare global {\n\tinterface Window {\n\t\t/**\n\t\t * The `dojo/has` enviornment which provides configuration when the module is\n\t\t * loaded.\n\t\t */\n\t\tDojoHasEnvironment?: DojoHasEnvironment;\n\t}\n}\n\n/**\n * A reference to the global scope (`window` in a browser, `global` in NodeJS)\n */\nconst globalScope = (function (): any {\n\t/* istanbul ignore else */\n\tif (typeof window !== 'undefined') {\n\t\t// Browsers\n\t\treturn window;\n\t}\n\telse if (typeof global !== 'undefined') {\n\t\t// Node\n\t\treturn global;\n\t}\n\telse if (typeof self !== 'undefined') {\n\t\t// Web workers\n\t\treturn self;\n\t}\n\t/* istanbul ignore next */\n\treturn {};\n})();\n\n/* Grab the staticFeatures if there are available */\nconst { staticFeatures }: DojoHasEnvironment = globalScope.DojoHasEnvironment || {};\n\n/* Cleaning up the DojoHasEnviornment */\nif ('DojoHasEnvironment' in globalScope) {\n\tdelete globalScope.DojoHasEnvironment;\n}\n\n/**\n * Custom type guard to narrow the `staticFeatures` to either a map or a function that\n * returns a map.\n *\n * @param value The value to guard for\n */\nfunction isStaticFeatureFunction(value: any): value is (() => StaticHasFeatures) {\n\treturn typeof value === 'function';\n}\n\n/**\n * The cache of asserted features that were available in the global scope when the\n * module loaded\n */\nconst staticCache: StaticHasFeatures = staticFeatures\n\t? isStaticFeatureFunction(staticFeatures)\n\t\t? staticFeatures.apply(globalScope)\n\t\t: staticFeatures\n\t: {}; /* Providing an empty cache, if none was in the environment\n\n/**\n * AMD plugin function.\n *\n * Conditional loads modules based on a has feature test value.\n *\n * @param resourceId Gives the resolved module id to load.\n * @param require The loader require function with respect to the module that contained the plugin resource in its\n *                dependency list.\n * @param load Callback to loader that consumes result of plugin demand.\n */\nexport function load(resourceId: string, require: Require, load: (value?: any) => void, config?: Config): void {\n\tresourceId ? require([ resourceId ], load) : load();\n}\n\n/**\n * AMD plugin function.\n *\n * Resolves resourceId into a module id based on possibly-nested tenary expression that branches on has feature test\n * value(s).\n *\n * @param resourceId The id of the module\n * @param normalize Resolves a relative module id into an absolute module id\n */\nexport function normalize(resourceId: string, normalize: (moduleId: string) => string): string | null {\n\tconst tokens: RegExpMatchArray = resourceId.match(/[\\?:]|[^:\\?]*/g) || [];\n\tlet i = 0;\n\n\tfunction get(skip?: boolean): string | null {\n\t\tconst term = tokens[i++];\n\t\tif (term === ':') {\n\t\t\t// empty string module name, resolves to null\n\t\t\treturn null;\n\t\t}\n\t\telse {\n\t\t\t// postfixed with a ? means it is a feature to branch on, the term is the name of the feature\n\t\t\tif (tokens[i++] === '?') {\n\t\t\t\tif (!skip && has(term)) {\n\t\t\t\t\t// matched the feature, get the first value from the options\n\t\t\t\t\treturn get();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// did not match, get the second value, passing over the first\n\t\t\t\t\tget(true);\n\t\t\t\t\treturn get(skip);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// a module\n\t\t\treturn term;\n\t\t}\n\t}\n\n\tconst id = get();\n\n\treturn id && normalize(id);\n}\n\n/**\n * Check if a feature has already been registered\n *\n * @param feature the name of the feature\n */\nexport function exists(feature: string): boolean {\n\tconst normalizedFeature = feature.toLowerCase();\n\n\treturn Boolean(normalizedFeature in staticCache || normalizedFeature in testCache || testFunctions[normalizedFeature]);\n}\n\n/**\n * Register a new test for a named feature.\n *\n * @example\n * has.add('dom-addeventlistener', !!document.addEventListener);\n *\n * @example\n * has.add('touch-events', function () {\n *    return 'ontouchstart' in document\n * });\n *\n * @param feature the name of the feature\n * @param value the value reported of the feature, or a function that will be executed once on first test\n * @param overwrite if an existing value should be overwritten. Defaults to false.\n */\nexport function add(feature: string, value: FeatureTest | FeatureTestResult | FeatureTestThenable, overwrite: boolean = false): void {\n\tconst normalizedFeature = feature.toLowerCase();\n\n\tif (exists(normalizedFeature) && !overwrite && !(normalizedFeature in staticCache)) {\n\t\tthrow new TypeError(`Feature \"${feature}\" exists and overwrite not true.`);\n\t}\n\n\tif (typeof value === 'function') {\n\t\ttestFunctions[normalizedFeature] = value;\n\t}\n\telse if (isFeatureTestThenable(value)) {\n\t\ttestThenables[ feature ] = value.then((resolvedValue: FeatureTestResult) => {\n\t\t\ttestCache [ feature ] = resolvedValue;\n\t\t\tdelete testThenables [ feature ];\n\t\t}, () => {\n\t\t\tdelete testThenables [ feature ];\n\t\t});\n\t}\n\telse {\n\t\ttestCache[normalizedFeature] = value;\n\t\tdelete testFunctions[normalizedFeature];\n\t}\n}\n\n/**\n * Return the current value of a named feature.\n *\n * @param feature The name (if a string) or identifier (if an integer) of the feature to test.\n */\nexport default function has(feature: string): FeatureTestResult {\n\tlet result: FeatureTestResult;\n\n\tconst normalizedFeature = feature.toLowerCase();\n\n\tif (normalizedFeature in staticCache) {\n\t\tresult = staticCache[normalizedFeature];\n\t}\n\telse if (testFunctions[normalizedFeature]) {\n\t\tresult = testCache[normalizedFeature] = testFunctions[normalizedFeature].call(null);\n\t\tdelete testFunctions[normalizedFeature];\n\t}\n\telse if (normalizedFeature in testCache) {\n\t\tresult = testCache[normalizedFeature];\n\t}\n\telse if (feature in testThenables) {\n\t\treturn false;\n\t}\n\telse {\n\t\tthrow new TypeError(`Attempt to detect unregistered has feature \"${feature}\"`);\n\t}\n\n\treturn result;\n}\n\n/*\n * Out of the box feature tests\n */\n\n/* Environments */\n\n/* Used as a value to provide a debug only code path */\nadd('debug', true);\n\n/* Detects if the environment is \"browser like\" */\nadd('host-browser', typeof document !== 'undefined' && typeof location !== 'undefined');\n\n/* Detects if the environment appears to be NodeJS */\nadd('host-node', function () {\n\tif (typeof process === 'object' && process.versions && process.versions.node) {\n\t\treturn process.versions.node;\n\t}\n});\n\n\n\n// WEBPACK FOOTER //\n// has.ts","import has from './support/has';\nimport global from './global';\nimport { getValueDescriptor } from './support/util';\n\ndeclare global {\n\tinterface SymbolConstructor {\n\t\tobservable: symbol;\n\t}\n}\n\nexport let Symbol: SymbolConstructor = global.Symbol;\n\nif (!has('es6-symbol')) {\n\t/**\n\t * Throws if the value is not a symbol, used internally within the Shim\n\t * @param  {any}    value The value to check\n\t * @return {symbol}       Returns the symbol or throws\n\t */\n\tconst validateSymbol = function validateSymbol(value: any): symbol {\n\t\tif (!isSymbol(value)) {\n\t\t\tthrow new TypeError(value + ' is not a symbol');\n\t\t}\n\t\treturn value;\n\t};\n\n\tconst defineProperties = Object.defineProperties;\n\tconst defineProperty: (o: any, p: string | symbol, attributes: PropertyDescriptor & ThisType<any>) => any = Object.defineProperty;\n\tconst create = Object.create;\n\n\tconst objPrototype = Object.prototype;\n\n\tconst globalSymbols: { [key: string]: symbol } = {};\n\n\tconst getSymbolName = (function () {\n\t\tconst created = create(null);\n\t\treturn function (desc: string|number): string {\n\t\t\tlet postfix = 0;\n\t\t\tlet name: string;\n\t\t\twhile (created[String(desc) + (postfix || '')]) {\n\t\t\t\t++postfix;\n\t\t\t}\n\t\t\tdesc += String(postfix || '');\n\t\t\tcreated[desc] = true;\n\t\t\tname = '@@' + desc;\n\n\t\t\t// FIXME: Temporary guard until the duplicate execution when testing can be\n\t\t\t// pinned down.\n\t\t\tif (!Object.getOwnPropertyDescriptor(objPrototype, name)) {\n\t\t\t\tdefineProperty(objPrototype, name, {\n\t\t\t\t\tset: function (this: Symbol, value: any) {\n\t\t\t\t\t\tdefineProperty(this, name, getValueDescriptor(value));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn name;\n\t\t};\n\t}());\n\n\tconst InternalSymbol = function Symbol(this: any, description?: string|number): symbol {\n\t\tif (this instanceof InternalSymbol) {\n\t\t\tthrow new TypeError('TypeError: Symbol is not a constructor');\n\t\t}\n\t\treturn Symbol(description);\n\t};\n\n\tSymbol = global.Symbol = function Symbol(this: Symbol, description?: string|number): symbol {\n\t\tif (this instanceof Symbol) {\n\t\t\tthrow new TypeError('TypeError: Symbol is not a constructor');\n\t\t}\n\t\tconst sym = Object.create(InternalSymbol.prototype);\n\t\tdescription = (description === undefined ? '' : String(description));\n\t\treturn defineProperties(sym, {\n\t\t\t__description__: getValueDescriptor(description),\n\t\t\t__name__: getValueDescriptor(getSymbolName(description))\n\t\t});\n\t} as SymbolConstructor;\n\n\t/* Decorate the Symbol function with the appropriate properties */\n\tdefineProperty(Symbol, 'for', getValueDescriptor(function (key: string): symbol {\n\t\tif (globalSymbols[key]) {\n\t\t\treturn globalSymbols[key];\n\t\t}\n\t\treturn (globalSymbols[key] = Symbol(String(key)));\n\t}));\n\tdefineProperties(Symbol, {\n\t\tkeyFor: getValueDescriptor(function (sym: symbol): string | undefined {\n\t\t\tlet key: string;\n\t\t\tvalidateSymbol(sym);\n\t\t\tfor (key in globalSymbols) {\n\t\t\t\tif (globalSymbols[key] === sym) {\n\t\t\t\t\treturn key;\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\thasInstance: getValueDescriptor(Symbol.for('hasInstance'), false, false),\n\t\tisConcatSpreadable: getValueDescriptor(Symbol.for('isConcatSpreadable'), false, false),\n\t\titerator: getValueDescriptor(Symbol.for('iterator'), false, false),\n\t\tmatch: getValueDescriptor(Symbol.for('match'), false, false),\n\t\tobservable: getValueDescriptor(Symbol.for('observable'), false, false),\n\t\treplace: getValueDescriptor(Symbol.for('replace'), false, false),\n\t\tsearch: getValueDescriptor(Symbol.for('search'), false, false),\n\t\tspecies: getValueDescriptor(Symbol.for('species'), false, false),\n\t\tsplit: getValueDescriptor(Symbol.for('split'), false, false),\n\t\ttoPrimitive: getValueDescriptor(Symbol.for('toPrimitive'), false, false),\n\t\ttoStringTag: getValueDescriptor(Symbol.for('toStringTag'), false, false),\n\t\tunscopables: getValueDescriptor(Symbol.for('unscopables'), false, false)\n\t});\n\n\t/* Decorate the InternalSymbol object */\n\tdefineProperties(InternalSymbol.prototype, {\n\t\tconstructor: getValueDescriptor(Symbol),\n\t\ttoString: getValueDescriptor(function (this: { __name__: string }) { return this.__name__; }, false, false)\n\t});\n\n\t/* Decorate the Symbol.prototype */\n\tdefineProperties(Symbol.prototype, {\n\t\ttoString: getValueDescriptor(function (this: Symbol) { return 'Symbol (' + (<any> validateSymbol(this)).__description__ + ')'; }),\n\t\tvalueOf: getValueDescriptor(function (this: Symbol) { return validateSymbol(this); })\n\t});\n\n\tdefineProperty(Symbol.prototype, Symbol.toPrimitive, getValueDescriptor(function (this: Symbol) { return validateSymbol(this); }));\n\tdefineProperty(Symbol.prototype, Symbol.toStringTag, getValueDescriptor('Symbol', false, false, true));\n\n\tdefineProperty(InternalSymbol.prototype, Symbol.toPrimitive, getValueDescriptor((<any> Symbol).prototype[Symbol.toPrimitive], false, false, true));\n\tdefineProperty(InternalSymbol.prototype, Symbol.toStringTag, getValueDescriptor((<any> Symbol).prototype[Symbol.toStringTag], false, false, true));\n}\n\n/**\n * A custom guard function that determines if an object is a symbol or not\n * @param  {any}       value The value to check to see if it is a symbol or not\n * @return {is symbol}       Returns true if a symbol or not (and narrows the type guard)\n */\nexport function isSymbol(value: any): value is symbol {\n\treturn (value && ((typeof value === 'symbol') || (value['@@toStringTag'] === 'Symbol'))) || false;\n}\n\n/**\n * Fill any missing well known symbols if the native Symbol is missing them\n */\n[ 'hasInstance', 'isConcatSpreadable', 'iterator', 'species', 'replace', 'search', 'split', 'match', 'toPrimitive',\n\t'toStringTag', 'unscopables', 'observable' ].forEach((wellKnown) => {\n\t\tif (!(Symbol as any)[wellKnown]) {\n\t\t\tObject.defineProperty(Symbol, wellKnown, getValueDescriptor(Symbol.for(wellKnown), false, false));\n\t\t}\n\t});\n\nexport default Symbol;\n\n\n\n// WEBPACK FOOTER //\n// Symbol.ts","import { Iterable, IterableIterator, ShimIterator } from './iterator';\nimport global from './global';\nimport { is as objectIs } from './object';\nimport has from './support/has';\nimport './Symbol';\n\nexport interface Map<K, V> {\n\t/**\n\t * Deletes all keys and their associated values.\n\t */\n\tclear(): void;\n\n\t/**\n\t * Deletes a given key and its associated value.\n\t *\n\t * @param key The key to delete\n\t * @return true if the key exists, false if it does not\n\t */\n\tdelete(key: K): boolean;\n\n\t/**\n\t * Returns an iterator that yields each key/value pair as an array.\n\t *\n\t * @return An iterator for each key/value pair in the instance.\n\t */\n\tentries(): IterableIterator<[K, V]>;\n\n\t/**\n\t * Executes a given function for each map entry. The function\n\t * is invoked with three arguments: the element value, the\n\t * element key, and the associated Map instance.\n\t *\n\t * @param callbackfn The function to execute for each map entry,\n\t * @param thisArg The value to use for `this` for each execution of the calback\n\t */\n\tforEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: any): void;\n\n\t/**\n\t * Returns the value associated with a given key.\n\t *\n\t * @param key The key to look up\n\t * @return The value if one exists or undefined\n\t */\n\tget(key: K): V | undefined;\n\n\t/**\n\t * Returns an iterator that yields each key in the map.\n\t *\n\t * @return An iterator containing the instance's keys.\n\t */\n\tkeys(): IterableIterator<K>;\n\n\t/**\n\t * Checks for the presence of a given key.\n\t *\n\t * @param key The key to check for\n\t * @return true if the key exists, false if it does not\n\t */\n\thas(key: K): boolean;\n\n\t/**\n\t * Sets the value associated with a given key.\n\t *\n\t * @param key The key to define a value to\n\t * @param value The value to assign\n\t * @return The Map instance\n\t */\n\tset(key: K, value: V): this;\n\n\t/**\n\t * Returns the number of key / value pairs in the Map.\n\t */\n\treadonly size: number;\n\n\t/**\n\t * Returns an iterator that yields each value in the map.\n\t *\n\t * @return An iterator containing the instance's values.\n\t */\n\tvalues(): IterableIterator<V>;\n\n\t/** Returns an iterable of entries in the map. */\n\t[Symbol.iterator](): IterableIterator<[K, V]>;\n\n\treadonly [Symbol.toStringTag]: string;\n}\n\nexport interface MapConstructor {\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t */\n\tnew (): Map<any, any>;\n\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t *\n\t * @param iterator\n\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t * The first item in each tuple corresponds to the key of the map entry.\n\t * The second item corresponds to the value of the map entry.\n\t */\n\tnew <K, V>(iterator?: [K, V][]): Map<K, V>;\n\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t *\n\t * @param iterator\n\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t * The first item in each tuple corresponds to the key of the map entry.\n\t * The second item corresponds to the value of the map entry.\n\t */\n\tnew <K, V>(iterator: Iterable<[K, V]>): Map<K, V>;\n\n\treadonly prototype: Map<any, any>;\n\n\treadonly [Symbol.species]: MapConstructor;\n}\n\nexport let Map: MapConstructor = global.Map;\n\nif (!has('es6-map')) {\n\tMap = class Map<K, V> {\n\t\tprotected readonly _keys: K[] = [];\n\t\tprotected readonly _values: V[] = [];\n\n\t\t/**\n\t\t * An alternative to Array.prototype.indexOf using Object.is\n\t\t * to check for equality. See http://mzl.la/1zuKO2V\n\t\t */\n\t\tprotected _indexOfKey(keys: K[], key: K): number {\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tif (objectIs(keys[i], key)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\tstatic [Symbol.species] = Map;\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tif (iterable) {\n\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\tthis.set(value[0], value[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tget size(): number {\n\t\t\treturn this._keys.length;\n\t\t}\n\n\t\tclear(): void {\n\t\t\tthis._keys.length = this._values.length = 0;\n\t\t}\n\n\t\tdelete(key: K): boolean {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\tif (index < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._keys.splice(index, 1);\n\t\t\tthis._values.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\tentries(): IterableIterator<[K, V]> {\n\t\t\tconst values = this._keys.map((key: K, i: number): [K, V] => {\n\t\t\t\treturn [ key, this._values[i] ];\n\t\t\t});\n\n\t\t\treturn new ShimIterator(values);\n\t\t}\n\n\t\tforEach(callback: (value: V, key: K, mapInstance: Map<K, V>) => any, context?: {}) {\n\t\t\tconst keys = this._keys;\n\t\t\tconst values = this._values;\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tcallback.call(context, values[i], keys[i], this);\n\t\t\t}\n\t\t}\n\n\t\tget(key: K): V | undefined {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\treturn index < 0 ? undefined : this._values[index];\n\t\t}\n\n\t\thas(key: K): boolean {\n\t\t\treturn this._indexOfKey(this._keys, key) > -1;\n\t\t}\n\n\t\tkeys(): IterableIterator<K> {\n\t\t\treturn new ShimIterator(this._keys);\n\t\t}\n\n\t\tset(key: K, value: V): Map<K, V> {\n\t\t\tlet index = this._indexOfKey(this._keys, key);\n\t\t\tindex = index < 0 ? this._keys.length : index;\n\t\t\tthis._keys[index] = key;\n\t\t\tthis._values[index] = value;\n\t\t\treturn this;\n\t\t}\n\n\t\tvalues(): IterableIterator<V> {\n\t\t\treturn new ShimIterator(this._values);\n\t\t}\n\n\t\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\t\treturn this.entries();\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'Map' = 'Map';\n\t};\n}\n\nexport default Map;\n\n\n\n// WEBPACK FOOTER //\n// Map.ts","import { Actionable } from '@dojo/interfaces/abilities';\nimport { EventedListener, EventedListenerOrArray, EventedListenersMap } from '@dojo/interfaces/bases';\nimport { EventTargettedObject, EventErrorObject, Handle } from '@dojo/interfaces/core';\nimport Map from '@dojo/shim/Map';\nimport { on as aspectOn } from './aspect';\nimport { Destroyable } from './Destroyable';\n\n/**\n * Determines is the value is Actionable (has a `.do` function)\n *\n * @param value the value to check\n * @returns boolean indicating is the value is Actionable\n */\nfunction isActionable(value: any): value is Actionable<any, any> {\n\treturn Boolean(value && typeof value.do === 'function');\n}\n\n/**\n * Resolve listeners.\n */\nfunction resolveListener<T, E extends EventTargettedObject<T>>(listener: EventedListener<T, E>): EventedCallback<E> {\n\treturn isActionable(listener) ? (event: E) => listener.do({ event }) : listener;\n}\n\n/**\n * Handles an array of handles\n *\n * @param handles an array of handles\n * @returns a single Handle for handles passed\n */\nfunction handlesArraytoHandle(handles: Handle[]): Handle {\n\treturn {\n\t\tdestroy() {\n\t\t\thandles.forEach((handle) => handle.destroy());\n\t\t}\n\t};\n}\n\n/**\n * The base event object, which provides a `type` property\n */\nexport interface EventObject {\n\t/**\n\t * The type of the event\n\t */\n\treadonly type: string | symbol;\n}\n\nexport interface EventedCallback<E extends EventObject> {\n\t/**\n\t * A callback that takes an `event` argument\n\t *\n\t * @param event The event object\n\t */\n\t(event: E): boolean | void;\n}\n\n/**\n * Interface for Evented constructor options\n */\nexport interface EventedOptions {\n\t/**\n\t * Optional listeners to add\n\t */\n\tlisteners?: EventedListenersMap<any>;\n}\n\nexport interface BaseEventedEvents {\n\t/**\n\t * Regsister a callback for a specific event type\n\t *\n\t * @param listeners map of listeners\n\t */\n\t(listeners: EventedListenersMap<Evented>): Handle;\n\n\t/**\n\t * @param type the type of the event\n\t * @param listener the listener to attach\n\t */\n\t(type: string | symbol, listener: EventedListenerOrArray<Evented, EventTargettedObject<Evented>>): Handle;\n\n\t/**\n\t * @param type the type for `error`\n\t * @param listener the listener to attach\n\t */\n\t(type: 'error', listener: EventedListenerOrArray<Evented, EventErrorObject<Evented>>): Handle;\n}\n\nexport interface Evented {\n\ton: BaseEventedEvents;\n}\n\n/**\n * Map of computed regular expressions, keyed by string\n */\nconst regexMap = new Map<string, RegExp>();\n\n/**\n * Determines is the event type glob has been matched\n *\n * @returns boolean that indicates if the glob is matched\n */\nexport function isGlobMatch(globString: string | symbol, targetString: string | symbol): boolean {\n\tif (typeof targetString === 'string' && typeof globString === 'string' && globString.indexOf('*') !== -1) {\n\t\tlet regex: RegExp;\n\t\tif (regexMap.has(globString)) {\n\t\t\tregex = regexMap.get(globString)!;\n\t\t}\n\t\telse {\n\t\t\tregex = new RegExp(`^${ globString.replace(/\\*/g, '.*') }$`);\n\t\t\tregexMap.set(globString, regex);\n\t\t}\n\t\treturn regex.test(targetString);\n\n\t} else {\n\t\treturn globString === targetString;\n\t}\n}\n\n/**\n * Event Class\n */\nexport class Evented extends Destroyable implements Evented {\n\n\t/**\n\t * map of listeners keyed by event type\n\t */\n\tprotected listenersMap: Map<string, EventedCallback<EventObject>> = new Map<string, EventedCallback<EventObject>>();\n\n\t/**\n\t * @constructor\n\t * @param options The constructor argurments\n\t */\n\tconstructor(options: EventedOptions = {}) {\n\t\tsuper();\n\t\tconst { listeners } = options;\n\t\tif (listeners) {\n\t\t\tthis.own(this.on(listeners));\n\t\t}\n\t}\n\n\t/**\n\t * Emits the event objet for the specified type\n\t *\n\t * @param event the event to emit\n\t */\n\temit<E extends EventObject>(event: E): void {\n\t\tthis.listenersMap.forEach((method, type) => {\n\t\t\tif (isGlobMatch(type, event.type)) {\n\t\t\t\tmethod.call(this, event);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Catch all handler for various call signatures. The signatures are defined in\n\t * `BaseEventedEvents`.  You can add your own event type -> handler types by extending\n\t * `BaseEventedEvents`.  See example for details.\n\t *\n\t * @param args\n\t *\n\t * @example\n\t *\n\t * interface WidgetBaseEvents extends BaseEventedEvents {\n\t *     (type: 'properties:changed', handler: PropertiesChangedHandler): Handle;\n\t * }\n\t * class WidgetBase extends Evented {\n\t *    on: WidgetBaseEvents;\n\t * }\n\t *\n\t * @return {any}\n\t */\n\ton: BaseEventedEvents = function (this: Evented, ...args: any[]) {\n\t\tif (args.length === 2) {\n\t\t\tconst [ type, listeners ] = <[ string, EventedListenerOrArray<any, EventTargettedObject<any>>]> args;\n\t\t\tif (Array.isArray(listeners)) {\n\t\t\t\tconst handles = listeners.map((listener) => aspectOn(this.listenersMap, type, resolveListener(listener)));\n\t\t\t\treturn handlesArraytoHandle(handles);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn aspectOn(this.listenersMap, type, resolveListener(listeners));\n\t\t\t}\n\t\t}\n\t\telse if (args.length === 1) {\n\t\t\tconst [ listenerMapArg ] = <[EventedListenersMap<any>]> args;\n\t\t\tconst handles = Object.keys(listenerMapArg).map((type) => this.on(type, listenerMapArg[type]));\n\t\t\treturn handlesArraytoHandle(handles);\n\t\t}\n\t\telse {\n\t\t\tthrow new TypeError('Invalid arguments');\n\t\t}\n\t};\n}\n\nexport default Evented;\n\n\n\n// WEBPACK FOOTER //\n// Evented.ts","import global from './global';\nimport { Iterable } from './iterator';\nimport has from './support/has';\nimport './Symbol';\n\nexport interface WeakMap<K extends object, V> {\n\t/**\n\t * Remove a `key` from the map\n\t *\n\t * @param key The key to remove\n\t * @return `true` if the value was removed, otherwise `false`\n\t */\n\tdelete(key: K): boolean;\n\n\t/**\n\t * Retrieve the value, based on the supplied `key`\n\t *\n\t * @param key The key to retrieve the `value` for\n\t * @return the `value` based on the `key` if found, otherwise `false`\n\t */\n\tget(key: K): V | undefined;\n\n\t/**\n\t * Determines if a `key` is present in the map\n\t *\n\t * @param key The `key` to check\n\t * @return `true` if the key is part of the map, otherwise `false`.\n\t */\n\thas(key: K): boolean;\n\n\t/**\n\t * Set a `value` for a particular `key`.\n\t *\n\t * @param key The `key` to set the `value` for\n\t * @param value The `value` to set\n\t * @return the instances\n\t */\n\tset(key: K, value: V): this;\n\n\treadonly [Symbol.toStringTag]: 'WeakMap';\n}\n\nexport interface WeakMapConstructor {\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t */\n\tnew (): WeakMap<object, any>;\n\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t *\n\t * @param iterable An iterable that contains yields up key/value pair entries\n\t */\n\tnew <K extends object, V>(iterable?: [K, V][]): WeakMap<K, V>;\n\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t *\n\t * @param iterable An iterable that contains yields up key/value pair entries\n\t */\n\tnew <K extends object, V>(iterable: Iterable<[K, V]>): WeakMap<K, V>;\n\n\treadonly prototype: WeakMap<object, any>;\n}\n\nexport let WeakMap: WeakMapConstructor = global.WeakMap;\n\ninterface Entry<K, V> {\n\tkey: K;\n\tvalue: V;\n}\n\nif (!has('es6-weakmap')) {\n\tconst DELETED: any = {};\n\n\tconst getUID = function getUID(): number {\n\t\treturn Math.floor(Math.random() * 100000000);\n\t};\n\n\tconst generateName = (function () {\n\t\tlet startId = Math.floor(Date.now() % 100000000);\n\n\t\treturn function generateName(): string {\n\t\t\treturn '__wm' + getUID() + (startId++ + '__');\n\t\t};\n\t})();\n\n\tWeakMap = class WeakMap<K, V> {\n\t\tprivate readonly _name: string;\n\t\tprivate readonly _frozenEntries: Entry<K, V>[];\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tObject.defineProperty(this, '_name', {\n\t\t\t\tvalue: generateName()\n\t\t\t});\n\n\t\t\tthis._frozenEntries = [];\n\n\t\t\tif (iterable) {\n\t\t\t\tfor (const [key, value] of iterable) {\n\t\t\t\t\tthis.set(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate _getFrozenEntryIndex(key: any): number {\n\t\t\tfor (let i = 0; i < this._frozenEntries.length; i++) {\n\t\t\t\tif (this._frozenEntries[i].key === key) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t}\n\n\t\tdelete(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\tentry.value = DELETED;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\tthis._frozenEntries.splice(frozenIndex, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tget(key: any): V | undefined {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\treturn entry.value;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn this._frozenEntries[frozenIndex].value;\n\t\t\t}\n\t\t}\n\n\t\thas(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (Boolean(entry && entry.key === key && entry.value !== DELETED)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tset(key: any, value?: any): this {\n\t\t\tif (!key || (typeof key !== 'object' && typeof key !== 'function')) {\n\t\t\t\tthrow new TypeError('Invalid value used as weak map key');\n\t\t\t}\n\t\t\tlet entry: Entry<K, V> = key[this._name];\n\t\t\tif (!entry || entry.key !== key) {\n\t\t\t\tentry = Object.create(null, {\n\t\t\t\t\tkey: { value: key }\n\t\t\t\t});\n\n\t\t\t\tif (Object.isFrozen(key)) {\n\t\t\t\t\tthis._frozenEntries.push(entry);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tObject.defineProperty(key, this._name, {\n\t\t\t\t\t\tvalue: entry\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tentry.value = value;\n\t\t\treturn this;\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'WeakMap' = 'WeakMap';\n\t};\n}\n\nexport default WeakMap;\n\n\n\n// WEBPACK FOOTER //\n// WeakMap.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v } from '@dojo/widget-core/d';\nimport { inject } from '@dojo/widget-core/decorators/inject';\nimport { Constructor, DNode, VirtualDomProperties } from '@dojo/widget-core/interfaces';\n\nimport { routerKey } from './RouterInjector';\nimport { Router } from './Router';\n\nexport interface LinkProperties extends VirtualDomProperties {\n\tkey?: string;\n\tisOutlet?: boolean;\n\tparams?: any;\n\tonClick?: (event: MouseEvent) => void;\n\tto: string;\n}\n\nconst getProperties = (router: Router<any>, properties: any): LinkProperties => {\n\tconst { to, isOutlet = true, params = {}, onClick, ...props } = properties;\n\tconst href = isOutlet ? router.link(to, { ...router.getCurrentParams(), ...params }) : to;\n\tconst handleOnClick = (event: MouseEvent) => {\n\n\t\tif (onClick) {\n\t\t\tonClick(event);\n\t\t}\n\n\t\tif (!event.defaultPrevented && event.button === 0 && !properties.target) {\n\t\t\tevent.preventDefault();\n\t\t\trouter.setPath(href);\n\t\t}\n\t};\n\treturn {\n\t\thref,\n\t\tonClick: handleOnClick,\n\t\t...props\n\t};\n};\n\nexport class BaseLink extends WidgetBase<LinkProperties> {\n\n\tprivate _onClick(event: MouseEvent): void {\n\t\tthis.properties.onClick && this.properties.onClick(event);\n\t}\n\n\tprotected render(): DNode {\n\t\tconst props = { ...this.properties, onclick: this._onClick, onClick: undefined, to: undefined, isOutlet: undefined, params: undefined, routerKey: undefined, router: undefined };\n\t\treturn v('a', { ...props }, this.children);\n\t}\n}\n\nexport function createLink(routerKey: any): Constructor<BaseLink> {\n\t@inject({ name: routerKey, getProperties })\n\tclass Link extends BaseLink {};\n\treturn Link;\n}\n\nexport const Link = createLink(routerKey);\n\n\n\n// WEBPACK FOOTER //\n// Link.ts","import { Handle } from '@dojo/interfaces/core';\nimport { assign } from '@dojo/shim/object';\n\nexport { assign } from '@dojo/shim/object';\n\nconst slice = Array.prototype.slice;\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Type guard that ensures that the value can be coerced to Object\n * to weed out host objects that do not derive from Object.\n * This function is used to check if we want to deep copy an object or not.\n * Note: In ES6 it is possible to modify an object's Symbol.toStringTag property, which will\n * change the value returned by `toString`. This is a rare edge case that is difficult to handle,\n * so it is not handled here.\n * @param  value The value to check\n * @return       If the value is coercible into an Object\n */\nfunction shouldDeepCopyObject(value: any): value is Object {\n\treturn Object.prototype.toString.call(value) === '[object Object]';\n}\n\nfunction copyArray<T>(array: T[], inherited: boolean): T[] {\n\treturn array.map(function (item: T): T {\n\t\tif (Array.isArray(item)) {\n\t\t\treturn <any> copyArray(<any> item, inherited);\n\t\t}\n\n\t\treturn !shouldDeepCopyObject(item) ?\n\t\t\titem :\n\t\t\t_mixin({\n\t\t\t\tdeep: true,\n\t\t\t\tinherited: inherited,\n\t\t\t\tsources: <Array<T>> [ item ],\n\t\t\t\ttarget: <T> {}\n\t\t\t});\n\t});\n}\n\ninterface MixinArgs<T extends {}, U extends {}> {\n\tdeep: boolean;\n\tinherited: boolean;\n\tsources: (U | null | undefined)[];\n\ttarget: T;\n\tcopied?: any[];\n}\n\nfunction _mixin<T extends {}, U extends {}>(kwArgs: MixinArgs<T, U>): T&U {\n\tconst deep = kwArgs.deep;\n\tconst inherited = kwArgs.inherited;\n\tconst target: any = kwArgs.target;\n\tconst copied = kwArgs.copied || [];\n\tconst copiedClone = [ ...copied ];\n\n\tfor (let i = 0; i < kwArgs.sources.length; i++) {\n\t\tconst source = kwArgs.sources[i];\n\n\t\tif (source === null || source === undefined) {\n\t\t\tcontinue;\n\t\t}\n\t\tfor (let key in source) {\n\t\t\tif (inherited || hasOwnProperty.call(source, key)) {\n\t\t\t\tlet value: any = source[key];\n\n\t\t\t\tif (copiedClone.indexOf(value) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (deep) {\n\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\tvalue = copyArray(value, inherited);\n\t\t\t\t\t}\n\t\t\t\t\telse if (shouldDeepCopyObject(value)) {\n\t\t\t\t\t\tconst targetValue: any = target[key] || {};\n\t\t\t\t\t\tcopied.push(source);\n\t\t\t\t\t\tvalue = _mixin({\n\t\t\t\t\t\t\tdeep: true,\n\t\t\t\t\t\t\tinherited: inherited,\n\t\t\t\t\t\t\tsources: [ value ],\n\t\t\t\t\t\t\ttarget: targetValue,\n\t\t\t\t\t\t\tcopied\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttarget[key] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn <T&U> target;\n}\n\ninterface ObjectAssignConstructor extends ObjectConstructor {\n\tassign<T, U>(target: T, source: U): T & U;\n\tassign<T, U1, U2>(target: T, source1: U1, source2: U2): T & U1 & U2;\n\tassign<T, U1, U2, U3>(target: T, source1: U1, source2: U2, source3: U3): T & U1 & U2 & U3;\n\tassign(target: any, ...sources: any[]): any;\n}\n\n/**\n * Creates a new object from the given prototype, and copies all enumerable own properties of one or more\n * source objects to the newly created target object.\n *\n * @param prototype The prototype to create a new object from\n * @param mixins Any number of objects whose enumerable own properties will be copied to the created object\n * @return The new object\n */\nexport function create<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(prototype: T, mixin1: U, mixin2: V, mixin3: W, mixin4: X, mixin5: Y, mixin6: Z): T & U & V & W & X & Y & Z;\nexport function create<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(prototype: T, mixin1: U, mixin2: V, mixin3: W, mixin4: X, mixin5: Y): T & U & V & W & X & Y;\nexport function create<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(prototype: T, mixin1: U, mixin2: V, mixin3: W, mixin4: X): T & U & V & W & X;\nexport function create<T extends {}, U extends {}, V extends {}, W extends {}>(prototype: T, mixin1: U, mixin2: V, mixin3: W): T & U & V & W;\nexport function create<T extends {}, U extends {}, V extends {}>(prototype: T, mixin1: U, mixin2: V): T & U & V;\nexport function create<T extends {}, U extends {}>(prototype: T, mixin: U): T & U;\nexport function create<T extends {}>(prototype: T): T;\nexport function create(prototype: any, ...mixins: any[]): any {\n\tif (!mixins.length) {\n\t\tthrow new RangeError('lang.create requires at least one mixin object.');\n\t}\n\n\tconst args = mixins.slice();\n\targs.unshift(Object.create(prototype));\n\n\treturn assign.apply(null, args);\n}\n\n/**\n * Copies the values of all enumerable own properties of one or more source objects to the target object,\n * recursively copying all nested objects and arrays as well.\n *\n * @param target The target object to receive values from source objects\n * @param sources Any number of objects whose enumerable own properties will be copied to the target object\n * @return The modified target object\n */\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y, source6: Z): T & U & V & W & X & Y & Z;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y): T & U & V & W & X & Y;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(target: T, source1: U, source2: V, source3: W, source4: X): T & U & V & W & X;\nexport function deepAssign<T extends {}, U extends {}, V extends {}, W extends {}>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\nexport function deepAssign<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function deepAssign<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function deepAssign(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: true,\n\t\tinherited: false,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Copies the values of all enumerable (own or inherited) properties of one or more source objects to the\n * target object, recursively copying all nested objects and arrays as well.\n *\n * @param target The target object to receive values from source objects\n * @param sources Any number of objects whose enumerable properties will be copied to the target object\n * @return The modified target object\n */\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y, source6: Z): T & U & V & W & X & Y & Z;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y): T & U & V & W & X & Y;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(target: T, source1: U, source2: V, source3: W, source4: X): T & U & V & W & X;\nexport function deepMixin<T extends {}, U extends {}, V extends {}, W extends {}>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\nexport function deepMixin<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function deepMixin<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function deepMixin(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: true,\n\t\tinherited: true,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Creates a new object using the provided source's prototype as the prototype for the new object, and then\n * deep copies the provided source's values into the new target.\n *\n * @param source The object to duplicate\n * @return The new object\n */\nexport function duplicate<T extends {}>(source: T): T {\n\tconst target = Object.create(Object.getPrototypeOf(source));\n\n\treturn deepMixin(target, source);\n}\n\n/**\n * Determines whether two values are the same value.\n *\n * @param a First value to compare\n * @param b Second value to compare\n * @return true if the values are the same; false otherwise\n */\nexport function isIdentical(a: any, b: any): boolean {\n\treturn a === b ||\n\t\t/* both values are NaN */\n\t\t(a !== a && b !== b);\n}\n\n/**\n * Returns a function that binds a method to the specified object at runtime. This is similar to\n * `Function.prototype.bind`, but instead of a function it takes the name of a method on an object.\n * As a result, the function returned by `lateBind` will always call the function currently assigned to\n * the specified property on the object as of the moment the function it returns is called.\n *\n * @param instance The context object\n * @param method The name of the method on the context object to bind to itself\n * @param suppliedArgs An optional array of values to prepend to the `instance[method]` arguments list\n * @return The bound function\n */\nexport function lateBind(instance: {}, method: string, ...suppliedArgs: any[]): (...args: any[]) => any {\n\treturn suppliedArgs.length ?\n\t\tfunction () {\n\t\t\tconst args: any[] = arguments.length ? suppliedArgs.concat(slice.call(arguments)) : suppliedArgs;\n\n\t\t\t// TS7017\n\t\t\treturn (<any> instance)[method].apply(instance, args);\n\t\t} :\n\t\tfunction () {\n\t\t\t// TS7017\n\t\t\treturn (<any> instance)[method].apply(instance, arguments);\n\t\t};\n}\n\n/**\n * Copies the values of all enumerable (own or inherited) properties of one or more source objects to the\n * target object.\n *\n * @return The modified target object\n */\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}, Z extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y, source6: Z): T & U & V & W & X & Y & Z;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}, Y extends {}>(target: T, source1: U, source2: V, source3: W, source4: X, source5: Y): T & U & V & W & X & Y;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}, X extends {}>(target: T, source1: U, source2: V, source3: W, source4: X): T & U & V & W & X;\nexport function mixin<T extends {}, U extends {}, V extends {}, W extends {}>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\nexport function mixin<T extends {}, U extends {}, V extends {}>(target: T, source1: U, source2: V): T & U & V;\nexport function mixin<T extends {}, U extends {}>(target: T, source: U): T & U;\nexport function mixin(target: any, ...sources: any[]): any {\n\treturn _mixin({\n\t\tdeep: false,\n\t\tinherited: true,\n\t\tsources: sources,\n\t\ttarget: target\n\t});\n}\n\n/**\n * Returns a function which invokes the given function with the given arguments prepended to its argument list.\n * Like `Function.prototype.bind`, but does not alter execution context.\n *\n * @param targetFunction The function that needs to be bound\n * @param suppliedArgs An optional array of arguments to prepend to the `targetFunction` arguments list\n * @return The bound function\n */\nexport function partial(targetFunction: (...args: any[]) => any, ...suppliedArgs: any[]): (...args: any[]) => any {\n\treturn function (this: any) {\n\t\tconst args: any[] = arguments.length ? suppliedArgs.concat(slice.call(arguments)) : suppliedArgs;\n\n\t\treturn targetFunction.apply(this, args);\n\t};\n}\n\n/**\n * Returns an object with a destroy method that, when called, calls the passed-in destructor.\n * This is intended to provide a unified interface for creating \"remove\" / \"destroy\" handlers for\n * event listeners, timers, etc.\n *\n * @param destructor A function that will be called when the handle's `destroy` method is invoked\n * @return The handle object\n */\nexport function createHandle(destructor: () => void): Handle {\n\treturn {\n\t\tdestroy: function (this: Handle) {\n\t\t\tthis.destroy = function () {};\n\t\t\tdestructor.call(this);\n\t\t}\n\t};\n}\n\n/**\n * Returns a single handle that can be used to destroy multiple handles simultaneously.\n *\n * @param handles An array of handles with `destroy` methods\n * @return The handle object\n */\nexport function createCompositeHandle(...handles: Handle[]): Handle {\n\treturn createHandle(function () {\n\t\tfor (let i = 0; i < handles.length; i++) {\n\t\t\thandles[i].destroy();\n\t\t}\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// lang.ts","import Promise from '@dojo/shim/Promise';\nimport Map from '@dojo/shim/Map';\nimport Symbol from '@dojo/shim/Symbol';\nimport { Handle } from '@dojo/interfaces/core';\nimport { BaseEventedEvents, Evented, EventObject } from '@dojo/core/Evented';\nimport { Constructor, RegistryLabel, WidgetBaseConstructor, WidgetBaseInterface } from './interfaces';\nimport { Injector } from './Injector';\n\nexport type WidgetBaseConstructorFunction = () => Promise<WidgetBaseConstructor>;\n\nexport type RegistryItem = WidgetBaseConstructor | Promise<WidgetBaseConstructor> | WidgetBaseConstructorFunction;\n\n/**\n * Widget base symbol type\n */\nexport const WIDGET_BASE_TYPE = Symbol('Widget Base');\n\nexport interface RegistryEventObject extends EventObject {\n\taction: string;\n\titem: WidgetBaseConstructor | Injector;\n}\n\nexport interface RegistryListener {\n\t(event: RegistryEventObject): void;\n}\n\nexport interface RegistryEvents extends BaseEventedEvents {\n\t(type: RegistryLabel, listener: RegistryListener | RegistryListener[]): Handle;\n}\n\n/**\n * Widget Registry Interface\n */\nexport interface RegistryInterface {\n\n\t/**\n\t * Define a WidgetRegistryItem against a label\n\t *\n\t * @param label The label of the widget to register\n\t * @param registryItem The registry item to define\n\t */\n\tdefine(label: RegistryLabel, registryItem: RegistryItem): void;\n\n\t/**\n\t * Return a RegistryItem for the given label, null if an entry doesn't exist\n\t *\n\t * @param widgetLabel The label of the widget to return\n\t * @returns The RegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tget<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel): Constructor<T> | null;\n\n\t/**\n\t * Returns a boolean if an entry for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a widget registry item exists\n\t */\n\thas(label: RegistryLabel): boolean;\n\n\t/**\n\t * Define an Injector against a label\n\t *\n\t * @param label The label of the injector to register\n\t * @param registryItem The injector to define\n\t */\n\tdefineInjector(label: RegistryLabel, registryItem: Injector): void;\n\n\t/**\n\t * Return an Injector registry item for the given label, null if an entry doesn't exist\n\t *\n\t * @param label The label of the injector to return\n\t * @returns The RegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tgetInjector<T extends Injector>(label: RegistryLabel): T | null;\n\n\t/**\n\t * Returns a boolean if an injector for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a injector registry item exists\n\t */\n\thasInjector(label: RegistryLabel): boolean;\n}\n\n/**\n * Checks is the item is a subclass of WidgetBase (or a WidgetBase)\n *\n * @param item the item to check\n * @returns true/false indicating if the item is a WidgetBaseConstructor\n */\nexport function isWidgetBaseConstructor<T extends WidgetBaseInterface>(item: any): item is Constructor<T> {\n\treturn Boolean(item && item._type === WIDGET_BASE_TYPE);\n}\n\n/**\n * The Registry implementation\n */\nexport class Registry extends Evented implements RegistryInterface {\n\n\tpublic on: RegistryEvents;\n\n\t/**\n\t * internal map of labels and RegistryItem\n\t */\n\tprivate _widgetRegistry: Map<RegistryLabel, RegistryItem>;\n\n\tprivate _injectorRegistry: Map<RegistryLabel, Injector>;\n\n\t/**\n\t * Emit loaded event for registry label\n\t */\n\tprivate emitLoadedEvent(widgetLabel: RegistryLabel, item: WidgetBaseConstructorFunction | WidgetBaseConstructor | Injector): void {\n\t\tthis.emit({\n\t\t\ttype: widgetLabel,\n\t\t\taction: 'loaded',\n\t\t\titem\n\t\t});\n\t}\n\n\tpublic define(label: RegistryLabel, item: RegistryItem): void {\n\t\tif (this._widgetRegistry === undefined) {\n\t\t\tthis._widgetRegistry = new Map();\n\t\t}\n\n\t\tif (this._widgetRegistry.has(label)) {\n\t\t\tthrow new Error(`widget has already been registered for '${label.toString()}'`);\n\t\t}\n\n\t\tthis._widgetRegistry.set(label, item);\n\n\t\tif (item instanceof Promise) {\n\t\t\titem.then((widgetCtor) => {\n\t\t\t\tthis._widgetRegistry.set(label, widgetCtor);\n\t\t\t\tthis.emitLoadedEvent(label, widgetCtor);\n\t\t\t\treturn widgetCtor;\n\t\t\t}, (error) => {\n\t\t\t\tthrow error;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.emitLoadedEvent(label, item);\n\t\t}\n\t}\n\n\tpublic defineInjector(label: RegistryLabel, item: Injector): void {\n\t\tif (this._injectorRegistry === undefined) {\n\t\t\tthis._injectorRegistry = new Map();\n\t\t}\n\n\t\tif (this._injectorRegistry.has(label)) {\n\t\t\tthrow new Error(`injector has already been registered for '${label.toString()}'`);\n\t\t}\n\n\t\tthis._injectorRegistry.set(label, item);\n\t\tthis.emitLoadedEvent(label, item);\n\t}\n\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel): Constructor<T> | null {\n\t\tif (!this.has(label)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = this._widgetRegistry.get(label);\n\n\t\tif (isWidgetBaseConstructor<T>(item)) {\n\t\t\treturn item;\n\t\t}\n\n\t\tif (item instanceof Promise) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst promise = (<WidgetBaseConstructorFunction> item)();\n\t\tthis._widgetRegistry.set(label, promise);\n\n\t\tpromise.then((widgetCtor) => {\n\t\t\tthis._widgetRegistry.set(label, widgetCtor);\n\t\t\tthis.emitLoadedEvent(label, widgetCtor);\n\t\t\treturn widgetCtor;\n\t\t}, (error) => {\n\t\t\tthrow error;\n\t\t});\n\n\t\treturn null;\n\t}\n\n\tpublic getInjector<T extends Injector>(label: RegistryLabel): T | null {\n\t\tif (!this.hasInjector(label)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._injectorRegistry.get(label) as T;\n\t}\n\n\tpublic has(label: RegistryLabel): boolean {\n\t\treturn Boolean(this._widgetRegistry && this._widgetRegistry.has(label));\n\t}\n\n\tpublic hasInjector(label: RegistryLabel): boolean {\n\t\treturn Boolean(this._injectorRegistry && this._injectorRegistry.has(label));\n\t}\n}\n\nexport default Registry;\n\n\n\n// WEBPACK FOOTER //\n// Registry.ts","import global from './global';\nimport has from './support/has';\nimport { isSymbol } from './Symbol';\n\nexport interface ObjectAssign {\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source The source object from which to copy properties.\n\t */\n\t<T, U>(target: T, source: U): T & U;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source1 The first source object from which to copy properties.\n\t * @param source2 The second source object from which to copy properties.\n\t */\n\t<T, U, V>(target: T, source1: U, source2: V): T & U & V;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source1 The first source object from which to copy properties.\n\t * @param source2 The second source object from which to copy properties.\n\t * @param source3 The third source object from which to copy properties.\n\t */\n\t<T, U, V, W>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param sources One or more source objects from which to copy properties\n\t */\n\t(target: object, ...sources: any[]): any;\n}\n\nexport interface ObjectEnteries {\n\t/**\n\t * Returns an array of key/values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t<T extends { [key: string]: any }, K extends keyof T>(o: T): [keyof T, T[K]][];\n\n\t/**\n\t * Returns an array of key/values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t(o: object): [string, any][];\n}\n\nexport interface ObjectGetOwnPropertyDescriptors {\n\t<T>(o: T): { [K in keyof T]: PropertyDescriptor; };\n\t(o: any): { [key: string]: PropertyDescriptor; };\n}\n\nexport interface ObjectValues {\n\t/**\n\t * Returns an array of values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t<T>(o: { [s: string]: T }): T[];\n\n\t/**\n\t * Returns an array of values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t(o: object): any[];\n}\n\nexport let assign: ObjectAssign;\n\n/**\n * Gets the own property descriptor of the specified object.\n * An own property descriptor is one that is defined directly on the object and is not\n * inherited from the object's prototype.\n * @param o Object that contains the property.\n * @param p Name of the property.\n */\nexport let getOwnPropertyDescriptor: <T, K extends keyof T>(o: T, propertyKey: K) => PropertyDescriptor | undefined;\n\n/**\n * Returns the names of the own properties of an object. The own properties of an object are those that are defined directly\n * on that object, and are not inherited from the object's prototype. The properties of an object include both fields (objects) and functions.\n * @param o Object that contains the own properties.\n */\nexport let getOwnPropertyNames: (o: any) => string[];\n\n/**\n * Returns an array of all symbol properties found directly on object o.\n * @param o Object to retrieve the symbols from.\n */\nexport let getOwnPropertySymbols: (o: any) => symbol[];\n\n/**\n * Returns true if the values are the same value, false otherwise.\n * @param value1 The first value.\n * @param value2 The second value.\n */\nexport let is: (value1: any, value2: any) => boolean;\n\n/**\n * Returns the names of the enumerable properties and methods of an object.\n * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n */\nexport let keys: (o: object) => string[];\n\n/* ES7 Object static methods */\n\nexport let getOwnPropertyDescriptors: ObjectGetOwnPropertyDescriptors;\n\nexport let entries: ObjectEnteries;\n\nexport let values: ObjectValues;\n\nif (has('es6-object')) {\n\tconst globalObject = global.Object;\n\tassign = globalObject.assign;\n\tgetOwnPropertyDescriptor = globalObject.getOwnPropertyDescriptor;\n\tgetOwnPropertyNames = globalObject.getOwnPropertyNames;\n\tgetOwnPropertySymbols = globalObject.getOwnPropertySymbols;\n\tis = globalObject.is;\n\tkeys = globalObject.keys;\n}\nelse {\n\tkeys = function symbolAwareKeys(o: object): string[] {\n\t\treturn Object.keys(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t};\n\n\tassign = function assign(target: any, ...sources: any[]) {\n\t\tif (target == null) { // TypeError if undefined or null\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t}\n\n\t\tconst to = Object(target);\n\t\tsources.forEach((nextSource) => {\n\t\t\tif (nextSource) { // Skip over if undefined or null\n\t\t\t\tkeys(nextSource).forEach((nextKey) => {\n\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn to;\n\t};\n\n\tgetOwnPropertyDescriptor = function getOwnPropertyDescriptor(o: any, prop: string | symbol): PropertyDescriptor | undefined {\n\t\tif (isSymbol(prop)) {\n\t\t\treturn (<any> Object).getOwnPropertyDescriptor(o, prop);\n\t\t} else {\n\t\t\treturn Object.getOwnPropertyDescriptor(o, prop);\n\t\t}\n\t};\n\n\tgetOwnPropertyNames = function getOwnPropertyNames(o: any): string[] {\n\t\treturn Object.getOwnPropertyNames(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t};\n\n\tgetOwnPropertySymbols = function getOwnPropertySymbols(o: any): symbol[] {\n\t\treturn Object.getOwnPropertyNames(o).filter((key) => Boolean(key.match(/^@@.+/)))\n\t\t\t.map((key) => Symbol.for(key.substring(2)));\n\t};\n\n\tis = function is(value1: any, value2: any): boolean {\n\t\tif (value1 === value2) {\n\t\t\treturn value1 !== 0 || 1 / value1 === 1 / value2; // -0\n\t\t}\n\t\treturn value1 !== value1 && value2 !== value2; // NaN\n\t};\n}\n\nif (has('es2017-object')) {\n\tconst globalObject = global.Object;\n\tgetOwnPropertyDescriptors = globalObject.getOwnPropertyDescriptors;\n\tentries = globalObject.entries;\n\tvalues = globalObject.values;\n}\nelse {\n\tgetOwnPropertyDescriptors = function getOwnPropertyDescriptors(o: any) {\n\t\treturn getOwnPropertyNames(o).reduce((previous, key) => {\n\t\t\tprevious[key] = getOwnPropertyDescriptor(o, key)!;\n\t\t\treturn previous;\n\t\t}, {} as { [key: string]: PropertyDescriptor });\n\t};\n\n\tentries = function entries(o: any): [string, any][] {\n\t\treturn keys(o).map((key) => [ key, o[key] ] as [string, any]);\n\t};\n\n\tvalues = function values(o: any): any[] {\n\t\treturn keys(o).map((key) => o[ key ]);\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// object.ts","import './Symbol';\nimport { HIGH_SURROGATE_MAX, HIGH_SURROGATE_MIN } from './string';\n\nexport interface IteratorResult<T> {\n\treadonly done: boolean;\n\treadonly value: T;\n}\n\nexport interface Iterator<T> {\n\tnext(value?: any): IteratorResult<T>;\n\n\treturn?(value?: any): IteratorResult<T>;\n\n\tthrow?(e?: any): IteratorResult<T>;\n}\n\nexport interface Iterable<T> {\n\t[Symbol.iterator](): Iterator<T>;\n}\n\nexport interface IterableIterator<T> extends Iterator<T> {\n\t[Symbol.iterator](): IterableIterator<T>;\n}\n\nconst staticDone: IteratorResult<any> = { done: true, value: undefined };\n\n/**\n * A class that _shims_ an iterator interface on array like objects.\n */\nexport class ShimIterator<T> {\n\tprivate _list: ArrayLike<T>;\n\tprivate _nextIndex: number = -1;\n\tprivate _nativeIterator: Iterator<T>;\n\n\tconstructor(list: ArrayLike<T> | Iterable<T>) {\n\t\tif (isIterable(list)) {\n\t\t\tthis._nativeIterator = list[ Symbol.iterator ]();\n\t\t}\n\t\telse {\n\t\t\tthis._list = list;\n\t\t}\n\t};\n\n\t/**\n\t * Return the next iteration result for the Iterator\n\t */\n\tnext(): IteratorResult<T> {\n\t\tif (this._nativeIterator) {\n\t\t\treturn this._nativeIterator.next();\n\t\t}\n\t\tif (!this._list) {\n\t\t\treturn staticDone;\n\t\t}\n\t\tif (++this._nextIndex < this._list.length) {\n\t\t\treturn {\n\t\t\t\tdone: false,\n\t\t\t\tvalue: this._list[ this._nextIndex ]\n\t\t\t};\n\t\t}\n\t\treturn staticDone;\n\t};\n\n\t[Symbol.iterator](): IterableIterator<T> {\n\t\treturn this;\n\t}\n}\n\n/**\n * A type guard for checking if something has an Iterable interface\n *\n * @param value The value to type guard against\n */\nexport function isIterable(value: any): value is Iterable<any> {\n\treturn value && typeof value[ Symbol.iterator ] === 'function';\n}\n\n/**\n * A type guard for checking if something is ArrayLike\n *\n * @param value The value to type guard against\n */\nexport function isArrayLike(value: any): value is ArrayLike<any> {\n\treturn value && typeof value.length === 'number';\n}\n\n/**\n * Returns the iterator for an object\n *\n * @param iterable The iterable object to return the iterator for\n */\nexport function get<T>(iterable: Iterable<T> | ArrayLike<T>): Iterator<T> | undefined {\n\tif (isIterable(iterable)) {\n\t\treturn iterable[Symbol.iterator]();\n\t}\n\telse if (isArrayLike(iterable)) {\n\t\treturn new ShimIterator(iterable);\n\t}\n};\n\nexport interface ForOfCallback<T> {\n\t/**\n\t * A callback function for a forOf() iteration\n\t *\n\t * @param value The current value\n\t * @param object The object being iterated over\n\t * @param doBreak A function, if called, will stop the iteration\n\t */\n\t(value: T, object: Iterable<T> | ArrayLike<T> | string, doBreak: () => void): void;\n}\n\n/**\n * Shims the functionality of `for ... of` blocks\n *\n * @param iterable The object the provides an interator interface\n * @param callback The callback which will be called for each item of the iterable\n * @param thisArg Optional scope to pass the callback\n */\nexport function forOf<T>(iterable: Iterable<T> | ArrayLike<T> | string, callback: ForOfCallback<T>, thisArg?: any): void {\n\tlet broken = false;\n\n\tfunction doBreak() {\n\t\tbroken = true;\n\t}\n\n\t/* We need to handle iteration of double byte strings properly */\n\tif (isArrayLike(iterable) && typeof iterable === 'string') {\n\t\tconst l = iterable.length;\n\t\tfor (let i = 0; i < l; ++i) {\n\t\t\tlet char = iterable[i];\n\t\t\tif ((i + 1) < l) {\n\t\t\t\tconst code = char.charCodeAt(0);\n\t\t\t\tif ((code >= HIGH_SURROGATE_MIN) && (code <= HIGH_SURROGATE_MAX)) {\n\t\t\t\t\tchar += iterable[++i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback.call(thisArg, char, iterable, doBreak);\n\t\t\tif (broken) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconst iterator = get(iterable);\n\t\tif (iterator) {\n\t\t\tlet result = iterator.next();\n\n\t\t\twhile (!result.done) {\n\t\t\t\tcallback.call(thisArg, result.value, iterable, doBreak);\n\t\t\t\tif (broken) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tresult = iterator.next();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// iterator.ts","import { Thenable } from './interfaces';\nimport global from './global';\nimport { queueMicroTask } from './support/queue';\nimport { Iterable } from './iterator';\nimport './Symbol';\nimport has from './support/has';\n\n/**\n * Executor is the interface for functions used to initialize a Promise.\n */\nexport interface Executor<T> {\n\t/**\n\t * The executor for the promise\n\t *\n\t * @param resolve The resolver callback of the promise\n\t * @param reject The rejector callback of the promise\n\t */\n\t(resolve: (value?: T | PromiseLike<T>) => void, reject: (reason?: any) => void): void;\n}\n\nexport let ShimPromise: typeof Promise = global.Promise;\n\nexport const isThenable = function isThenable<T>(value: any): value is PromiseLike<T> {\n\treturn value && typeof value.then === 'function';\n};\n\nif (!has('es6-promise')) {\n\tconst enum State {\n\t\tFulfilled,\n\t\tPending,\n\t\tRejected\n\t}\n\n\tglobal.Promise = ShimPromise = class Promise<T> implements Thenable<T> {\n\t\tstatic all(iterable: Iterable<(any | PromiseLike<any>)> | (any | PromiseLike<any>)[]): Promise<any> {\n\t\t\treturn new this(function (resolve, reject) {\n\t\t\t\tconst values: any[] = [];\n\t\t\t\tlet complete = 0;\n\t\t\t\tlet total = 0;\n\t\t\t\tlet populating = true;\n\n\t\t\t\tfunction fulfill(index: number, value: any): void {\n\t\t\t\t\tvalues[ index ] = value;\n\t\t\t\t\t++complete;\n\t\t\t\t\tfinish();\n\t\t\t\t}\n\n\t\t\t\tfunction finish(): void {\n\t\t\t\t\tif (populating || complete < total) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(values);\n\t\t\t\t}\n\n\t\t\t\tfunction processItem(index: number, item: any): void {\n\t\t\t\t\t++total;\n\t\t\t\t\tif (isThenable(item)) {\n\t\t\t\t\t\t// If an item Promise rejects, this Promise is immediately rejected with the item\n\t\t\t\t\t\t// Promise's rejection error.\n\t\t\t\t\t\titem.then(fulfill.bind(null, index), reject);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tPromise.resolve(item).then(fulfill.bind(null, index));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet i = 0;\n\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\tprocessItem(i, value);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tpopulating = false;\n\n\t\t\t\tfinish();\n\t\t\t});\n\t\t}\n\n\t\tstatic race<T>(iterable: Iterable<(T | PromiseLike<T>)> | (T | PromiseLike<T>)[]): Promise<T[]> {\n\t\t\treturn new this(function (resolve: (value?: any) => void, reject) {\n\t\t\t\tfor (const item of iterable) {\n\t\t\t\t\tif (item instanceof Promise) {\n\t\t\t\t\t\t// If a Promise item rejects, this Promise is immediately rejected with the item\n\t\t\t\t\t\t// Promise's rejection error.\n\t\t\t\t\t\titem.then(resolve, reject);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tPromise.resolve(item).then(resolve);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tstatic reject(reason?: any): Promise<never> {\n\t\t\treturn new this(function (resolve, reject) {\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t}\n\n\t\tstatic resolve(): Promise<void>;\n\t\tstatic resolve<T>(value: (T | PromiseLike<T>)): Promise<T>;\n\t\tstatic resolve<T>(value?: any): Promise<T> {\n\t\t\treturn new this(function (resolve) {\n\t\t\t\tresolve(<T> value);\n\t\t\t});\n\t\t}\n\n\t\tstatic [Symbol.species]: PromiseConstructor = ShimPromise as PromiseConstructor;\n\n\t\t/**\n\t\t * Creates a new Promise.\n\t\t *\n\t\t * @constructor\n\t\t *\n\t\t * @param executor\n\t\t * The executor function is called immediately when the Promise is instantiated. It is responsible for\n\t\t * starting the asynchronous operation when it is invoked.\n\t\t *\n\t\t * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n\t\t * successfully, or the `reject` function when the operation fails.\n\t\t */\n\t\tconstructor(executor: Executor<T>) {\n\t\t\t/**\n\t\t\t * If true, the resolution of this promise is chained (\"locked in\") to another promise.\n\t\t\t */\n\t\t\tlet isChained = false;\n\n\t\t\t/**\n\t\t\t * Whether or not this promise is in a resolved state.\n\t\t\t */\n\t\t\tconst isResolved = (): boolean => {\n\t\t\t\treturn this.state !== State.Pending || isChained;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Callbacks that should be invoked once the asynchronous operation has completed.\n\t\t\t */\n\t\t\tlet callbacks: null | (Array<() => void>) = [];\n\n\t\t\t/**\n\t\t\t * Initially pushes callbacks onto a queue for execution once this promise settles. After the promise settles,\n\t\t\t * enqueues callbacks for execution on the next event loop turn.\n\t\t\t */\n\t\t\tlet whenFinished = function (callback: () => void): void {\n\t\t\t\tif (callbacks) {\n\t\t\t\t\tcallbacks.push(callback);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Settles this promise.\n\t\t\t *\n\t\t\t * @param newState The resolved state for this promise.\n\t\t\t * @param {T|any} value The resolved value for this promise.\n\t\t\t */\n\t\t\tconst settle = (newState: State, value: any): void => {\n\t\t\t\t// A promise can only be settled once.\n\t\t\t\tif (this.state !== State.Pending) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.state = newState;\n\t\t\t\tthis.resolvedValue = value;\n\t\t\t\twhenFinished = queueMicroTask;\n\n\t\t\t\t// Only enqueue a callback runner if there are callbacks so that initially fulfilled Promises don't have to\n\t\t\t\t// wait an extra turn.\n\t\t\t\tif (callbacks && callbacks.length > 0) {\n\t\t\t\t\tqueueMicroTask(function (): void {\n\t\t\t\t\t\tif (callbacks) {\n\t\t\t\t\t\t\tlet count = callbacks.length;\n\t\t\t\t\t\t\tfor (let i = 0; i < count; ++i) {\n\t\t\t\t\t\t\t\tcallbacks[ i ].call(null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcallbacks = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Resolves this promise.\n\t\t\t *\n\t\t\t * @param newState The resolved state for this promise.\n\t\t\t * @param {T|any} value The resolved value for this promise.\n\t\t\t */\n\t\t\tconst resolve = (newState: State, value: any): void => {\n\t\t\t\tif (isResolved()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (isThenable(value)) {\n\t\t\t\t\tvalue.then(\n\t\t\t\t\t\tsettle.bind(null, State.Fulfilled),\n\t\t\t\t\t\tsettle.bind(null, State.Rejected)\n\t\t\t\t\t);\n\t\t\t\t\tisChained = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsettle(newState, value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.then = <TResult1 = T, TResult2 = never>(onFulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n\t\t\t\t\tonRejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null): Promise<TResult1 | TResult2> => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t// whenFinished initially queues up callbacks for execution after the promise has settled. Once the\n\t\t\t\t\t// promise has settled, whenFinished will schedule callbacks for execution on the next turn through the\n\t\t\t\t\t// event loop.\n\t\t\t\t\twhenFinished(() => {\n\t\t\t\t\t\tconst callback: ((value?: any) => any) | undefined | null = this.state === State.Rejected ? onRejected : onFulfilled;\n\n\t\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tresolve(callback(this.resolvedValue));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (this.state === State.Rejected) {\n\t\t\t\t\t\t\treject(this.resolvedValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tresolve(this.resolvedValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\texecutor(\n\t\t\t\t\tresolve.bind(null, State.Fulfilled),\n\t\t\t\t\tresolve.bind(null, State.Rejected)\n\t\t\t\t);\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tsettle(State.Rejected, error);\n\t\t\t}\n\t\t}\n\n\t\tcatch<TResult = never>(onRejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null): Promise<T | TResult> {\n\t\t\treturn this.then(undefined, onRejected);\n\t\t}\n\n\t\t/**\n\t\t * The current state of this promise.\n\t\t */\n\t\tprivate state = State.Pending;\n\n\t\t/**\n\t\t * The resolved value for this promise.\n\t\t *\n\t\t * @type {T|any}\n\t\t */\n\t\tprivate resolvedValue: any;\n\n\t\tthen: <TResult1 = T, TResult2 = never>(onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null, onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null) => Promise<TResult1 | TResult2>;\n\n\t\t[Symbol.toStringTag]: 'Promise' = 'Promise';\n\t};\n}\n\nexport default ShimPromise;\n\n\n\n// WEBPACK FOOTER //\n// Promise.ts","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\n} catch(e) {\n\t// This works if the window reference is available\n\tif(typeof window === \"object\")\n\t\tg = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 15\n// module chunks = 0","/**\n * Helper function to generate a value property descriptor\n *\n * @param value        The value the property descriptor should be set to\n * @param enumerable   If the property should be enumberable, defaults to false\n * @param writable     If the property should be writable, defaults to true\n * @param configurable If the property should be configurable, defaults to true\n * @return             The property descriptor object\n */\nexport function getValueDescriptor<T>(value: T, enumerable: boolean = false, writable: boolean = true, configurable: boolean = true): TypedPropertyDescriptor<T> {\n\treturn {\n\t\tvalue: value,\n\t\tenumerable: enumerable,\n\t\twritable: writable,\n\t\tconfigurable: configurable\n\t};\n}\n\n/**\n * A helper function which wraps a function where the first argument becomes the scope\n * of the call\n *\n * @param nativeFunction The source function to be wrapped\n */\nexport function wrapNative<T, U, R>(nativeFunction: (...args: U[]) => R): (target: T, ...args: U[]) => R {\n\treturn function (target: T, ...args: U[]): R {\n\t\treturn nativeFunction.apply(target, args);\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// util.ts","/**\n * Generic decorator handler to take care of whether or not the decorator was called at the class level\n * or the method level.\n *\n * @param handler\n */\nexport function handleDecorator(handler: (target: any, propertyKey?: string) => void) {\n\treturn function (target: any, propertyKey?: string, descriptor?: PropertyDescriptor) {\n\t\tif (typeof target === 'function') {\n\t\t\thandler(target.prototype, undefined);\n\t\t}\n\t\telse {\n\t\t\thandler(target, propertyKey);\n\t\t}\n\t};\n}\n\nexport default handleDecorator;\n\n\n\n// WEBPACK FOOTER //\n// handleDecorator.ts","import { Registry } from '@dojo/widget-core/Registry';\nimport { Injector } from '@dojo/widget-core/Injector';\nimport { RegistryLabel } from '@dojo/widget-core/interfaces';\n\nimport HashHistory from './history/HashHistory';\nimport { History } from './history/interfaces';\nimport { Router } from './Router';\nimport { RouteConfig } from './interfaces';\n\n/**\n * Key for the router injector\n */\nexport const routerKey = Symbol();\n\n/**\n * Router Injector Options\n *\n */\nexport interface RouterInjectorOptions {\n\thistory?: History;\n\tkey?: RegistryLabel;\n}\n\n/**\n * Creates a router instance for a specific History manager (default is `HashHistory`) and registers\n * the route configuration.\n *\n * @param config The route config to register for the router\n * @param registry An optional registry that defaults to the global registry\n * @param options The router injector options\n */\nexport function registerRouterInjector(config: RouteConfig[], registry: Registry, options: RouterInjectorOptions = {}): Router<any> {\n\tconst { key = routerKey, history = new HashHistory() } = options;\n\n\tif (registry.hasInjector(key)) {\n\t\tthrow new Error('Router has already been defined');\n\t}\n\tconst router = new Router({ history, config });\n\tconst injector = new Injector(router);\n\trouter.on('navstart', () => {\n\t\tinjector.emit({ type: 'invalidate' });\n\t});\n\tregistry.defineInjector(key, injector);\n\treturn router;\n}\n\n\n\n// WEBPACK FOOTER //\n// RouterInjector.ts","import { Hash } from '@dojo/interfaces/core';\nimport { duplicate } from './lang';\n\n/**\n * Object with string keys and string or string array values that describes a query string.\n */\nexport type ParamList = Hash<string | string[]>;\n\n/**\n * Parses a query string, returning a ParamList object.\n */\nfunction parseQueryString(input: string): ParamList {\n\tconst query: Hash<string[]> = {};\n\tconst splits = input.split('&');\n\n\tfor (let i = 0; i < splits.length; i++) {\n\t\tconst entry = splits[i];\n\t\tconst indexOfFirstEquals = entry.indexOf('=');\n\t\tlet key: string;\n\t\tlet value = '';\n\n\t\tif (indexOfFirstEquals >= 0) {\n\t\t\tkey = entry.slice(0, indexOfFirstEquals);\n\t\t\tvalue = entry.slice(indexOfFirstEquals + 1);\n\t\t}\n\t\telse {\n\t\t\tkey = entry;\n\t\t}\n\n\t\tkey = key ? decodeURIComponent(key) : '';\n\t\tvalue = value ? decodeURIComponent(value) : '';\n\n\t\tif (key in query) {\n\t\t\tquery[key].push(value);\n\t\t}\n\t\telse {\n\t\t\tquery[key] = [value];\n\t\t}\n\t}\n\treturn query;\n}\n\n/**\n * Represents a set of URL query search parameters.\n */\nexport default class UrlSearchParams {\n\t/**\n\t * Constructs a new UrlSearchParams from a query string, an object of parameters and values, or another\n\t * UrlSearchParams.\n\t */\n\tconstructor(input?: string | ParamList | UrlSearchParams) {\n\t\tlet list: ParamList;\n\n\t\tif (input instanceof UrlSearchParams) {\n\t\t\t// Copy the incoming UrlSearchParam's internal list\n\t\t\tlist = <ParamList> duplicate(input._list);\n\t\t}\n\t\telse if (typeof input === 'object') {\n\t\t\t// Copy the incoming object, assuming its property values are either arrays or strings\n\t\t\tlist = {};\n\t\t\tfor (const key in input) {\n\t\t\t\tconst value = (<ParamList> input)[key];\n\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tlist[key] = value.length ? value.slice() : [ '' ];\n\t\t\t\t}\n\t\t\t\telse if (value == null) {\n\t\t\t\t\tlist[key] = [ '' ];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlist[key] = [ <string> value ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (typeof input === 'string') {\n\t\t\t// Parse the incoming string as a query string\n\t\t\tlist = parseQueryString(input);\n\t\t}\n\t\telse {\n\t\t\tlist = {};\n\t\t}\n\n\t\tObject.defineProperty(this, '_list', { value: list });\n\t}\n\n\t/**\n\t * Maps property keys to arrays of values. The value for any property that has been set will be an array containing\n\t * at least one item. Properties that have been deleted will have a value of 'undefined'.\n\t */\n\tprotected readonly _list: Hash<string[] | undefined>;\n\n\t/**\n\t * Appends a new value to the set of values for a key.\n\t * @param key The key to add a value for\n\t * @param value The value to add\n\t */\n\tappend(key: string, value: string): void {\n\t\tif (!this.has(key)) {\n\t\t\tthis.set(key, value);\n\t\t}\n\t\telse {\n\t\t\tconst values = this._list[key];\n\t\t\tif (values) {\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Deletes all values for a key.\n\t * @param key The key whose values are to be removed\n\t */\n\tdelete(key: string): void {\n\t\t// Set to undefined rather than deleting the key, for better consistency across browsers.\n\t\t// If a deleted key is re-added, most browsers put it at the end of iteration order, but IE maintains\n\t\t// its original position.  This approach maintains the original position everywhere.\n\t\tthis._list[key] = undefined;\n\t}\n\n\t/**\n\t * Returns the first value associated with a key.\n\t * @param key The key to return the first value for\n\t * @return The first string value for the key\n\t */\n\tget(key: string): string | undefined {\n\t\tif (!this.has(key)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst value = this._list[key];\n\t\treturn value ? value[0] : undefined;\n\t}\n\n\t/**\n\t * Returns all the values associated with a key.\n\t * @param key The key to return all values for\n\t * @return An array of strings containing all values for the key\n\t */\n\tgetAll(key: string): string[] | undefined {\n\t\tif (!this.has(key)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._list[key];\n\t}\n\n\t/**\n\t * Returns true if a key has been set to any value, false otherwise.\n\t * @param key The key to test for existence\n\t * @return A boolean indicating if the key has been set\n\t */\n\thas(key: string): boolean {\n\t\treturn Array.isArray(this._list[key]);\n\t}\n\n\t/**\n\t * Returns an array of all keys which have been set.\n\t * @return An array of strings containing all keys set in the UrlSearchParams instance\n\t */\n\tkeys(): string[] {\n\t\tconst keys: string[] = [];\n\n\t\tfor (const key in this._list) {\n\t\t\tif (this.has(key)) {\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\n\t\treturn keys;\n\t}\n\n\t/**\n\t * Sets the value associated with a key.\n\t * @param key The key to set the value of\n\t */\n\tset(key: string, value: string): void {\n\t\tthis._list[key] = [ value ];\n\t}\n\n\t/**\n\t * Returns this object's data as an encoded query string.\n\t * @return A string in application/x-www-form-urlencoded format containing all of the set keys/values\n\t */\n\ttoString(): string {\n\t\tconst query: string[] = [];\n\n\t\tfor (const key in this._list) {\n\t\t\tif (!this.has(key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst values = this._list[key];\n\t\t\tif (values) {\n\t\t\t\tconst encodedKey = encodeURIComponent(key);\n\t\t\t\tfor (let i = 0; i < values.length; i++) {\n\t\t\t\t\tquery.push(encodedKey + (values[i] ? ('=' + encodeURIComponent(values[i])) : ''));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn query.join('&');\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// UrlSearchParams.ts","import Task from '@dojo/core/async/Task';\nimport Evented, { BaseEventedEvents } from '@dojo/core/Evented';\nimport { PausableHandle } from '@dojo/core/on';\nimport UrlSearchParams from '@dojo/core/UrlSearchParams';\nimport { EventedListener, EventedOptions } from '@dojo/interfaces/bases';\nimport { EventErrorObject, EventTargettedObject, Handle, Hash } from '@dojo/interfaces/core';\nimport { Thenable } from '@dojo/interfaces/shim';\nimport { Constructor, RegistryLabel, WidgetBaseInterface } from '@dojo/widget-core/interfaces';\nimport { History } from './history/interfaces';\nimport { DeconstructedPath } from './lib/path';\n\n/**\n * Routes created without a `params()` function will receive a `params` object of this type.\n */\nexport interface DefaultParameters extends Parameters {\n\t[param: string]: string;\n}\n\n/**\n * Describes the context object used when dispatching. Extend this interface for custom contexts.\n */\nexport interface Context {\n\t// TODO: Does specifiying an indexer make sense here?\n}\n\n/**\n * Describes extracted parameters.\n */\nexport interface Parameters {\n\t[param: string]: any;\n}\n\n/**\n * Describes the object passed to various route handlers.\n */\nexport interface Request<C extends Context, P extends Parameters> {\n\t/**\n\t * The dispatch context.\n\t */\n\tcontext: C;\n\n\t/**\n\t * The extracted parameters.\n\t */\n\tparams: P;\n}\n\n/**\n * Component type\n */\nexport type Component<W extends WidgetBaseInterface = WidgetBaseInterface> = Constructor<W> | RegistryLabel;\n\n/**\n * Outlet component options\n */\nexport interface OutletComponents<W extends WidgetBaseInterface, I extends WidgetBaseInterface, E extends WidgetBaseInterface> {\n\tmain?: Component<W>;\n\tindex?: Component<I>;\n\terror?: Component<E>;\n}\n\n/**\n * Options for map params callback\n */\nexport interface MapParamsOptions {\n\tparams: any;\n\ttype: MatchType;\n\tlocation: string;\n\trouter: RouterInterface<any>;\n}\n\n/**\n * Interface for the map params callback\n */\nexport interface MapParams {\n\t(options: MapParamsOptions): any;\n}\n\n/**\n * Outlet properties\n */\nexport interface OutletProperties<W extends WidgetBaseInterface = WidgetBaseInterface, I extends WidgetBaseInterface = WidgetBaseInterface, E extends WidgetBaseInterface = WidgetBaseInterface> {\n\toutlet: string;\n\tmainComponent?: Component<W>;\n\tindexComponent?: Component<I>;\n\terrorComponent?: Component<E>;\n\tmapParams?: MapParams;\n}\n\n/**\n * An object to resume or cancel router dispatch.\n */\nexport interface DispatchDeferral {\n\t/**\n\t * Call to prevent a path from being dispatched.\n\t */\n\tcancel(): void;\n\n\t/**\n\t * Call to resume a path being dispatched.\n\t */\n\tresume(): void;\n}\n\n/**\n * Event object that is emitted for the 'navstart' event.\n */\nexport interface NavigationStartEvent extends EventTargettedObject<RouterInterface<Context>> {\n\t/**\n\t * The path that has been navigated to.\n\t */\n\tpath: string;\n\n\t/**\n\t * The context for the route\n\t */\n\tcontext: Context;\n\n\t/**\n\t * Call to prevent the path to be dispatched.\n\t */\n\tcancel?(): void;\n\n\t/**\n\t * Call to defer dispatching of the path\n\t * @return an object which allows the caller to resume or cancel dispatch.\n\t */\n\tdefer?(): DispatchDeferral;\n}\n\n/**\n * Event object that is emitted for the 'error' event.\n */\nexport interface ErrorEvent<C extends Context> extends EventErrorObject<RouterInterface<C>> {\n\t/**\n\t * The context that was being dispatched when the error occurred.\n\t */\n\tcontext: C;\n\n\t/**\n\t * The path that was being dispatched when the error occurred.\n\t */\n\tpath: string;\n}\n\nexport interface RouterEvents<C extends Context> extends BaseEventedEvents {\n\t/**\n\t * Event emitted when dispatch is called, but before routes are selected.\n\t */\n\t(type: 'navstart', listener: EventedListener<RouterInterface<C>, NavigationStartEvent>): Handle;\n\n\t/**\n\t * Event emitted when errors occur during dispatch.\n\t *\n\t * Certain errors may reject the task returned when dispatching, but this task is not always accessible and may\n\t * hide errors if it's canceled.\n\t */\n\t(type: 'error', listener: EventedListener<RouterInterface<C>, ErrorEvent<C>>): Handle;\n}\n\n/**\n * Config for registering routes\n */\nexport interface RouteConfig {\n\t/**\n\t * The path of the route\n\t */\n\tpath: string;\n\n\t/**\n\t * The optional outlet associated to the path\n\t */\n\toutlet?: string;\n\n\t/**\n\t * Optional child route configuration\n\t */\n\tchildren?: RouteConfig[];\n\n\t/**\n\t * Default params used to generate a link\n\t */\n\tdefaultParams?: any;\n\n\t/**\n\t * To be used as the default route on router start up\n\t * if the current route doesn't match\n\t */\n\tdefaultRoute?: boolean;\n}\n\n/**\n * Describes the result of a dispatch.\n */\nexport interface DispatchResult {\n\t/**\n\t * Whether a route requested a redirect to a different path.\n\t */\n\tredirect?: string;\n\n\t/**\n\t * False if dispatch was canceled (via the navstart event) or if no routes could be selected. True otherwise.\n\t */\n\tsuccess: boolean;\n}\n\nexport type LinkParams = Hash<string | string[] | undefined>;\n\n/**\n * The options for the router.\n */\nexport interface RouterOptions<C extends Context> extends EventedOptions {\n\t/**\n\t * A Context object to be used for all requests, or a function that provides such an object, called for each\n\t * dispatch.\n\t */\n\tcontext?: C | (() => C);\n\n\t/**\n\t * A handler called when no routes match the dispatch path.\n\t * @param request An object whose `context` property contains the dispatch context. No extracted parameters\n\t *   are available.\n\t */\n\tfallback?: (request: Request<C, Parameters>) => void | Thenable<any>;\n\n\t/**\n\t * The history manager. Routes will be dispatched in response to change events emitted by the manager.\n\t */\n\thistory?: History;\n\n\t/**\n\t * Routing configuration to set up on router creation\n\t */\n\tconfig?: RouteConfig[];\n}\n\n/**\n * The options for the router's start() method.\n */\nexport interface StartOptions {\n\t/**\n\t * Whether to immediately dispatch with the history's current value.\n\t */\n\tdispatchCurrent: boolean;\n}\n\n/**\n * The outlet context\n */\nexport interface OutletContext {\n\t/**\n\t * The type of match for the outlet\n\t */\n\ttype: MatchType;\n\n\t/**\n\t * The location of the route (link)\n\t */\n\tlocation: string;\n\n\t/**\n\t * The params for the specific outlet\n\t */\n\tparams: any;\n}\n\nexport interface RouterInterface<C extends Context> extends Evented {\n\ton: RouterEvents<C>;\n\n\tregister(config: RouteConfig[], from: string | RouterInterface<any> | RouteInterface<any, any>): void;\n\n\tappend(add: RouteInterface<Context, Parameters> | RouteInterface<Context, Parameters>[]): void;\n\n\tdispatch(context: Context, path: string): Task<DispatchResult>;\n\n\tlink(routeOrOutlet: RouteInterface<Context, Parameters> | string, params?: LinkParams): string;\n\n\treplacePath(path: string): void;\n\n\tsetPath(path: string): void;\n\n\thasOutlet(outletId: string): boolean;\n\n\tgetOutlet(outletId: string): OutletContext | undefined;\n\n\tgetCurrentParams(): Parameters;\n\n\tstart(startOptions: StartOptions): PausableHandle;\n}\n\n/**\n * Hash object where keys are parameter names and keys are arrays of one or more\n * parameter values.\n */\nexport type SearchParams = Hash<string[]>;\n\n/**\n * Describes whether a route matched.\n */\nexport interface MatchResult<P> {\n\t/**\n\t * Whether there are path segments that weren't matched by this route.\n\t */\n\thasRemaining: boolean;\n\n\t/**\n\t * Position in the segments array that the remaining unmatched segments start.\n\t */\n\toffset: number;\n\n\t/**\n\t * Any extracted parameters. Only available if the route matched.\n\t */\n\tparams: P;\n\n\t/**\n\t * Values for named segments in the path, in order of occurrence.\n\t */\n\trawPathValues: string[];\n\n\t/**\n\t * Values for known named query parameters that were actually present in the\n\t * path.\n\t */\n\trawSearchParams: SearchParams;\n}\n\n/**\n * The type of match for a route\n */\nexport enum MatchType {\n\tINDEX = 0,\n\tPARTIAL,\n\tERROR\n}\n\n/**\n * A request handler.\n */\nexport type Handler = (request: Request<Context, Parameters>) => void | Thenable<any>;\n\n/**\n * Describes the selection of a particular route.\n */\nexport interface Selection {\n\t/**\n\t * Which handler should be called when the route is executed.\n\t */\n\thandler: Handler;\n\n\t/**\n\t * The selected path.\n\t */\n\tpath: DeconstructedPath;\n\n\t/**\n\t * The selected outlet\n\t */\n\toutlet: string | undefined;\n\n\t/**\n\t * The extracted parameters.\n\t */\n\tparams: Parameters;\n\n\t/**\n\t * Values for named segments in the path, in order of occurrence.\n\t */\n\trawPathValues: string[];\n\n\t/**\n\t * Values for known named query parameters that were actually present in the\n\t * path.\n\t */\n\trawSearchParams: SearchParams;\n\n\t/**\n\t * The selected route.\n\t */\n\troute: RouteInterface<Context, Parameters>;\n\n\t/**\n\t * The selection type\n\t */\n\ttype: MatchType;\n}\n\nexport interface RouteInterface<C extends Context, P extends Parameters> {\n\treadonly parent: RouteInterface<Context, Parameters> | undefined;\n\treadonly path: DeconstructedPath;\n\treadonly outlet: string | undefined;\n\treadonly defaultParams: P;\n\n\tappend(add: RouteInterface<Context, Parameters> | RouteInterface<Context, Parameters>[]): void;\n\tlink(params?: LinkParams): string;\n\tmatch(segments: string[], hasTrailingSlash: boolean, searchParams: UrlSearchParams): null | MatchResult<DefaultParameters | P>;\n\tselect(context: C, segments: string[], hasTrailingSlash: boolean, searchParams: UrlSearchParams): string | Selection[];\n}\n\n\n\n// WEBPACK FOOTER //\n// interfaces.ts","import WeakMap from '@dojo/shim/WeakMap';\nimport { WidgetBase } from './../WidgetBase';\nimport { handleDecorator } from './handleDecorator';\nimport { Injector } from './../Injector';\nimport { beforeProperties } from './beforeProperties';\nimport { RegistryLabel } from './../interfaces';\n\n/**\n * Map of instances against registered injectors.\n */\nconst registeredInjectorsMap: WeakMap<WidgetBase, Injector[]> = new WeakMap();\n\n/**\n * Defines the contract requires for the get properties function\n * used to map the injected properties.\n */\nexport interface GetProperties<T = any> {\n\t(payload: any, properties: T): T;\n}\n\n/**\n * Defines the inject configuration required for use of the `inject` decorator\n */\nexport interface InjectConfig {\n\n\t/**\n\t * The label of the registry injector\n\t */\n\tname: RegistryLabel;\n\n\t/**\n\t * Function that returns propertues to inject using the passed properties\n\t * and the injected payload.\n\t */\n\tgetProperties: GetProperties;\n}\n\n/**\n * Decorator retrieves an injector from an available registry using the name and\n * calls the `getProperties` function with the payload from the injector\n * and current properties with the the injected properties returned.\n *\n * @param InjectConfig the inject configuration\n */\nexport function inject({ name, getProperties }: InjectConfig) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\tbeforeProperties(function(this: WidgetBase, properties: any) {\n\t\t\tconst injector = this.registry.getInjector(name);\n\t\t\tif (injector) {\n\t\t\t\tconst registeredInjectors = registeredInjectorsMap.get(this) || [];\n\t\t\t\tif (registeredInjectors.length === 0) {\n\t\t\t\t\tregisteredInjectorsMap.set(this, registeredInjectors);\n\t\t\t\t}\n\t\t\t\tif (registeredInjectors.indexOf(injector) === -1) {\n\t\t\t\t\tinjector.on('invalidate', () => {\n\t\t\t\t\t\tthis.invalidate();\n\t\t\t\t\t});\n\t\t\t\t\tregisteredInjectors.push(injector);\n\t\t\t\t}\n\t\t\t\treturn getProperties(injector.get(), properties);\n\t\t\t}\n\t\t})(target);\n\t});\n}\n\nexport default inject;\n\n\n\n// WEBPACK FOOTER //\n// inject.ts","import { WidgetBase } from './WidgetBase';\nimport { inject, GetProperties } from './decorators/inject';\nimport { Constructor, DNode, RegistryLabel } from './interfaces';\nimport { w } from './d';\n\nexport type Container<T extends WidgetBase> = Constructor<WidgetBase<Partial<T['properties']>>>;\n\nexport function Container<W extends WidgetBase> (\n\tcomponent: Constructor<W> | RegistryLabel,\n\tname: RegistryLabel,\n\t{ getProperties }: { getProperties: GetProperties }\n): Container<W> {\n\t@inject({ name, getProperties })\n\tclass WidgetContainer extends WidgetBase<Partial<W['properties']>> {\n\t\tpublic __setProperties__(properties: Partial<W['properties']>): void {\n\t\t\tsuper.__setProperties__(properties as any);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tprotected render(): DNode {\n\t\t\treturn w(component, this.properties, this.children);\n\t\t}\n\t}\n\treturn WidgetContainer;\n}\n\nexport default Container;\n\n\n\n// WEBPACK FOOTER //\n// Container.ts","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 25\n// module chunks = 0","import global from '@dojo/shim/global';\nimport {\n\tCoreProperties,\n\tDefaultWidgetBaseInterface,\n\tDNode,\n\tHNode,\n\tWNode,\n\tProjectionOptions,\n\tProjection,\n\tSupportedClassName,\n\tTransitionStrategy,\n\tVirtualDomProperties\n} from './interfaces';\nimport { from as arrayFrom } from '@dojo/shim/array';\nimport { isWNode, isHNode, HNODE } from './d';\nimport { isWidgetBaseConstructor } from './Registry';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport NodeHandler from './NodeHandler';\nimport RegistryHandler from './RegistryHandler';\n\nconst NAMESPACE_W3 = 'http://www.w3.org/';\nconst NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\nconst NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\n\nconst emptyArray: (InternalWNode | InternalHNode)[] = [];\n\nexport type RenderResult = DNode<any> | DNode<any>[];\n\nexport interface InternalWNode extends WNode<DefaultWidgetBaseInterface> {\n\n\t/**\n\t * The instance of the widget\n\t */\n\tinstance: DefaultWidgetBaseInterface;\n\n\t/**\n\t * The rendered DNodes from the instance\n\t */\n\trendered: InternalDNode[];\n\n\t/**\n\t * Core properties that are used by the widget core system\n\t */\n\tcoreProperties: CoreProperties;\n\n\t/**\n\t * Children for the WNode\n\t */\n\tchildren: InternalDNode[];\n}\n\nexport interface InternalHNode extends HNode {\n\n\t/**\n\t * Children for the HNode\n\t */\n\tchildren?: InternalDNode[];\n\n\tinserted?: boolean;\n\n\t/**\n\t * Bag used to still decorate properties on a deferred properties callback\n\t */\n\tdecoratedDeferredProperties?: VirtualDomProperties;\n\n\t/**\n\t * DOM element\n\t */\n\tdomNode?: Element | Text;\n}\n\nexport type InternalDNode = InternalHNode | InternalWNode;\n\nexport interface WidgetData {\n\tonElementCreated: Function;\n\tonElementUpdated: Function;\n\tonDetach: () => void;\n\tonAttach: () => void;\n\tparentInvalidate?: Function;\n\tdirty: boolean;\n\tregistry: () => RegistryHandler;\n\tnodeHandler: NodeHandler;\n\tcoreProperties: CoreProperties;\n\tinvalidate: Function;\n}\n\nexport const widgetInstanceMap = new WeakMap<any, WidgetData>();\n\nfunction same(dnode1: InternalDNode, dnode2: InternalDNode) {\n\tif (isHNode(dnode1) && isHNode(dnode2)) {\n\t\tif (dnode1.tag !== dnode2.tag) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.properties.key !== dnode2.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\telse if (isWNode(dnode1) && isWNode(dnode2)) {\n\t\tif (dnode1.widgetConstructor !== dnode2.widgetConstructor) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.properties.key !== dnode2.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nconst missingTransition = function() {\n\tthrow new Error('Provide a transitions object to the projectionOptions to do animations');\n};\n\nfunction getProjectionOptions(projectorOptions?: Partial<ProjectionOptions>): ProjectionOptions {\n\tconst defaults = {\n\t\tnamespace: undefined,\n\t\tstyleApplyer: function(domNode: HTMLElement, styleName: string, value: string) {\n\t\t\t(domNode.style as any)[styleName] = value;\n\t\t},\n\t\ttransitions: {\n\t\t\tenter: missingTransition,\n\t\t\texit: missingTransition\n\t\t},\n\t\tdeferredRenderCallbacks: [],\n\t\tafterRenderCallbacks: [],\n\t\tnodeMap: new WeakMap(),\n\t\tmerge: false\n\t};\n\treturn { ...defaults, ...projectorOptions } as ProjectionOptions;\n}\n\nfunction checkStyleValue(styleValue: Object) {\n\tif (typeof styleValue !== 'string') {\n\t\tthrow new Error('Style values must be strings');\n\t}\n}\n\nfunction updateEvents(\n\tdomNode: Node,\n\tpropName: string,\n\tproperties: VirtualDomProperties,\n\tprojectionOptions: ProjectionOptions,\n\tpreviousProperties?: VirtualDomProperties\n) {\n\tconst previous = previousProperties || Object.create(null);\n\tconst currentValue = properties[propName];\n\tconst previousValue = previous[propName];\n\n\tconst eventName = propName.substr(2);\n\tconst eventMap = projectionOptions.nodeMap.get(domNode) || new WeakMap();\n\n\tif (previousValue) {\n\t\tconst previousEvent = eventMap.get(previousValue);\n\t\tdomNode.removeEventListener(eventName, previousEvent);\n\t}\n\n\tlet callback = currentValue.bind(properties.bind);\n\n\tif (eventName === 'input') {\n\t\tcallback = function(this: any, evt: Event) {\n\t\t\tcurrentValue.call(this, evt);\n\t\t\t(evt.target as any)['oninput-value'] = (evt.target as HTMLInputElement).value;\n\t\t}.bind(properties.bind);\n\t}\n\n\tdomNode.addEventListener(eventName, callback);\n\teventMap.set(currentValue, callback);\n\tprojectionOptions.nodeMap.set(domNode, eventMap);\n}\n\nfunction addClasses(domNode: Node, classes: SupportedClassName) {\n\tif (classes) {\n\t\tconst classNames = classes.split(' ');\n\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\t(domNode as Element).classList.add(classNames[i]);\n\t\t}\n\t}\n}\n\nfunction removeClasses(domNode: Node, classes: SupportedClassName) {\n\tif (classes) {\n\t\tconst classNames = classes.split(' ');\n\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\t(domNode as Element).classList.remove(classNames[i]);\n\t\t}\n\t}\n}\n\nfunction setProperties(domNode: Node, properties: VirtualDomProperties, projectionOptions: ProjectionOptions) {\n\tconst propNames = Object.keys(properties);\n\tconst propCount = propNames.length;\n\tfor (let i = 0; i < propCount; i++) {\n\t\tconst propName = propNames[i];\n\t\tlet propValue = properties[propName];\n\t\tif (propName === 'classes') {\n\t\t\tconst currentClasses = Array.isArray(propValue) ? propValue : [ propValue ];\n\t\t\tif (!(domNode as Element).className) {\n\t\t\t\t(domNode as Element).className = currentClasses.join(' ').trim();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (let i = 0; i < currentClasses.length; i++) {\n\t\t\t\t\taddClasses(domNode, currentClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (propName === 'styles') {\n\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\tconst styleCount = styleNames.length;\n\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\tconst styleValue = propValue[styleName];\n\t\t\t\tif (styleValue) {\n\t\t\t\t\tcheckStyleValue(styleValue);\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, styleValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (propName !== 'key' && propValue !== null && propValue !== undefined) {\n\t\t\tconst type = typeof propValue;\n\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0) {\n\t\t\t\tupdateEvents(domNode, propName, properties, projectionOptions);\n\t\t\t}\n\t\t\telse if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\n\t\t\t\tif (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n\t\t\t\t\t(domNode as Element).setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t(domNode as Element).setAttribute(propName, propValue);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction removeOrphanedEvents(\n\tdomNode: Node,\n\tpreviousProperties: VirtualDomProperties,\n\tproperties: VirtualDomProperties,\n\tprojectionOptions: ProjectionOptions\n) {\n\tconst eventMap = projectionOptions.nodeMap.get(domNode);\n\tif (eventMap) {\n\t\tObject.keys(previousProperties).forEach((propName) => {\n\t\t\tif (propName.substr(0, 2) === 'on' && !properties[propName]) {\n\t\t\t\tconst eventCallback = eventMap.get(previousProperties[propName]);\n\t\t\t\tif (eventCallback) {\n\t\t\t\t\tdomNode.removeEventListener(propName.substr(2), eventCallback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction updateProperties(\n\tdomNode: Node,\n\tpreviousProperties: VirtualDomProperties,\n\tproperties: VirtualDomProperties,\n\tprojectionOptions: ProjectionOptions\n) {\n\tlet propertiesUpdated = false;\n\tconst propNames = Object.keys(properties);\n\tconst propCount = propNames.length;\n\tif (propNames.indexOf('classes') === -1 && previousProperties.classes) {\n\t\tif (Array.isArray(previousProperties.classes)) {\n\t\t\tfor (let i = 0; i < previousProperties.classes.length; i++) {\n\t\t\t\tremoveClasses(domNode, previousProperties.classes[i]);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tremoveClasses(domNode, previousProperties.classes);\n\t\t}\n\t}\n\n\tremoveOrphanedEvents(domNode, previousProperties, properties, projectionOptions);\n\n\tfor (let i = 0; i < propCount; i++) {\n\t\tconst propName = propNames[i];\n\t\tlet propValue = properties[propName];\n\t\tconst previousValue = previousProperties![propName];\n\t\tif (propName === 'classes') {\n\t\t\tconst previousClasses = Array.isArray(previousValue) ? previousValue : [ previousValue ];\n\t\t\tconst currentClasses = Array.isArray(propValue) ? propValue : [ propValue ];\n\t\t\tif (previousClasses && previousClasses.length > 0) {\n\t\t\t\tif (!propValue || propValue.length === 0) {\n\t\t\t\t\tfor (let i = 0; i < previousClasses.length; i++) {\n\t\t\t\t\t\tremoveClasses(domNode, previousClasses[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst newClasses: (null | undefined | string)[] = [ ...currentClasses ];\n\t\t\t\t\tfor (let i = 0; i < previousClasses.length; i++) {\n\t\t\t\t\t\tconst previousClassName = previousClasses[i];\n\t\t\t\t\t\tif (previousClassName) {\n\t\t\t\t\t\t\tconst classIndex = newClasses.indexOf(previousClassName);\n\t\t\t\t\t\t\tif (classIndex === -1) {\n\t\t\t\t\t\t\t\tremoveClasses(domNode, previousClassName);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnewClasses.splice(classIndex, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < newClasses.length; i++) {\n\t\t\t\t\t\taddClasses(domNode, newClasses[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (let i = 0; i < currentClasses.length; i++) {\n\t\t\t\t\taddClasses(domNode, currentClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (propName === 'styles') {\n\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\tconst styleCount = styleNames.length;\n\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\tconst newStyleValue = propValue[styleName];\n\t\t\t\tconst oldStyleValue = previousValue[styleName];\n\t\t\t\tif (newStyleValue === oldStyleValue) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tpropertiesUpdated = true;\n\t\t\t\tif (newStyleValue) {\n\t\t\t\t\tcheckStyleValue(newStyleValue);\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, newStyleValue);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (!propValue && typeof previousValue === 'string') {\n\t\t\t\tpropValue = '';\n\t\t\t}\n\t\t\tif (propName === 'value') {\n\t\t\t\tconst domValue = (domNode as any)[propName];\n\t\t\t\tif (\n\t\t\t\t\tdomValue !== propValue\n\t\t\t\t\t&& ((domNode as any)['oninput-value']\n\t\t\t\t\t\t? domValue === (domNode as any)['oninput-value']\n\t\t\t\t\t\t: propValue !== previousValue\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t(domNode as any)['oninput-value'] = undefined;\n\t\t\t\t}\n\t\t\t\tif (propValue !== previousValue) {\n\t\t\t\t\tpropertiesUpdated = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (propValue !== previousValue) {\n\t\t\t\tconst type = typeof propValue;\n\t\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0) {\n\t\t\t\t\tupdateEvents(domNode, propName, properties, projectionOptions, previousProperties);\n\t\t\t\t}\n\t\t\t\telse if (type === 'string' && propName !== 'innerHTML') {\n\t\t\t\t\tif (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n\t\t\t\t\t\t(domNode as Element).setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n\t\t\t\t\t}\n\t\t\t\t\telse if (propName === 'role' && propValue === '') {\n\t\t\t\t\t\t(domNode as any).removeAttribute(propName);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t(domNode as Element).setAttribute(propName, propValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif ((domNode as any)[propName] !== propValue) { // Comparison is here for side-effects in Edge with scrollLeft and scrollTop\n\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpropertiesUpdated = true;\n\t\t\t}\n\t\t}\n\t}\n\treturn propertiesUpdated;\n}\n\nfunction findIndexOfChild(children: InternalDNode[], sameAs: InternalDNode, start: number) {\n\tfor (let i = start; i < children.length; i++) {\n\t\tif (same(children[i], sameAs)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\nexport function toTextHNode(data: any): InternalHNode {\n\treturn {\n\t\ttag: '',\n\t\tproperties: {},\n\t\tchildren: undefined,\n\t\ttext: `${data}`,\n\t\tdomNode: undefined,\n\t\ttype: HNODE\n\t};\n}\n\nexport function filterAndDecorateChildren(children: undefined | DNode | DNode[], instance: DefaultWidgetBaseInterface): InternalDNode[] {\n\tif (children === undefined) {\n\t\treturn emptyArray;\n\t}\n\tchildren = Array.isArray(children) ? children : [ children ];\n\n\tfor (let i = 0; i < children.length; ) {\n\t\tconst child = children[i] as InternalDNode;\n\t\tif (child === undefined || child === null) {\n\t\t\tchildren.splice(i, 1);\n\t\t\tcontinue;\n\t\t}\n\t\telse if (typeof child === 'string') {\n\t\t\tchildren[i] = toTextHNode(child);\n\t\t}\n\t\telse {\n\t\t\tif (isHNode(child)) {\n\t\t\t\tif (child.properties.bind === undefined) {\n\t\t\t\t\t(child.properties as any).bind = instance;\n\t\t\t\t\tif (child.children && child.children.length > 0) {\n\t\t\t\t\t\tfilterAndDecorateChildren(child.children, instance);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!child.coreProperties) {\n\t\t\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\t\t\tchild.coreProperties = {\n\t\t\t\t\t\tbind: instance,\n\t\t\t\t\t\tbaseRegistry: instanceData.coreProperties.baseRegistry\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (child.children && child.children.length > 0) {\n\t\t\t\t\tfilterAndDecorateChildren(child.children, instance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ti++;\n\t}\n\treturn children as InternalDNode[];\n}\n\nfunction hasRenderChanged(previousRendered: InternalDNode[], rendered: InternalDNode | InternalDNode[]): boolean {\n\tconst arrayRender = Array.isArray(rendered);\n\tif (arrayRender) {\n\t\treturn previousRendered !== rendered;\n\t}\n\telse {\n\t\treturn Array.isArray(previousRendered) && previousRendered[0] !== rendered;\n\t}\n}\n\nfunction nodeAdded(dnode: InternalDNode, transitions: TransitionStrategy) {\n\tif (isHNode(dnode) && dnode.properties) {\n\t\tconst enterAnimation = dnode.properties.enterAnimation;\n\t\tif (enterAnimation) {\n\t\t\tif (typeof enterAnimation === 'function') {\n\t\t\t\tenterAnimation(dnode.domNode as Element, dnode.properties);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttransitions.enter(dnode.domNode as Element, dnode.properties, enterAnimation as string);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction callOnDetach(dNodes: InternalDNode | InternalDNode[], parentInstance: DefaultWidgetBaseInterface): void {\n\tdNodes = Array.isArray(dNodes) ? dNodes : [ dNodes ];\n\tfor (let i = 0; i < dNodes.length; i++) {\n\t\tconst dNode = dNodes[i];\n\t\tif (isWNode(dNode)) {\n\t\t\tcallOnDetach(dNode.rendered, dNode.instance);\n\t\t\tconst instanceData = widgetInstanceMap.get(dNode.instance)!;\n\t\t\tinstanceData.onDetach();\n\t\t}\n\t\telse {\n\t\t\tif (dNode.children) {\n\t\t\t\tcallOnDetach(dNode.children as InternalDNode[], parentInstance);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction nodeToRemove(dnode: InternalDNode, transitions: TransitionStrategy, projectionOptions: ProjectionOptions) {\n\tif (isWNode(dnode)) {\n\t\tconst rendered = dnode.rendered || emptyArray;\n\t\tfor (let i = 0; i < rendered.length; i++) {\n\t\t\tconst child = rendered[i];\n\t\t\tif (isHNode(child)) {\n\t\t\t\tchild.domNode!.parentNode!.removeChild(child.domNode!);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnodeToRemove(child, transitions, projectionOptions);\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconst domNode = dnode.domNode;\n\t\tconst properties = dnode.properties;\n\t\tconst exitAnimation = properties.exitAnimation;\n\t\tif (properties && exitAnimation) {\n\t\t\t(domNode as HTMLElement).style.pointerEvents = 'none';\n\t\t\tconst removeDomNode = function() {\n\t\t\t\tdomNode && domNode.parentNode && domNode.parentNode.removeChild(domNode);\n\t\t\t};\n\t\t\tif (typeof exitAnimation === 'function') {\n\t\t\t\texitAnimation(domNode as Element, removeDomNode, properties);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttransitions.exit(dnode.domNode as Element, properties, exitAnimation as string, removeDomNode);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdomNode && domNode.parentNode && domNode.parentNode.removeChild(domNode);\n\t}\n}\n\nfunction checkDistinguishable(childNodes: InternalDNode[], indexToCheck: number, parentNode: Element, operation: string) {\n\tconst childNode = childNodes[indexToCheck];\n\tif (isHNode(childNode) && childNode.tag === '') {\n\t\treturn; // Text nodes need not be distinguishable\n\t}\n\tconst properties = childNode.properties;\n\tconst key = properties && properties.key;\n\n\tif (!key) {\n\t\tfor (let i = 0; i < childNodes.length; i++) {\n\t\t\tif (i !== indexToCheck) {\n\t\t\t\tconst node = childNodes[i];\n\t\t\t\tif (same(node, childNode)) {\n\t\t\t\t\tif (isWNode(childNode)) {\n\t\t\t\t\t\tconst widgetName = (childNode.widgetConstructor as any).name;\n\t\t\t\t\t\tlet errorMsg = 'It is recommended to provide a unique \\'key\\' property when using the same widget multiple times as siblings';\n\n\t\t\t\t\t\tif (widgetName) {\n\t\t\t\t\t\t\terrorMsg = `It is recommended to provide a unique 'key' property when using the same widget (${widgetName}) multiple times as siblings`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.warn(errorMsg);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (operation === 'added') {\n\t\t\t\t\t\t\tthrow new Error(parentNode.tagName + ' had a ' + childNode.tag + ' child ' +\n\t\t\t\t\t\t\t\t'added, but there is now more than one. You must add unique key properties to make them distinguishable.');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthrow new Error(parentNode.tagName + ' had a ' + childNode.tag + ' child ' +\n\t\t\t\t\t\t\t\t'removed, but there were more than one. You must add unique key properties to make them distinguishable.');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction updateChildren(\n\tdomNode: Element,\n\toldChildren: InternalDNode[],\n\tnewChildren: InternalDNode[],\n\tparentInstance: DefaultWidgetBaseInterface,\n\tprojectionOptions: ProjectionOptions\n) {\n\toldChildren = oldChildren || emptyArray;\n\tnewChildren = newChildren;\n\tconst oldChildrenLength = oldChildren.length;\n\tconst newChildrenLength = newChildren.length;\n\tconst transitions = projectionOptions.transitions!;\n\n\tlet oldIndex = 0;\n\tlet newIndex = 0;\n\tlet i: number;\n\tlet textUpdated = false;\n\twhile (newIndex < newChildrenLength) {\n\t\tconst oldChild = (oldIndex < oldChildrenLength) ? oldChildren[oldIndex] : undefined;\n\t\tconst newChild = newChildren[newIndex];\n\n\t\tif (oldChild !== undefined && same(oldChild, newChild)) {\n\t\t\ttextUpdated = updateDom(oldChild, newChild, projectionOptions, domNode, parentInstance) || textUpdated;\n\t\t\toldIndex++;\n\t\t}\n\t\telse {\n\t\t\tconst findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\n\t\t\tif (findOldIndex >= 0) {\n\t\t\t\tfor (i = oldIndex; i < findOldIndex; i++) {\n\t\t\t\t\tconst oldChild = oldChildren[i];\n\t\t\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\t\t\tcallOnDetach(oldChild, parentInstance);\n\t\t\t\t\t});\n\t\t\t\t\tnodeToRemove(oldChild, transitions, projectionOptions);\n\t\t\t\t\tcheckDistinguishable(oldChildren, i, domNode, 'removed');\n\t\t\t\t}\n\t\t\t\ttextUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions, domNode, parentInstance) || textUpdated;\n\t\t\t\toldIndex = findOldIndex + 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet insertBefore: Node | undefined = undefined;\n\t\t\t\tlet child: InternalDNode = oldChildren[oldIndex];\n\t\t\t\tif (child) {\n\t\t\t\t\tlet nextIndex = oldIndex + 1;\n\t\t\t\t\twhile (insertBefore === undefined) {\n\t\t\t\t\t\tif (isWNode(child)) {\n\t\t\t\t\t\t\tif (child.rendered) {\n\t\t\t\t\t\t\t\tchild = child.rendered[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (oldChildren[nextIndex]) {\n\t\t\t\t\t\t\t\tchild = oldChildren[nextIndex];\n\t\t\t\t\t\t\t\tnextIndex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tinsertBefore = child.domNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreateDom(newChild, domNode, insertBefore, projectionOptions, parentInstance);\n\t\t\t\tnodeAdded(newChild, transitions);\n\t\t\t\tcheckDistinguishable(newChildren, newIndex, domNode, 'added');\n\t\t\t}\n\t\t}\n\t\tnewIndex++;\n\t}\n\tif (oldChildrenLength > oldIndex) {\n\t\t// Remove child fragments\n\t\tfor (i = oldIndex; i < oldChildrenLength; i++) {\n\t\t\tconst oldChild = oldChildren[i];\n\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\tcallOnDetach(oldChild, parentInstance);\n\t\t\t});\n\t\t\tnodeToRemove(oldChild, transitions, projectionOptions);\n\t\t\tcheckDistinguishable(oldChildren, i, domNode, 'removed');\n\t\t}\n\t}\n\treturn textUpdated;\n}\n\nfunction addChildren(\n\tdomNode: Node,\n\tchildren: InternalDNode[] | undefined,\n\tprojectionOptions: ProjectionOptions,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tinsertBefore: undefined | Node = undefined,\n\tchildNodes?: Node[]\n) {\n\tif (children === undefined) {\n\t\treturn;\n\t}\n\n\tif (projectionOptions.merge && childNodes === undefined) {\n\t\tchildNodes = arrayFrom(domNode.childNodes);\n\t}\n\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst child = children[i];\n\n\t\tif (isHNode(child)) {\n\t\t\tif (projectionOptions.merge && childNodes) {\n\t\t\t\tlet domElement: HTMLElement | undefined = undefined;\n\t\t\t\twhile (child.domNode === undefined && childNodes.length > 0) {\n\t\t\t\t\tdomElement = childNodes.shift() as HTMLElement;\n\t\t\t\t\tif (domElement && domElement.tagName === (child.tag.toUpperCase() || undefined)) {\n\t\t\t\t\t\tchild.domNode = domElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcreateDom(child, domNode, insertBefore, projectionOptions, parentInstance);\n\t\t}\n\t\telse {\n\t\t\tcreateDom(child, domNode, insertBefore, projectionOptions, parentInstance, childNodes);\n\t\t}\n\t}\n}\n\nfunction initPropertiesAndChildren(\n\tdomNode: Node,\n\tdnode: InternalHNode,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tprojectionOptions: ProjectionOptions\n) {\n\taddChildren(domNode, dnode.children, projectionOptions, parentInstance, undefined);\n\tif (typeof dnode.deferredPropertiesCallback === 'function') {\n\t\taddDeferredProperties(dnode, projectionOptions);\n\t}\n\tsetProperties(domNode, dnode.properties, projectionOptions);\n\tif (dnode.properties.key !== null && dnode.properties.key !== undefined) {\n\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\tinstanceData.nodeHandler.add(domNode as HTMLElement, `${dnode.properties.key}`);\n\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onElementCreated(domNode as HTMLElement, dnode.properties.key as any);\n\t\t});\n\t}\n\tdnode.inserted = true;\n}\n\nfunction createDom(\n\tdnode: InternalDNode,\n\tparentNode: Node,\n\tinsertBefore: Node | undefined,\n\tprojectionOptions: ProjectionOptions,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tchildNodes?: Node[]\n) {\n\tlet domNode: Node | undefined;\n\tif (isWNode(dnode)) {\n\t\tlet { widgetConstructor } = dnode;\n\t\tconst parentInstanceData = widgetInstanceMap.get(parentInstance)!;\n\t\tif (!isWidgetBaseConstructor<DefaultWidgetBaseInterface>(widgetConstructor)) {\n\t\t\tconst item = parentInstanceData.registry().get<DefaultWidgetBaseInterface>(widgetConstructor);\n\t\t\tif (item === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twidgetConstructor = item;\n\t\t}\n\t\tconst instance = new widgetConstructor();\n\t\tdnode.instance = instance;\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.parentInvalidate = parentInstanceData.invalidate;\n\t\tinstance.__setCoreProperties__(dnode.coreProperties);\n\t\tinstance.__setChildren__(dnode.children);\n\t\tinstance.__setProperties__(dnode.properties);\n\t\tconst rendered = instance.__render__();\n\t\tif (rendered) {\n\t\t\tconst filteredRendered = filterAndDecorateChildren(rendered, instance);\n\t\t\tdnode.rendered = filteredRendered;\n\t\t\taddChildren(parentNode, filteredRendered, projectionOptions, instance, insertBefore, childNodes);\n\t\t}\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t}\n\telse {\n\t\tif (projectionOptions.merge && projectionOptions.mergeElement !== undefined) {\n\t\t\tdomNode = dnode.domNode = projectionOptions.mergeElement;\n\t\t\tprojectionOptions.mergeElement = undefined;\n\t\t\tinitPropertiesAndChildren(domNode!, dnode, parentInstance, projectionOptions);\n\t\t\treturn;\n\t\t}\n\t\tconst doc = parentNode.ownerDocument;\n\t\tif (dnode.tag === '') {\n\t\t\tif (dnode.domNode !== undefined) {\n\t\t\t\tconst newDomNode = dnode.domNode.ownerDocument.createTextNode(dnode.text!);\n\t\t\t\tdnode.domNode.parentNode!.replaceChild(newDomNode, dnode.domNode);\n\t\t\t\tdnode.domNode = newDomNode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdomNode = dnode.domNode = doc.createTextNode(dnode.text!);\n\t\t\t\tif (insertBefore !== undefined) {\n\t\t\t\t\tparentNode.insertBefore(domNode, insertBefore);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tparentNode.appendChild(domNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (dnode.domNode === undefined) {\n\t\t\t\tif (dnode.tag === 'svg') {\n\t\t\t\t\tprojectionOptions = { ...projectionOptions, ...{ namespace: NAMESPACE_SVG } };\n\t\t\t\t}\n\t\t\t\tif (projectionOptions.namespace !== undefined) {\n\t\t\t\t\tdomNode = dnode.domNode = doc.createElementNS(projectionOptions.namespace, dnode.tag);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdomNode = dnode.domNode = (dnode.domNode || doc.createElement(dnode.tag));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdomNode = dnode.domNode;\n\t\t\t}\n\t\t\tif (insertBefore !== undefined) {\n\t\t\t\tparentNode.insertBefore(domNode, insertBefore);\n\t\t\t}\n\t\t\telse if (domNode!.parentNode !== parentNode) {\n\t\t\t\tparentNode.appendChild(domNode);\n\t\t\t}\n\t\t\tinitPropertiesAndChildren(domNode!, dnode, parentInstance, projectionOptions);\n\t\t}\n\t}\n}\n\nfunction updateDom(previous: any, dnode: InternalDNode, projectionOptions: ProjectionOptions, parentNode: Element, parentInstance: DefaultWidgetBaseInterface) {\n\tif (isWNode(dnode)) {\n\t\tconst { instance, rendered: previousRendered } = previous;\n\t\tif (instance && previousRendered) {\n\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\tinstance.__setCoreProperties__(dnode.coreProperties);\n\t\t\tinstance.__setChildren__(dnode.children);\n\t\t\tinstance.__setProperties__(dnode.properties);\n\t\t\tdnode.instance = instance;\n\t\t\tconst rendered = instance.__render__();\n\t\t\tdnode.rendered = filterAndDecorateChildren(rendered, instance);\n\t\t\tif (hasRenderChanged(previousRendered, rendered)) {\n\t\t\t\tupdateChildren(parentNode, previousRendered, dnode.rendered, instance, projectionOptions);\n\t\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tcreateDom(dnode, parentNode, undefined, projectionOptions, parentInstance);\n\t\t}\n\t}\n\telse {\n\t\tif (previous === dnode) {\n\t\t\treturn false;\n\t\t}\n\t\tconst domNode = previous.domNode!;\n\t\tlet textUpdated = false;\n\t\tlet updated = false;\n\t\tdnode.inserted = previous.inserted;\n\t\tif (dnode.tag === '') {\n\t\t\tif (dnode.text !== previous.text) {\n\t\t\t\tconst newDomNode = domNode.ownerDocument.createTextNode(dnode.text!);\n\t\t\t\tdomNode.parentNode!.replaceChild(newDomNode, domNode);\n\t\t\t\tdnode.domNode = newDomNode;\n\t\t\t\ttextUpdated = true;\n\t\t\t\treturn textUpdated;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (dnode.tag.lastIndexOf('svg', 0) === 0) {\n\t\t\t\tprojectionOptions = { ...projectionOptions, ...{ namespace: NAMESPACE_SVG } };\n\t\t\t}\n\t\t\tif (previous.children !== dnode.children) {\n\t\t\t\tconst children = filterAndDecorateChildren(dnode.children, parentInstance);\n\t\t\t\tdnode.children = children;\n\t\t\t\tupdated = updateChildren(domNode, previous.children, children, parentInstance, projectionOptions) || updated;\n\t\t\t}\n\n\t\t\tif (typeof dnode.deferredPropertiesCallback === 'function') {\n\t\t\t\taddDeferredProperties(dnode, projectionOptions);\n\t\t\t}\n\n\t\t\tupdated = updateProperties(domNode, previous.properties, dnode.properties, projectionOptions) || updated;\n\n\t\t\tif (dnode.properties.key !== null && dnode.properties.key !== undefined) {\n\t\t\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\t\t\tinstanceData.nodeHandler.add(domNode, `${dnode.properties.key}`);\n\t\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\t\tinstanceData.onElementUpdated(domNode as HTMLElement, dnode.properties.key as any);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (updated && dnode.properties && dnode.properties.updateAnimation) {\n\t\t\tdnode.properties.updateAnimation(domNode as Element, dnode.properties, previous.properties);\n\t\t}\n\t\tdnode.domNode = previous.domNode;\n\t\treturn textUpdated;\n\t}\n}\n\nfunction addDeferredProperties(hnode: InternalHNode, projectionOptions: ProjectionOptions) {\n\t// transfer any properties that have been passed - as these must be decorated properties\n\thnode.decoratedDeferredProperties = hnode.properties;\n\tconst properties = hnode.deferredPropertiesCallback!(!!hnode.inserted);\n\thnode.properties = { ...properties, ...hnode.decoratedDeferredProperties };\n\tprojectionOptions.deferredRenderCallbacks.push(() => {\n\t\tconst properties = {\n\t\t\t...hnode.deferredPropertiesCallback!(!!hnode.inserted),\n\t\t\t...hnode.decoratedDeferredProperties\n\t\t};\n\t\tupdateProperties(hnode.domNode!, hnode.properties, properties, projectionOptions);\n\t\thnode.properties = properties;\n\t});\n}\n\nfunction runDeferredRenderCallbacks(projectionOptions: ProjectionOptions) {\n\tif (projectionOptions.deferredRenderCallbacks.length) {\n\t\tif (projectionOptions.sync) {\n\t\t\twhile (projectionOptions.deferredRenderCallbacks.length) {\n\t\t\t\tconst callback = projectionOptions.deferredRenderCallbacks.shift();\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tglobal.requestAnimationFrame(() => {\n\t\t\t\twhile (projectionOptions.deferredRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.deferredRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction runAfterRenderCallbacks(projectionOptions: ProjectionOptions) {\n\tif (projectionOptions.sync) {\n\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\tcallback && callback();\n\t\t}\n\t}\n\telse {\n\t\tif (global.requestIdleCallback) {\n\t\t\tglobal.requestIdleCallback(() => {\n\t\t\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tsetTimeout(() => {\n\t\t\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction createProjection(dnode: InternalDNode | InternalDNode[], parentInstance: DefaultWidgetBaseInterface, projectionOptions: ProjectionOptions): Projection {\n\tlet projectionDNode = Array.isArray(dnode) ? dnode : [ dnode ];\n\tprojectionOptions.merge = false;\n\treturn {\n\t\tupdate: function(updatedDNode: RenderResult) {\n\t\t\tlet domNode = projectionOptions.rootNode;\n\n\t\t\tupdatedDNode = filterAndDecorateChildren(updatedDNode, parentInstance);\n\t\t\tupdateChildren(domNode, projectionDNode, updatedDNode as InternalDNode[], parentInstance, projectionOptions);\n\t\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t\trunDeferredRenderCallbacks(projectionOptions);\n\t\t\trunAfterRenderCallbacks(projectionOptions);\n\t\t\tprojectionDNode = updatedDNode as InternalDNode[];\n\t\t},\n\t\tdomNode: projectionOptions.rootNode\n\t};\n}\n\nexport const dom = {\n\tcreate: function(dNode: RenderResult, instance: DefaultWidgetBaseInterface, projectionOptions?: Partial<ProjectionOptions>): Projection {\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tconst rootNode = document.createElement('div');\n\t\tfinalProjectorOptions.rootNode = rootNode;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance);\n\t\taddChildren(rootNode, decoratedNode, finalProjectorOptions, instance, undefined);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\tappend: function(parentNode: Element, dNode: RenderResult, instance: DefaultWidgetBaseInterface, projectionOptions?: Partial<ProjectionOptions>): Projection {\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tfinalProjectorOptions.rootNode = parentNode;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance);\n\t\taddChildren(parentNode, decoratedNode, finalProjectorOptions, instance, undefined);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\tmerge: function(element: Element, dNode: RenderResult, instance: DefaultWidgetBaseInterface, projectionOptions?: Partial<ProjectionOptions>): Projection {\n\t\tif (Array.isArray(dNode)) {\n\t\t\tthrow new Error('Unable to merge an array of nodes. (consider adding one extra level to the virtual DOM)');\n\t\t}\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tfinalProjectorOptions.merge = true;\n\t\tfinalProjectorOptions.mergeElement = element;\n\t\tfinalProjectorOptions.rootNode = element.parentNode as Element;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance)[0] as InternalHNode;\n\n\t\tcreateDom(decoratedNode, finalProjectorOptions.rootNode, undefined, finalProjectorOptions, instance);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\treplace: function(element: Element, dNode: RenderResult, instance: DefaultWidgetBaseInterface, projectionOptions?: Partial<ProjectionOptions>): Projection {\n\t\tif (Array.isArray(dNode)) {\n\t\t\tthrow new Error('Unable to replace a node with an array of nodes. (consider adding one extra level to the virtual DOM)');\n\t\t}\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance)[0] as InternalHNode;\n\t\tfinalProjectorOptions.rootNode = element.parentNode! as Element;\n\t\tcreateDom(decoratedNode, element.parentNode!, element, finalProjectorOptions, instance);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\telement.parentNode!.removeChild(element);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t}\n};\n\n\n\n// WEBPACK FOOTER //\n// vdom.ts","import global from './global';\nimport { isArrayLike, isIterable, Iterable } from './iterator';\nimport { MAX_SAFE_INTEGER } from './number';\nimport has from './support/has';\nimport { wrapNative } from './support/util';\n\nexport interface MapCallback<T, U> {\n\t/**\n\t * A callback function when mapping\n\t *\n\t * @param element The element that is currently being mapped\n\t * @param index The current index of the element\n\t */\n\t(element: T, index: number): U;\n}\n\nexport interface FindCallback<T> {\n\t/**\n\t * A callback function when using find\n\t *\n\t * @param element The element that is currenty being analysed\n\t * @param index The current index of the element that is being analysed\n\t * @param array The source array\n\t */\n\t(element: T, index: number, array: ArrayLike<T>): boolean;\n}\n\ninterface WritableArrayLike<T> {\n\treadonly length: number;\n\t[n: number]: T;\n}\n\n/* ES6 Array static methods */\n\nexport interface From {\n\t/**\n\t * The Array.from() method creates a new Array instance from an array-like or iterable object.\n\t *\n\t * @param source An array-like or iterable object to convert to an array\n\t * @param mapFunction A map function to call on each element in the array\n\t * @param thisArg The execution context for the map function\n\t * @return The new Array\n\t */\n\t<T, U>(source: ArrayLike<T> | Iterable<T>, mapFunction: MapCallback<T, U>, thisArg?: any): Array<U>;\n\n\t/**\n\t * The Array.from() method creates a new Array instance from an array-like or iterable object.\n\t *\n\t * @param source An array-like or iterable object to convert to an array\n\t * @return The new Array\n\t */\n\t<T>(source: ArrayLike<T> | Iterable<T>): Array<T>;\n}\n\nexport let from: From;\n\n/**\n * Creates a new array from the function parameters.\n *\n * @param arguments Any number of arguments for the array\n * @return An array from the given arguments\n */\nexport let of: <T>(...items: T[]) => Array<T>;\n\n/* ES6 Array instance methods */\n\n/**\n * Copies data internally within an array or array-like object.\n *\n * @param target The target array-like object\n * @param offset The index to start copying values to; if negative, it counts backwards from length\n * @param start The first (inclusive) index to copy; if negative, it counts backwards from length\n * @param end The last (exclusive) index to copy; if negative, it counts backwards from length\n * @return The target\n */\nexport let copyWithin: <T>(target: ArrayLike<T>, offset: number, start: number, end?: number) => ArrayLike<T>;\n\n/**\n * Fills elements of an array-like object with the specified value.\n *\n * @param target The target to fill\n * @param value The value to fill each element of the target with\n * @param start The first index to fill\n * @param end The (exclusive) index at which to stop filling\n * @return The filled target\n */\nexport let fill: <T>(target: ArrayLike<T>, value: T, start?: number, end?: number) => ArrayLike<T>;\n\n/**\n * Finds and returns the first instance matching the callback or undefined if one is not found.\n *\n * @param target An array-like object\n * @param callback A function returning if the current value matches a criteria\n * @param thisArg The execution context for the find function\n * @return The first element matching the callback, or undefined if one does not exist\n */\nexport let find: <T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}) => T | undefined;\n\n/**\n * Performs a linear search and returns the first index whose value satisfies the passed callback,\n * or -1 if no values satisfy it.\n *\n * @param target An array-like object\n * @param callback A function returning true if the current value satisfies its criteria\n * @param thisArg The execution context for the find function\n * @return The first index whose value satisfies the passed callback, or -1 if no values satisfy it\n */\nexport let findIndex: <T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}) => number;\n\n/* ES7 Array instance methods */\n\n/**\n * Determines whether an array includes a given value\n *\n * @param target the target array-like object\n * @param searchElement the item to search for\n * @param fromIndex the starting index to search from\n * @return `true` if the array includes the element, otherwise `false`\n */\nexport let includes: <T>(target: ArrayLike<T>, searchElement: T, fromIndex?: number) => boolean;\n\nif (has('es6-array') && has('es6-array-fill')) {\n\tfrom = global.Array.from;\n\tof = global.Array.of;\n\tcopyWithin = wrapNative(global.Array.prototype.copyWithin);\n\tfill = wrapNative(global.Array.prototype.fill);\n\tfind = wrapNative(global.Array.prototype.find);\n\tfindIndex = wrapNative(global.Array.prototype.findIndex);\n}\nelse {\n\t// It is only older versions of Safari/iOS that have a bad fill implementation and so aren't in the wild\n\t// To make things easier, if there is a bad fill implementation, the whole set of functions will be filled\n\n\t/**\n\t * Ensures a non-negative, non-infinite, safe integer.\n\t *\n\t * @param length The number to validate\n\t * @return A proper length\n\t */\n\tconst toLength = function toLength(length: number): number {\n\t\tif (isNaN(length)) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlength = Number(length);\n\t\tif (isFinite(length)) {\n\t\t\tlength = Math.floor(length);\n\t\t}\n\t\t// Ensure a non-negative, real, safe integer\n\t\treturn Math.min(Math.max(length, 0), MAX_SAFE_INTEGER);\n\t};\n\n\t/**\n\t * From ES6 7.1.4 ToInteger()\n\t *\n\t * @param value A value to convert\n\t * @return An integer\n\t */\n\tconst toInteger = function toInteger(value: any): number {\n\t\tvalue = Number(value);\n\t\tif (isNaN(value)) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (value === 0 || !isFinite(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn (value > 0 ? 1 : -1) * Math.floor(Math.abs(value));\n\t};\n\n\t/**\n\t * Normalizes an offset against a given length, wrapping it if negative.\n\t *\n\t * @param value The original offset\n\t * @param length The total length to normalize against\n\t * @return If negative, provide a distance from the end (length); otherwise provide a distance from 0\n\t */\n\tconst normalizeOffset = function normalizeOffset(value: number, length: number): number {\n\t\treturn value < 0 ? Math.max(length + value, 0) : Math.min(value, length);\n\t};\n\n\tfrom = function from(this: ArrayConstructor, arrayLike: Iterable<any> | ArrayLike<any>, mapFunction?: MapCallback<any, any>, thisArg?: any): Array<any> {\n\t\tif (arrayLike == null) {\n\t\t\tthrow new TypeError('from: requires an array-like object');\n\t\t}\n\n\t\tif (mapFunction && thisArg) {\n\t\t\tmapFunction = mapFunction.bind(thisArg);\n\t\t}\n\n\t\t/* tslint:disable-next-line:variable-name */\n\t\tconst Constructor = this;\n\t\tconst length: number = toLength((<any> arrayLike).length);\n\n\t\t// Support extension\n\t\tconst array: any[] = (typeof Constructor === 'function') ? <any[]> Object(new Constructor(length)) : new Array(length);\n\n\t\tif (!isArrayLike(arrayLike) && !isIterable(arrayLike)) {\n\t\t\treturn array;\n\t\t}\n\n\t\t// if this is an array and the normalized length is 0, just return an empty array. this prevents a problem\n\t\t// with the iteration on IE when using a NaN array length.\n\t\tif (isArrayLike(arrayLike) && length === 0) {\n\t\t\treturn [];\n\t\t}\n\n\t\tlet i = 0;\n\t\tfor (const value of arrayLike) {\n\t\t\tarray[i] = mapFunction ? mapFunction(value, i) : value;\n\t\t\ti++;\n\t\t}\n\n\t\tif ((<any> arrayLike).length !== undefined) {\n\t\t\tarray.length = length;\n\t\t}\n\n\t\treturn array;\n\t};\n\n\tof = function of<T>(...items: T[]): Array<T> {\n\t\treturn Array.prototype.slice.call(items);\n\t};\n\n\tcopyWithin = function copyWithin<T>(target: ArrayLike<T>, offset: number, start: number, end?: number): ArrayLike<T> {\n\t\tif (target == null) {\n\t\t\tthrow new TypeError('copyWithin: target must be an array-like object');\n\t\t}\n\n\t\tconst length = toLength(target.length);\n\t\toffset = normalizeOffset(toInteger(offset), length);\n\t\tstart = normalizeOffset(toInteger(start), length);\n\t\tend = normalizeOffset(end === undefined ? length : toInteger(end), length);\n\t\tlet count = Math.min(end - start, length - offset);\n\n\t\tlet direction = 1;\n\t\tif (offset > start && offset < (start + count)) {\n\t\t\tdirection = -1;\n\t\t\tstart += count - 1;\n\t\t\toffset += count - 1;\n\t\t}\n\n\t\twhile (count > 0) {\n\t\t\tif (start in target) {\n\t\t\t\t(target as WritableArrayLike<T>)[offset] = target[start];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdelete (target as WritableArrayLike<T>)[offset];\n\t\t\t}\n\n\t\t\toffset += direction;\n\t\t\tstart += direction;\n\t\t\tcount--;\n\t\t}\n\n\t\treturn target;\n\t};\n\n\tfill = function fill<T>(target: ArrayLike<T>, value: any, start?: number, end?: number): ArrayLike<T> {\n\t\tconst length = toLength(target.length);\n\t\tlet i = normalizeOffset(toInteger(start), length);\n\t\tend = normalizeOffset(end === undefined ? length : toInteger(end), length);\n\n\t\twhile (i < end) {\n\t\t\t(target as WritableArrayLike<T>)[i++] = value;\n\t\t}\n\n\t\treturn target;\n\t};\n\n\tfind = function find<T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}): T | undefined {\n\t\tconst index = findIndex<T>(target, callback, thisArg);\n\t\treturn index !== -1 ? target[index] : undefined;\n\t};\n\n\tfindIndex = function findIndex<T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}): number {\n\t\tconst length = toLength(target.length);\n\n\t\tif (!callback) {\n\t\t\tthrow new TypeError('find: second argument must be a function');\n\t\t}\n\n\t\tif (thisArg) {\n\t\t\tcallback = callback.bind(thisArg);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tif (callback(target[i], i, target)) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\nif (has('es7-array')) {\n\tincludes = wrapNative(global.Array.prototype.includes);\n}\nelse {\n\t/**\n\t * Ensures a non-negative, non-infinite, safe integer.\n\t *\n\t * @param length The number to validate\n\t * @return A proper length\n\t */\n\tconst toLength = function toLength(length: number): number {\n\t\tlength = Number(length);\n\t\tif (isNaN(length)) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (isFinite(length)) {\n\t\t\tlength = Math.floor(length);\n\t\t}\n\t\t// Ensure a non-negative, real, safe integer\n\t\treturn Math.min(Math.max(length, 0), MAX_SAFE_INTEGER);\n\t};\n\n\tincludes = function includes<T>(target: ArrayLike<T>, searchElement: T, fromIndex: number = 0): boolean {\n\t\tlet len = toLength(target.length);\n\n\t\tfor (let i = fromIndex; i < len; ++i) {\n\t\t\tconst currentElement = target[i];\n\t\t\tif (searchElement === currentElement ||\n\t\t\t\t(searchElement !== searchElement && currentElement !== currentElement)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// array.ts","import { Evented } from '@dojo/core/Evented';\n\nexport class Injector<T = any> extends Evented {\n\n\tprivate _payload: T;\n\n\tconstructor(payload: T) {\n\t\tsuper({});\n\t\tthis._payload = payload;\n\t}\n\n\tpublic get(): T {\n\t\treturn this._payload;\n\t}\n\n\tpublic set(payload: T): void {\n\t\tthis._payload = payload;\n\t\tthis.emit({ type: 'invalidate' });\n\t}\n}\n\nexport default Injector;\n\n\n\n// WEBPACK FOOTER //\n// Injector.ts","import { Handle } from '@dojo/interfaces/core';\nimport { createHandle, createCompositeHandle } from './lang';\nimport Evented, { EventObject } from './Evented';\n\nexport interface EventCallback {\n\t(event: EventObject): void;\n}\n\nexport interface EventEmitter {\n\ton(event: string, listener: EventCallback): EventEmitter;\n\tremoveListener(event: string, listener: EventCallback): EventEmitter;\n}\n\ninterface DOMEventObject extends EventObject {\n\tbubbles: boolean;\n\tcancelable: boolean;\n}\n\n/**\n * Provides a normalized mechanism for dispatching events for event emitters, Evented objects, or DOM nodes.\n * @param target The target to emit the event from\n * @param event The event object to emit\n * @return Boolean indicating if preventDefault was called on the event object (only relevant for DOM events;\n *     always false for other event emitters)\n */\nexport function emit<T extends EventObject>(target: Evented | EventTarget | EventEmitter, event: T | EventObject): boolean;\nexport function emit<T extends EventObject>(target: any, event: T | EventObject): boolean {\n\tif (\n\t\ttarget.dispatchEvent && /* includes window and document */\n\t\t\t((target.ownerDocument && target.ownerDocument.createEvent) || /* matches nodes */\n\t\t\t(target.document && target.document.createEvent) || /* matches window */\n\t\t\ttarget.createEvent) /* matches document */\n\t) {\n\t\tconst nativeEvent = (target.ownerDocument || target.document || target).createEvent('HTMLEvents');\n\t\tnativeEvent.initEvent(\n\t\t\tevent.type,\n\t\t\tBoolean((<DOMEventObject> event).bubbles),\n\t\t\tBoolean((<DOMEventObject> event).cancelable)\n\t\t);\n\n\t\tfor (let key in event) {\n\t\t\tif (!(key in nativeEvent)) {\n\t\t\t\tnativeEvent[key] = (<any> event)[key];\n\t\t\t}\n\t\t}\n\n\t\treturn target.dispatchEvent(nativeEvent);\n\t}\n\n\tif (target.emit) {\n\t\tif (target.removeListener) {\n\t\t\t// Node.js EventEmitter\n\t\t\ttarget.emit(event.type, event);\n\t\t\treturn false;\n\t\t}\n\t\telse if (target.on) {\n\t\t\t// Dojo Evented or similar\n\t\t\ttarget.emit(event);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tthrow new Error('Target must be an event emitter');\n}\n\n/**\n * Provides a normalized mechanism for listening to events from event emitters, Evented objects, or DOM nodes.\n * @param target Target to listen for event on\n * @param type Event event type(s) to listen for; may a string or an array of strings\n * @param listener Callback to handle the event when it fires\n * @param capture Whether the listener should be registered in the capture phase (DOM events only)\n * @return A handle which will remove the listener when destroy is called\n */\nexport default function on(target: EventTarget, type: string | string[], listener: EventCallback, capture?: boolean): Handle;\nexport default function on(target: EventEmitter | Evented, type: string | string[], listener: EventCallback): Handle;\nexport default function on(target: any, type: any, listener: any, capture?: boolean): Handle {\n\tif (Array.isArray(type)) {\n\t\tlet handles: Handle[] = type.map(function (type: string): Handle {\n\t\t\treturn on(target, type, listener, capture);\n\t\t});\n\n\t\treturn createCompositeHandle(...handles);\n\t}\n\n\tconst callback = function (this: any) {\n\t\tlistener.apply(this, arguments);\n\t};\n\n\t// DOM EventTarget\n\tif (target.addEventListener && target.removeEventListener) {\n\t\ttarget.addEventListener(type, callback, capture);\n\t\treturn createHandle(function () {\n\t\t\ttarget.removeEventListener(type, callback, capture);\n\t\t});\n\t}\n\n\tif (target.on) {\n\t\t// EventEmitter\n\t\tif (target.removeListener) {\n\t\t\ttarget.on(type, callback);\n\t\t\treturn createHandle(function () {\n\t\t\t\ttarget.removeListener(type, callback);\n\t\t\t});\n\t\t}\n\t\t// Evented\n\t\telse if (target.emit) {\n\t\t\treturn target.on(type, listener);\n\t\t}\n\t}\n\n\tthrow new TypeError('Unknown event emitter object');\n}\n\n/**\n * Provides a mechanism for listening to the next occurrence of an event from event\n * emitters, Evented objects, or DOM nodes.\n * @param target Target to listen for event on\n * @param type Event event type(s) to listen for; may be a string or an array of strings\n * @param listener Callback to handle the event when it fires\n * @param capture Whether the listener should be registered in the capture phase (DOM events only)\n * @return A handle which will remove the listener when destroy is called\n */\nexport function once(target: EventTarget, type: string | string[], listener: EventCallback, capture?: boolean): Handle;\nexport function once(target: EventEmitter | Evented, type: string | string[], listener: EventCallback): Handle;\nexport function once(target: any, type: any, listener: any, capture?: boolean): Handle {\n\t// FIXME\n\t// tslint:disable-next-line:no-var-keyword\n\tvar handle = on(target, type, function (this: any) {\n\t\thandle.destroy();\n\t\treturn listener.apply(this, arguments);\n\t}, capture);\n\n\treturn handle;\n}\n\nexport interface PausableHandle extends Handle {\n\tpause(): void;\n\tresume(): void;\n}\n\n/**\n * Provides a mechanism for creating pausable listeners for events from event emitters, Evented objects, or DOM nodes.\n * @param target Target to listen for event on\n * @param type Event event type(s) to listen for; may a string or an array of strings\n * @param listener Callback to handle the event when it fires\n * @param capture Whether the listener should be registered in the capture phase (DOM events only)\n * @return A handle with additional pause and resume methods; the listener will never fire when paused\n */\nexport function pausable(target: EventTarget, type: string | string[], listener: EventCallback, capture?: boolean): PausableHandle;\nexport function pausable(target: EventEmitter | Evented, type: string | string[], listener: EventCallback): PausableHandle;\nexport function pausable(target: any, type: any, listener: any, capture?: boolean): PausableHandle {\n\tlet paused: boolean;\n\n\tconst handle = <PausableHandle> on(target, type, function (this: any) {\n\t\tif (!paused) {\n\t\t\treturn listener.apply(this, arguments);\n\t\t}\n\t}, capture);\n\n\thandle.pause = function () {\n\t\tpaused = true;\n\t};\n\n\thandle.resume = function () {\n\t\tpaused = false;\n\t};\n\n\treturn handle;\n}\n\n\n\n// WEBPACK FOOTER //\n// on.ts","import UrlSearchParams from '@dojo/core/UrlSearchParams';\n\nexport interface ParsedPath {\n\t/**\n\t * Parameters extracted from the search component.\n\t */\n\tsearchParams: UrlSearchParams;\n\n\t/**\n\t * Pathname segments.\n\t */\n\tsegments: string[];\n\n\t/**\n\t * Whether the pathname ended with a trailing slash.\n\t */\n\ttrailingSlash: boolean;\n}\n\n/**\n * Parses a path\n * @param path The path to parse.\n * @return The search params, pathname segments, and whether it ended with a trailing slash.\n */\nexport function parse(path: string): ParsedPath {\n\tconst tokens: string[] = path.split(/([/?#])/).filter(Boolean);\n\n\tlet pathnameTokens = tokens;\n\tlet searchParams: UrlSearchParams;\n\n\tconst searchStart = tokens.indexOf('?');\n\tconst hashStart = tokens.indexOf('#');\n\tif (searchStart >= 0) {\n\t\tif (hashStart >= 0) {\n\t\t\t// Either `/foo?bar#baz` or `/foo#bar?baz`\n\t\t\tpathnameTokens = tokens.slice(0, Math.min(searchStart, hashStart));\n\t\t\tsearchParams = new UrlSearchParams(tokens.slice(searchStart + 1, hashStart).join(''));\n\t\t}\n\t\telse {\n\t\t\t// `/foo?bar`\n\t\t\tpathnameTokens = tokens.slice(0, searchStart);\n\t\t\tsearchParams = new UrlSearchParams(tokens.slice(searchStart + 1).join(''));\n\t\t}\n\t}\n\telse {\n\t\tsearchParams = new UrlSearchParams();\n\t\tif (hashStart >= 0) {\n\t\t\t// `/foo#bar`\n\t\t\tpathnameTokens = tokens.slice(0, hashStart);\n\t\t}\n\t}\n\n\tconst segments = pathnameTokens.filter(t => t !== '/');\n\tconst trailingSlash = pathnameTokens[pathnameTokens.length - 1] === '/' && segments.length > 0;\n\n\treturn {\n\t\tsearchParams,\n\t\tsegments,\n\t\ttrailingSlash\n\t};\n}\n\nexport interface MatchResult {\n\t/**\n\t * Whether there are remaining segments that weren't matched.\n\t */\n\thasRemaining: boolean;\n\n\t/**\n\t * Position in the segments array that the remaining unmatched segments start.\n\t */\n\toffset: number;\n\n\t/**\n\t * Values for named segments.\n\t */\n\tvalues: string[];\n}\n\n/**\n * Determines whether a DeconstructedPath is a (partial) match for given pathname segments.\n * @param expectedSegments Part of a DeconstructedPath object.\n * @param segments Pathname segments as returned by `parse()`\n * @return A result object.\n */\nexport function match({ expectedSegments }: DeconstructedPath, segments: string[]): MatchResult | null {\n\tif (expectedSegments.length === 0) {\n\t\treturn {\n\t\t\thasRemaining: segments.length > 0,\n\t\t\toffset: 0,\n\t\t\tvalues: []\n\t\t};\n\t}\n\n\tif (expectedSegments.length > segments.length) {\n\t\treturn null;\n\t}\n\n\tlet isMatch = true;\n\tconst values: string[] = [];\n\tfor (let i = 0; isMatch && i < expectedSegments.length; i++) {\n\t\tconst value = segments[i];\n\t\tconst expected = expectedSegments[i];\n\t\tif (isNamedSegment(expected)) {\n\t\t\tvalues.push(value);\n\t\t}\n\t\telse if (expected.literal !== value) {\n\t\t\tisMatch = false;\n\t\t}\n\t}\n\n\tif (!isMatch) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\thasRemaining: expectedSegments.length < segments.length,\n\t\toffset: expectedSegments.length,\n\t\tvalues\n\t};\n}\n\nexport interface LiteralSegment {\n\tliteral: string;\n}\n\nexport interface NamedSegment {\n\tname: string;\n}\n\nexport type Segment = LiteralSegment | NamedSegment;\n\n/**\n * Determine whether the segment is a NamedSegment.\n *\n * @param segment The segment to be checked\n * @return true if the segment is a NamedSegment, false otherwise\n */\nexport function isNamedSegment(segment: Segment): segment is NamedSegment {\n\treturn (<NamedSegment> segment).name !== undefined;\n}\n\n/**\n * Describes a route path, broken down into its constituent parts.\n */\nexport interface DeconstructedPath {\n\t/**\n\t * Segments (literal and named) that are expected to be present when matching paths.\n\t */\n\texpectedSegments: Segment[];\n\n\t/**\n\t * Whether the pathname started with a slash.\n\t */\n\tleadingSlash: boolean;\n\n\t/**\n\t * Named path parameters, in the order that they occurred in the path.\n\t */\n\tparameters: string[];\n\n\t/**\n\t * Named query parameters, in the order that they occurred in the path.\n\t */\n\tsearchParameters: string[];\n\n\t/**\n\t * Whether the pathname ended with a slash.\n\t */\n\ttrailingSlash: boolean;\n}\n\n/**\n * Deconstruct a route path into its constituent parts.\n * @param path The path to deconstruct.\n * @return An object describing the path's constituent parts.\n */\nexport function deconstruct(path: string): DeconstructedPath {\n\tconst expectedSegments: Segment[] = [];\n\tconst parameters: string[] = [];\n\tconst searchParameters: string[] = [];\n\tlet trailingSlash = false;\n\n\tconst tokens = path.split(/([/{}?&])/).filter(Boolean);\n\tconst leadingSlash = tokens[0] === '/';\n\n\tlet i = 0;\n\tconst consume = () => tokens[i++];\n\tconst peek = () => tokens[i];\n\n\tlet inSearchComponent = false;\n\twhile (i < tokens.length) {\n\t\tconst t = consume();\n\n\t\tswitch (t) {\n\t\t\tcase '{': {\n\t\t\t\tconst name = consume();\n\t\t\t\tif (!name || name === '}') {\n\t\t\t\t\tthrow new TypeError('Parameter must have a name');\n\t\t\t\t}\n\t\t\t\t// Reserve : for future use, e.g. including type data in the parameter declaration.\n\t\t\t\tif (name === '{' || name === '&' || /:/.test(name)) {\n\t\t\t\t\tthrow new TypeError('Parameter name must not contain \\'{\\', \\'&\\' or \\':\\'');\n\t\t\t\t}\n\t\t\t\tif (parameters.indexOf(name) !== -1 || searchParameters.indexOf(name) !== -1) {\n\t\t\t\t\tthrow new TypeError(`Parameter must have a unique name, got '${name}'`);\n\t\t\t\t}\n\n\t\t\t\tconst closing = consume();\n\t\t\t\tif (!closing || closing !== '}') {\n\t\t\t\t\tthrow new TypeError(`Parameter name must be followed by '}', got '${closing}'`);\n\t\t\t\t}\n\n\t\t\t\tconst separator = peek();\n\t\t\t\tif (separator) {\n\t\t\t\t\tif (inSearchComponent) {\n\t\t\t\t\t\tif (separator !== '&') {\n\t\t\t\t\t\t\tthrow new TypeError(`Search parameter must be followed by '&', got '${separator}'`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (separator !== '/' && separator !== '?') {\n\t\t\t\t\t\tthrow new TypeError(`Parameter must be followed by '/' or '?', got '${separator}'`);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (inSearchComponent) {\n\t\t\t\t\tsearchParameters.push(name);\n\t\t\t\t} else {\n\t\t\t\t\tparameters.push(name);\n\t\t\t\t\texpectedSegments.push(Object.freeze({ name }));\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase '?':\n\t\t\tcase '/':\n\t\t\t\tif (inSearchComponent) {\n\t\t\t\t\tthrow new TypeError(`Expected parameter in search component, got '${t}'`);\n\t\t\t\t}\n\n\t\t\t\tif (t === '?') {\n\t\t\t\t\tinSearchComponent = true;\n\t\t\t\t\tif (expectedSegments.length === 0) {\n\t\t\t\t\t\tthrow new TypeError('Path must contain at least one segment');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (t === '/') {\n\t\t\t\t\tconst next = peek();\n\t\t\t\t\tif (next === '/') {\n\t\t\t\t\t\tthrow new TypeError('Path segment must not be empty');\n\t\t\t\t\t}\n\t\t\t\t\tif (expectedSegments.length > 0 && (!next || next === '?')) {\n\t\t\t\t\t\ttrailingSlash = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase '&':\n\t\t\t\tif (!inSearchComponent) {\n\t\t\t\t\tthrow new TypeError('Path segment must not contain \\'&\\'');\n\t\t\t\t}\n\n\t\t\t\tconst next = peek();\n\t\t\t\tif (next === '&') {\n\t\t\t\t\tthrow new TypeError('Expected parameter in search component, got \\'&\\'');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tif (inSearchComponent) {\n\t\t\t\t\tthrow new TypeError(`Expected parameter in search component, got '${t}'`);\n\t\t\t\t}\n\n\t\t\t\texpectedSegments.push(Object.freeze({ literal: t }));\n\t\t}\n\t}\n\n\treturn Object.freeze({\n\t\texpectedSegments: <Segment[]> Object.freeze(expectedSegments),\n\t\tleadingSlash,\n\t\tparameters: <string[]> Object.freeze(parameters),\n\t\tsearchParameters: <string[]> Object.freeze(searchParameters),\n\t\ttrailingSlash\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// path.ts","import WeakMap from '@dojo/shim/WeakMap';\nimport { Context, Parameters, RouteInterface, RouterInterface } from '../interfaces';\n\nexport const parentMap = new WeakMap<RouteInterface<Context, Parameters>, RouterInterface<Context>>();\n\n/**\n * Whether the route has been appended to another route or router.\n */\nexport function hasBeenAppended(route: RouteInterface<Context, Parameters>): boolean {\n\treturn parentMap.has(route) || route.parent !== undefined;\n}\n\n/**\n * Finds the router whose route hierarchy the route has been appended to.\n *\n * Throws if the route was not appended to any router.\n */\nexport function findRouter(route: RouteInterface<Context, Parameters>): RouterInterface<Context> {\n\twhile (route.parent) {\n\t\troute = route.parent;\n\t}\n\n\tconst router = parentMap.get(route);\n\tif (!router) {\n\t\tthrow new Error('Cannot generate link for route that is not in the hierarchy');\n\t}\n\telse {\n\t\treturn router;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// router.ts","import {\n\tConstructor,\n\tRegistryLabel,\n\tDNode,\n\tWidgetBaseInterface,\n\tWidgetProperties\n} from '@dojo/widget-core/interfaces';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { w } from '@dojo/widget-core/d';\nimport { inject } from '@dojo/widget-core/decorators/inject';\n\nimport { Router } from './Router';\nimport { routerKey } from './RouterInjector';\nimport {\n\tMatchType,\n\tComponent,\n\tMapParams,\n\tOutletComponents,\n\tMapParamsOptions\n} from './interfaces';\n\nexport function isComponent<W extends WidgetBaseInterface>(value: any): value is Component<W> {\n\treturn Boolean(value && ((typeof value === 'string') || (typeof value === 'function') || (typeof value === 'symbol')));\n}\n\nexport type Outlet<\n\tW extends WidgetBaseInterface,\n\tF extends WidgetBaseInterface,\n\tE extends WidgetBaseInterface> = Constructor<WidgetBase<Partial<E['properties']> & Partial<W['properties']> & Partial<F['properties']> & WidgetProperties, null>>;\n\nexport function Outlet<W extends WidgetBaseInterface, F extends WidgetBaseInterface, E extends WidgetBaseInterface>(\n\toutletComponents: Component<W> | OutletComponents<W, F, E>,\n\toutlet: string,\n\tmapParams: MapParams = (options: MapParamsOptions) => {},\n\tkey: RegistryLabel = routerKey\n): Outlet<W, F, E> {\n\tconst indexComponent = isComponent(outletComponents) ? undefined : outletComponents.index;\n\tconst mainComponent = isComponent(outletComponents) ? outletComponents : outletComponents.main;\n\tconst errorComponent = isComponent(outletComponents) ? undefined : outletComponents.error;\n\tfunction getProperties(this: WidgetBase, router: Router<any>, properties: any) {\n\t\treturn { router };\n\t};\n\n\t@inject({ name: routerKey, getProperties })\n\tclass OutletComponent extends WidgetBase<Partial<W['properties']> & { router: Router<any> }, null> {\n\n\t\tpublic __setProperties__(properties: Partial<W['properties']> & { router: Router<any> }): void {\n\t\t\tsuper.__setProperties__(properties);\n\t\t\tthis.invalidate();\n\t\t}\n\n\t\tprotected render(): DNode {\n\t\t\tconst { router } = this.properties;\n\t\t\tconst outletContext = router.getOutlet(outlet);\n\t\t\tif (outletContext) {\n\t\t\t\tconst { params, type, location } = outletContext;\n\t\t\t\tconst properties = { ...this.properties, ...mapParams({ params, type, location, router }) };\n\n\t\t\t\tif ((type === MatchType.INDEX || type === MatchType.ERROR) && indexComponent) {\n\t\t\t\t\treturn w(indexComponent, properties, this.children);\n\t\t\t\t}\n\t\t\t\telse if (type === MatchType.ERROR && errorComponent) {\n\t\t\t\t\treturn w(errorComponent, properties, this.children);\n\t\t\t\t}\n\t\t\t\telse if (type !== MatchType.ERROR && mainComponent) {\n\t\t\t\t\treturn w(mainComponent, properties, this.children);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n\treturn OutletComponent;\n}\n\nexport default Outlet;\n\n\n\n// WEBPACK FOOTER //\n// Outlet.ts","require('offline-plugin/runtime').install();\n\n\n\n// WEBPACK FOOTER //\n// sw.ts","var appCacheIframe;\n\nfunction hasSW() {\n  return 'serviceWorker' in navigator &&\n    // This is how I block Chrome 40 and detect Chrome 41, because first has\n    // bugs with history.pustState and/or hashchange\n    (window.fetch || 'imageRendering' in document.documentElement.style) &&\n    (window.location.protocol === 'https:' || window.location.hostname === 'localhost' || window.location.hostname.indexOf('127.') === 0)\n}\n\nfunction install(options) {\n  options || (options = {});\n\n  \n    if (hasSW()) {\n      var registration = navigator.serviceWorker\n        .register(\n          \"sw.js\"\n          \n        );\n\n      \n\n      return;\n    }\n  \n\n  \n}\n\nfunction applyUpdate(callback, errback) {\n  \n\n  \n}\n\nfunction update() {\n  \n    if (hasSW()) {\n      navigator.serviceWorker.getRegistration().then(function(registration) {\n        if (!registration) return;\n        return registration.update();\n      });\n    }\n  \n\n  \n}\n\n\n\nexports.install = install;\nexports.applyUpdate = applyUpdate;\nexports.update = update;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/offline-plugin/runtime.js\n// module id = 35\n// module chunks = 0","import { add, exists } from '@dojo/core/has';\nif (!exists('build-time-render')) {\n\tadd('build-time-render', false, false);\n}\n\n\n\n// WEBPACK FOOTER //\n// btr.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.css\n// module id = 37\n// module chunks = 0","import { ProjectorMixin } from '@dojo/widget-core/mixins/Projector';\nimport { Registry } from '@dojo/widget-core/Registry';\nimport { registerRouterInjector } from '@dojo/routing/RouterInjector';\nimport { Context } from './Context';\n\nimport { App } from './widgets/App';\n\nconst registry = new Registry();\nconst context = new Context();\nregistry.defineInjector('state', context);\n\nconst routingConfig = [\n\t{\n\t\tpath: 'user/{user}',\n\t\toutlet: 'user'\n\t},\n\t{\n\t\tpath: 'comments/{id}',\n\t\toutlet: 'comments'\n\t},\n\t{\n\t\tpath: '{category}/{page}',\n\t\toutlet: 'content',\n\t\tdefaultRoute: true,\n\t\tdefaultParams: {\n\t\t\tcategory: 'top',\n\t\t\tpage: 1\n\t\t}\n\t}\n];\n\nconst router = registerRouterInjector(routingConfig, registry);\nrouter.start();\nconst Projector = ProjectorMixin(App);\nconst projector = new Projector();\nprojector.setProperties({ registry });\nprojector.merge(document.getElementById('app') || undefined);\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/main.ts","import { assign } from '@dojo/core/lang';\nimport global from '@dojo/shim/global';\nimport { createHandle } from '@dojo/core/lang';\nimport { Handle } from '@dojo/interfaces/core';\nimport 'pepjs';\nimport cssTransitions from '../animations/cssTransitions';\nimport { Constructor, DNode, Projection, ProjectionOptions } from './../interfaces';\nimport { WidgetBase } from './../WidgetBase';\nimport { afterRender } from './../decorators/afterRender';\nimport { v } from './../d';\nimport { Registry } from './../Registry';\nimport { dom, widgetInstanceMap } from './../vdom';\n\n/**\n * Represents the attach state of the projector\n */\nexport enum ProjectorAttachState {\n\tAttached = 1,\n\tDetached\n}\n\n/**\n * Attach type for the projector\n */\nexport enum AttachType {\n\tAppend = 1,\n\tMerge = 2,\n\tReplace = 3\n}\n\nexport interface AttachOptions {\n\n\t/**\n\t * If `'append'` it will appended to the root. If `'merge'` it will merged with the root. If `'replace'` it will\n\t * replace the root.\n\t */\n\ttype: AttachType;\n\n\t/**\n\t * Element to attach the projector.\n\t */\n\troot?: Element;\n}\n\nexport interface ProjectorProperties {\n\tregistry?: Registry;\n}\n\nexport interface ProjectorMixin<P> {\n\n\treadonly properties: Readonly<P> & Readonly<ProjectorProperties>;\n\n\t/**\n\t * Append the projector to the root.\n\t */\n\tappend(root?: Element): Handle;\n\n\t/**\n\t * Merge the projector onto the root.\n\t *\n\t * The `root` and any of its `children` will be re-used.  Any excess DOM nodes will be ignored and any missing DOM nodes\n\t * will be created.\n\t * @param root The root element that the root virtual DOM node will be merged with.  Defaults to `document.body`.\n\t */\n\tmerge(root?: Element): Handle;\n\n\t/**\n\t * Replace the root with the projector node.\n\t */\n\treplace(root?: Element): Handle;\n\n\t/**\n\t * Pause the projector.\n\t */\n\tpause(): void;\n\n\t/**\n\t * Resume the projector.\n\t */\n\tresume(): void;\n\n\t/**\n\t * Attach the project to a _sandboxed_ document fragment that is not part of the DOM.\n\t *\n\t * When sandboxed, the `Projector` will run in a sync manner, where renders are completed within the same turn.\n\t * The `Projector` creates a `DocumentFragment` which replaces any other `root` that has been set.\n\t * @param doc The `Document` to use, which defaults to the global `document`.\n\t */\n\tsandbox(doc?: Document): void;\n\n\t/**\n\t * Schedule a render.\n\t */\n\tscheduleRender(): void;\n\n\t/**\n\t * Sets the properties for the widget. Responsible for calling the diffing functions for the properties against the\n\t * previous properties. Runs though any registered specific property diff functions collecting the results and then\n\t * runs the remainder through the catch all diff function. The aggregate of the two sets of the results is then\n\t * set as the widget's properties\n\t *\n\t * @param properties The new widget properties\n\t */\n\tsetProperties(properties: this['properties']): void;\n\n\t/**\n\t * Sets the widget's children\n\t */\n\tsetChildren(children: DNode[]): void;\n\n\t/**\n\t * Return a `string` that represents the HTML of the current projection.  The projector needs to be attached.\n\t */\n\ttoHtml(): string;\n\n\t/**\n\t * Indicates if the projectors is in async mode, configured to `true` by defaults.\n\t */\n\tasync: boolean;\n\n\t/**\n\t * Root element to attach the projector\n\t */\n\troot: Element;\n\n\t/**\n\t * The status of the projector\n\t */\n\treadonly projectorState: ProjectorAttachState;\n\n\t/**\n\t * Exposes invalidate for projector instances\n\t */\n\tinvalidate(): void;\n\n\t/**\n\t * Runs registered destroy handles\n\t */\n\tdestroy(): void;\n}\n\nexport function ProjectorMixin<P, T extends Constructor<WidgetBase<P>>>(Base: T): T & Constructor<ProjectorMixin<P>> {\n\tclass Projector extends Base {\n\n\t\tpublic projectorState: ProjectorAttachState;\n\t\tpublic properties: Readonly<P> & Readonly<ProjectorProperties>;\n\n\t\tprivate _root: Element;\n\t\tprivate _async = true;\n\t\tprivate _attachHandle: Handle;\n\t\tprivate _projectionOptions: Partial<ProjectionOptions>;\n\t\tprivate _projection: Projection | undefined;\n\t\tprivate _scheduled: number | undefined;\n\t\tprivate _paused: boolean;\n\t\tprivate _boundDoRender: () => void;\n\t\tprivate _boundRender: Function;\n\t\tprivate _projectorChildren: DNode[] = [];\n\t\tprivate _projectorProperties: this['properties'] = {} as this['properties'];\n\t\tprivate _rootTagName: string;\n\t\tprivate _attachType: AttachType;\n\t\tprivate _handles: Function[] = [];\n\n\t\tconstructor(...args: any[]) {\n\t\t\tsuper(...args);\n\n\t\t\tconst instanceData = widgetInstanceMap.get(this)!;\n\n\t\t\tinstanceData.parentInvalidate = () => {\n\t\t\t\tthis.scheduleRender();\n\t\t\t};\n\t\t\tthis._projectionOptions = {\n\t\t\t\ttransitions: cssTransitions\n\t\t\t};\n\n\t\t\tthis._boundDoRender = this._doRender.bind(this);\n\t\t\tthis._boundRender = this.__render__.bind(this);\n\t\t\tthis.root = document.body;\n\t\t\tthis.projectorState = ProjectorAttachState.Detached;\n\t\t}\n\n\t\tpublic append(root?: Element): Handle  {\n\t\t\tconst options = {\n\t\t\t\ttype: AttachType.Append,\n\t\t\t\troot\n\t\t\t};\n\n\t\t\treturn this._attach(options);\n\t\t}\n\n\t\tpublic merge(root?: Element): Handle {\n\t\t\tconst options = {\n\t\t\t\ttype: AttachType.Merge,\n\t\t\t\troot\n\t\t\t};\n\n\t\t\treturn this._attach(options);\n\t\t}\n\n\t\tpublic replace(root?: Element): Handle  {\n\t\t\tconst options = {\n\t\t\t\ttype: AttachType.Replace,\n\t\t\t\troot\n\t\t\t};\n\n\t\t\treturn this._attach(options);\n\t\t}\n\n\t\tpublic pause() {\n\t\t\tif (this._scheduled) {\n\t\t\t\tglobal.cancelAnimationFrame(this._scheduled);\n\t\t\t\tthis._scheduled = undefined;\n\t\t\t}\n\t\t\tthis._paused = true;\n\t\t}\n\n\t\tpublic resume() {\n\t\t\tthis._paused = false;\n\t\t\tthis.scheduleRender();\n\t\t}\n\n\t\tpublic scheduleRender() {\n\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\tthis.__setProperties__(this._projectorProperties);\n\t\t\t\tthis.__setChildren__(this._projectorChildren);\n\t\t\t\t(this as any)._renderState = 1;\n\t\t\t\tif (!this._scheduled && !this._paused) {\n\t\t\t\t\tif (this._async) {\n\t\t\t\t\t\tthis._scheduled = global.requestAnimationFrame(this._boundDoRender);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._boundDoRender();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic set root(root: Element) {\n\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\tthrow new Error('Projector already attached, cannot change root element');\n\t\t\t}\n\t\t\tthis._root = root;\n\t\t}\n\n\t\tpublic get root(): Element {\n\t\t\treturn this._root;\n\t\t}\n\n\t\tpublic get async(): boolean {\n\t\t\treturn this._async;\n\t\t}\n\n\t\tpublic set async(async: boolean) {\n\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\tthrow new Error('Projector already attached, cannot change async mode');\n\t\t\t}\n\t\t\tthis._async = async;\n\t\t}\n\n\t\tpublic sandbox(doc: Document = document): void {\n\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\tthrow new Error('Projector already attached, cannot create sandbox');\n\t\t\t}\n\t\t\tthis._async = false;\n\t\t\tconst previousRoot = this.root;\n\n\t\t\t/* free up the document fragment for GC */\n\t\t\tthis.own(() => {\n\t\t\t\tthis._root = previousRoot;\n\t\t\t});\n\n\t\t\tthis._attach({\n\t\t\t\t/* DocumentFragment is not assignable to Element, but provides everything needed to work */\n\t\t\t\troot: doc.createDocumentFragment() as any,\n\t\t\t\ttype: AttachType.Append\n\t\t\t});\n\t\t}\n\n\t\tpublic setChildren(children: DNode[]): void {\n\t\t\tthis.__setChildren__(children);\n\t\t\tthis.scheduleRender();\n\t\t}\n\n\t\tpublic __setChildren__(children: DNode[]) {\n\t\t\tthis._projectorChildren = [ ...children ];\n\t\t\tsuper.__setChildren__(children);\n\t\t}\n\n\t\tpublic setProperties(properties: this['properties']): void {\n\t\t\tthis.__setProperties__(properties);\n\t\t\tthis.scheduleRender();\n\t\t}\n\n\t\tpublic __setProperties__(properties: this['properties']): void {\n\t\t\tif (this._projectorProperties && this._projectorProperties.registry !== properties.registry) {\n\t\t\t\tif (this._projectorProperties.registry) {\n\t\t\t\t\tthis._projectorProperties.registry.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._projectorProperties = assign({}, properties);\n\t\t\tsuper.__setCoreProperties__({ bind: this, baseRegistry: properties.registry });\n\t\t\tsuper.__setProperties__(properties);\n\t\t}\n\n\t\tpublic toHtml(): string {\n\t\t\tif (this.projectorState !== ProjectorAttachState.Attached || !this._projection) {\n\t\t\t\tthrow new Error('Projector is not attached, cannot return an HTML string of projection.');\n\t\t\t}\n\t\t\treturn (this._projection.domNode.childNodes[0] as Element).outerHTML;\n\t\t}\n\n\t\t@afterRender()\n\t\tpublic afterRender(result: DNode) {\n\t\t\tlet node = result;\n\t\t\tif (typeof result === 'string' || result === null || result === undefined) {\n\t\t\t\tnode = v('span', {}, [ result ]);\n\t\t\t}\n\n\t\t\treturn node;\n\t\t}\n\n\t\tprivate _doRender() {\n\t\t\tthis._scheduled = undefined;\n\n\t\t\tif (this._projection) {\n\t\t\t\tthis._projection.update(this._boundRender());\n\t\t\t}\n\t\t}\n\n\t\tprivate own(handle: Function): void {\n\t\t\tthis._handles.push(handle);\n\t\t}\n\n\t\tpublic destroy() {\n\t\t\twhile (this._handles.length > 0) {\n\t\t\t\tconst handle = this._handles.pop();\n\t\t\t\tif (handle) {\n\t\t\t\t\thandle();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate _attach({ type, root }: AttachOptions): Handle {\n\t\t\tthis._attachType = type;\n\t\t\tif (root) {\n\t\t\t\tthis.root = root;\n\t\t\t}\n\n\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\treturn this._attachHandle;\n\t\t\t}\n\n\t\t\tthis.projectorState = ProjectorAttachState.Attached;\n\n\t\t\tconst handle = () => {\n\t\t\t\tif (this.projectorState === ProjectorAttachState.Attached) {\n\t\t\t\t\tthis.pause();\n\t\t\t\t\tthis._projection = undefined;\n\t\t\t\t\tthis.projectorState = ProjectorAttachState.Detached;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.own(handle);\n\t\t\tthis._attachHandle = createHandle(handle);\n\n\t\t\tthis._projectionOptions = { ...this._projectionOptions, ...{ sync: !this._async } };\n\n\t\t\tswitch (type) {\n\t\t\t\tcase AttachType.Append:\n\t\t\t\t\tthis._projection = dom.append(this.root, this._boundRender(), this, this._projectionOptions);\n\t\t\t\tbreak;\n\t\t\t\tcase AttachType.Merge:\n\t\t\t\t\tthis._rootTagName = this._root.tagName.toLowerCase();\n\t\t\t\t\tthis._projection = dom.merge(this.root, this._boundRender(), this , this._projectionOptions);\n\t\t\t\tbreak;\n\t\t\t\tcase AttachType.Replace:\n\t\t\t\t\tthis._projection = dom.replace(this.root, this._boundRender(), this, this._projectionOptions);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn this._attachHandle;\n\t\t}\n\t}\n\n\treturn Projector;\n}\n\nexport default ProjectorMixin;\n\n\n\n// WEBPACK FOOTER //\n// Projector.ts","/*!\n * PEP v0.4.3 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 0;\n    e.height = inDict.height || 0;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture');\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture');\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(v) {\n    return 'body /shadow-deep/ ' + selector(v);\n  }\n  function selector(v) {\n    return '[touch-action=\"' + v + '\"]';\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    'none',\n    'auto',\n    'pan-x',\n    'pan-y',\n    {\n      rule: 'pan-x pan-y',\n      selectors: [\n        'pan-x pan-y',\n        'pan-y pan-x'\n      ]\n    }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        if (String(r) === r) {\n          styles += selector(r) + rule(r) + '\\n';\n          if (hasShadowRoot) {\n            styles += shadowSelector(r) + rule(r) + '\\n';\n          }\n        } else {\n          styles += r.selectors.map(selector) + rule(r.rule) + '\\n';\n          if (hasShadowRoot) {\n            styles += r.selectors.map(shadowSelector) + rule(r.rule) + '\\n';\n          }\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // This should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var CLICK_COUNT_TIMEOUT = 200;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (st) {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n      el._scrollType = undefined;\n      dispatcher.unlisten(el, this.events);\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (st && oldSt) {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (oldSt) {\n        this.elementRemoved(el);\n      } else if (st) {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      EMITTER: 'none',\n      XSCROLLER: 'pan-x',\n      YSCROLLER: 'pan-y',\n      SCROLLER: /^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/\n    },\n    touchActionToScrollType: function(touchAction) {\n      var t = touchAction;\n      var st = this.scrollTypes;\n      if (t === 'none') {\n        return 'none';\n      } else if (t === st.XSCROLLER) {\n        return 'X';\n      } else if (t === st.YSCROLLER) {\n        return 'Y';\n      } else if (st.SCROLLER.exec(t)) {\n        return 'XY';\n      }\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n        this.cancelResetClickCount();\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n        this.resetClickCount();\n      }\n    },\n    clickCount: 0,\n    resetId: null,\n    resetClickCount: function() {\n      var fn = function() {\n        this.clickCount = 0;\n        this.resetId = null;\n      }.bind(this);\n      this.resetId = setTimeout(fn, CLICK_COUNT_TIMEOUT);\n    },\n    cancelResetClickCount: function() {\n      if (this.resetId) {\n        clearTimeout(this.resetId);\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.detail = this.clickCount;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force || inTouch.webkitForce || 0.5;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      e.pointerType = this.POINTER_TYPE;\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var scrollAxis = inEvent.currentTarget._scrollType;\n        if (scrollAxis === 'none') {\n\n          // this element is a touch-action: none, should never scroll\n          ret = false;\n        } else if (scrollAxis === 'XY') {\n\n          // this element should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          // check the intended scroll axis, and other axis\n          var a = scrollAxis;\n          var oa = scrollAxis === 'Y' ? 'X' : 'Y';\n          var da = Math.abs(t['client' + a] - this.firstXY[a]);\n          var doa = Math.abs(t['client' + oa] - this.firstXY[oa]);\n\n          // if delta in the scroll axis > delta other axis, scroll instead of\n          // making events\n          ret = da >= doa;\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.clickCount++;\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          inEvent.preventDefault();\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('InvalidPointerId');\n      error.name = 'InvalidPointerId';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !Element.prototype.setPointerCapture) {\n      Object.defineProperties(Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/pepjs/dist/pep.js\n// module id = 40\n// module chunks = 0","import { VirtualDomProperties } from './../interfaces';\n\nlet browserSpecificTransitionEndEventName = '';\nlet browserSpecificAnimationEndEventName = '';\n\nfunction determineBrowserStyleNames(element: HTMLElement) {\n\tif ('WebkitTransition' in element.style) {\n\t\tbrowserSpecificTransitionEndEventName = 'webkitTransitionEnd';\n\t\tbrowserSpecificAnimationEndEventName = 'webkitAnimationEnd';\n\t}\n\telse if (('transition' in element.style) || ('MozTransition' in element.style)) {\n\t\tbrowserSpecificTransitionEndEventName = 'transitionend';\n\t\tbrowserSpecificAnimationEndEventName = 'animationend';\n\t}\n\telse {\n\t\tthrow new Error('Your browser is not supported');\n\t}\n}\n\nfunction initialize(element: HTMLElement) {\n\tif (browserSpecificAnimationEndEventName === '') {\n\t\tdetermineBrowserStyleNames(element);\n\t}\n}\n\nfunction runAndCleanUp(element: HTMLElement, startAnimation: () => void, finishAnimation: () => void) {\n\tinitialize(element);\n\n\tlet finished = false;\n\n\tlet transitionEnd = function () {\n\t\tif (!finished) {\n\t\t\tfinished = true;\n\t\t\telement.removeEventListener(browserSpecificTransitionEndEventName, transitionEnd);\n\t\t\telement.removeEventListener(browserSpecificAnimationEndEventName, transitionEnd);\n\n\t\t\tfinishAnimation();\n\t\t}\n\t};\n\n\tstartAnimation();\n\n\telement.addEventListener(browserSpecificAnimationEndEventName, transitionEnd);\n\telement.addEventListener(browserSpecificTransitionEndEventName, transitionEnd);\n}\n\nfunction exit(node: HTMLElement, properties: VirtualDomProperties, exitAnimation: string, removeNode: () => void) {\n\tconst activeClass = properties.exitAnimationActive || `${exitAnimation}-active`;\n\n\trunAndCleanUp(node, () => {\n\t\tnode.classList.add(exitAnimation);\n\n\t\trequestAnimationFrame(function () {\n\t\t\tnode.classList.add(activeClass);\n\t\t});\n\t}, () => {\n\t\tremoveNode();\n\t});\n}\n\nfunction enter(node: HTMLElement, properties: VirtualDomProperties, enterAnimation: string) {\n\tconst activeClass = properties.enterAnimationActive || `${enterAnimation}-active`;\n\n\trunAndCleanUp(node, () => {\n\t\tnode.classList.add(enterAnimation);\n\n\t\trequestAnimationFrame(function () {\n\t\t\tnode.classList.add(activeClass);\n\t\t});\n\t}, () => {\n\t\tnode.classList.remove(enterAnimation);\n\t\tnode.classList.remove(activeClass);\n\t});\n}\n\nexport default {\n\tenter,\n\texit\n};\n\n\n\n// WEBPACK FOOTER //\n// cssTransitions.ts","import { handleDecorator } from './handleDecorator';\n\n/**\n * Decorator that can be used to register a function to run as an aspect to `render`\n */\nexport function afterRender(method: Function): (target: any) => void;\nexport function afterRender(): (target: any, propertyKey: string) => void;\nexport function afterRender(method?: Function) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator('afterRender', propertyKey ? target[propertyKey] : method);\n\t});\n}\n\nexport default afterRender;\n\n\n\n// WEBPACK FOOTER //\n// afterRender.ts","import global from './global';\nimport has from './support/has';\nimport { wrapNative } from './support/util';\n\nexport interface StringNormalize {\n\t/**\n\t * Returns the String value result of normalizing the string into the normalization form\n\t * named by form as specified in Unicode Standard Annex #15, Unicode Normalization Forms.\n\t * @param target The target string\n\t * @param form Applicable values: \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", If not specified default\n\t * is \"NFC\"\n\t */\n\t(target: string, form: 'NFC' | 'NFD' | 'NFKC' | 'NFKD'): string;\n\n\t/**\n\t * Returns the String value result of normalizing the string into the normalization form\n\t * named by form as specified in Unicode Standard Annex #15, Unicode Normalization Forms.\n\t * @param target The target string\n\t * @param form Applicable values: \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", If not specified default\n\t * is \"NFC\"\n\t */\n\t(target: string, form?: string): string;\n}\n\n/**\n * The minimum location of high surrogates\n */\nexport const HIGH_SURROGATE_MIN = 0xD800;\n\n/**\n * The maximum location of high surrogates\n */\nexport const HIGH_SURROGATE_MAX = 0xDBFF;\n\n/**\n * The minimum location of low surrogates\n */\nexport const LOW_SURROGATE_MIN = 0xDC00;\n\n/**\n * The maximum location of low surrogates\n */\nexport const LOW_SURROGATE_MAX = 0xDFFF;\n\n/* ES6 static methods */\n\n/**\n * Return the String value whose elements are, in order, the elements in the List elements.\n * If length is 0, the empty string is returned.\n * @param codePoints The code points to generate the string\n */\nexport let fromCodePoint: (...codePoints: number[]) => string;\n\n/**\n * `raw` is intended for use as a tag function of a Tagged Template String. When called\n * as such the first argument will be a well formed template call site object and the rest\n * parameter will contain the substitution values.\n * @param template A well-formed template string call site representation.\n * @param substitutions A set of substitution values.\n */\nexport let raw: (template: TemplateStringsArray, ...substitutions: any[]) => string;\n\n/* ES6 instance methods */\n\n/**\n * Returns a nonnegative integer Number less than 1114112 (0x110000) that is the code point\n * value of the UTF-16 encoded code point starting at the string element at position pos in\n * the String resulting from converting this object to a String.\n * If there is no element at that position, the result is undefined.\n * If a valid UTF-16 surrogate pair does not begin at pos, the result is the code unit at pos.\n */\nexport let codePointAt: (target: string, pos?: number) => number | undefined;\n\n/**\n * Returns true if the sequence of elements of searchString converted to a String is the\n * same as the corresponding elements of this object (converted to a String) starting at\n * endPosition  length(this). Otherwise returns false.\n */\nexport let endsWith: (target: string, searchString: string, endPosition?: number) => boolean;\n\n/**\n * Returns true if searchString appears as a substring of the result of converting this\n * object to a String, at one or more positions that are\n * greater than or equal to position; otherwise, returns false.\n * @param target The target string\n * @param searchString search string\n * @param position If position is undefined, 0 is assumed, so as to search all of the String.\n */\nexport let includes: (target: string, searchString: string, position?: number) => boolean;\n\n/**\n * Returns the String value result of normalizing the string into the normalization form\n * named by form as specified in Unicode Standard Annex #15, Unicode Normalization Forms.\n * @param target The target string\n * @param form Applicable values: \"NFC\", \"NFD\", \"NFKC\", or \"NFKD\", If not specified default\n * is \"NFC\"\n */\nexport let normalize: StringNormalize;\n\n/**\n * Returns a String value that is made from count copies appended together. If count is 0,\n * T is the empty String is returned.\n * @param count number of copies to append\n */\nexport let repeat: (target: string, count?: number) => string;\n\n/**\n * Returns true if the sequence of elements of searchString converted to a String is the\n * same as the corresponding elements of this object (converted to a String) starting at\n * position. Otherwise returns false.\n */\nexport let startsWith: (target: string, searchString: string, position?: number) => boolean;\n\n/* ES7 instance methods */\n\n/**\n * Pads the current string with a given string (possibly repeated) so that the resulting string reaches a given length.\n * The padding is applied from the end (right) of the current string.\n *\n * @param target The target string\n * @param maxLength The length of the resulting string once the current string has been padded.\n *        If this parameter is smaller than the current string's length, the current string will be returned as it is.\n *\n * @param fillString The string to pad the current string with.\n *        If this string is too long, it will be truncated and the left-most part will be applied.\n *        The default value for this parameter is \" \" (U+0020).\n */\nexport let padEnd: (target: string, maxLength: number, fillString?: string) => string;\n\n/**\n * Pads the current string with a given string (possibly repeated) so that the resulting string reaches a given length.\n * The padding is applied from the start (left) of the current string.\n *\n * @param target The target string\n * @param maxLength The length of the resulting string once the current string has been padded.\n *        If this parameter is smaller than the current string's length, the current string will be returned as it is.\n *\n * @param fillString The string to pad the current string with.\n *        If this string is too long, it will be truncated and the left-most part will be applied.\n *        The default value for this parameter is \" \" (U+0020).\n */\nexport let padStart: (target: string, maxLength: number, fillString?: string) => string;\n\nif (has('es6-string') && has('es6-string-raw')) {\n\tfromCodePoint = global.String.fromCodePoint;\n\traw = global.String.raw;\n\n\tcodePointAt = wrapNative(global.String.prototype.codePointAt);\n\tendsWith = wrapNative(global.String.prototype.endsWith);\n\tincludes = wrapNative(global.String.prototype.includes);\n\tnormalize = wrapNative(global.String.prototype.normalize);\n\trepeat = wrapNative(global.String.prototype.repeat);\n\tstartsWith = wrapNative(global.String.prototype.startsWith);\n}\nelse {\n\t/**\n\t * Validates that text is defined, and normalizes position (based on the given default if the input is NaN).\n\t * Used by startsWith, includes, and endsWith.\n\t *\n\t * @return Normalized position.\n\t */\n\tconst normalizeSubstringArgs = function(name: string, text: string, search: string, position: number,\n\t\t\tisEnd: boolean = false): [ string, string, number ] {\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.' + name + ' requires a valid string to search against.');\n\t\t}\n\n\t\tconst length = text.length;\n\t\tposition = position !== position ? (isEnd ? length : 0) : position;\n\t\treturn [ text, String(search), Math.min(Math.max(position, 0), length) ];\n\t};\n\n\tfromCodePoint = function fromCodePoint(...codePoints: number[]): string {\n\t\t// Adapted from https://github.com/mathiasbynens/String.fromCodePoint\n\t\tconst length = arguments.length;\n\t\tif (!length) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst fromCharCode = String.fromCharCode;\n\t\tconst MAX_SIZE = 0x4000;\n\t\tlet codeUnits: number[] = [];\n\t\tlet index = -1;\n\t\tlet result = '';\n\n\t\twhile (++index < length) {\n\t\t\tlet codePoint = Number(arguments[index]);\n\n\t\t\t// Code points must be finite integers within the valid range\n\t\t\tlet isValid = isFinite(codePoint) && Math.floor(codePoint) === codePoint &&\n\t\t\t\tcodePoint >= 0 && codePoint <= 0x10FFFF;\n\t\t\tif (!isValid) {\n\t\t\t\tthrow RangeError('string.fromCodePoint: Invalid code point ' + codePoint);\n\t\t\t}\n\n\t\t\tif (codePoint <= 0xFFFF) {\n\t\t\t\t// BMP code point\n\t\t\t\tcodeUnits.push(codePoint);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Astral code point; split in surrogate halves\n\t\t\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\t\t\tcodePoint -= 0x10000;\n\t\t\t\tlet highSurrogate = (codePoint >> 10) + HIGH_SURROGATE_MIN;\n\t\t\t\tlet lowSurrogate = (codePoint % 0x400) + LOW_SURROGATE_MIN;\n\t\t\t\tcodeUnits.push(highSurrogate, lowSurrogate);\n\t\t\t}\n\n\t\t\tif (index + 1 === length || codeUnits.length > MAX_SIZE) {\n\t\t\t\tresult += fromCharCode.apply(null, codeUnits);\n\t\t\t\tcodeUnits.length = 0;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\n\traw = function raw(callSite: TemplateStringsArray, ...substitutions: any[]): string {\n\t\tlet rawStrings = callSite.raw;\n\t\tlet result = '';\n\t\tlet numSubstitutions = substitutions.length;\n\n\t\tif (callSite == null || callSite.raw == null) {\n\t\t\tthrow new TypeError('string.raw requires a valid callSite object with a raw value');\n\t\t}\n\n\t\tfor (let i = 0, length = rawStrings.length; i < length; i++) {\n\t\t\tresult += rawStrings[i] + (i < numSubstitutions && i < length - 1 ? substitutions[i] : '');\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tcodePointAt = function codePointAt(text: string, position: number = 0): number | undefined {\n\t\t// Adapted from https://github.com/mathiasbynens/String.prototype.codePointAt\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.codePointAt requries a valid string.');\n\t\t}\n\t\tconst length = text.length;\n\n\t\tif (position !== position) {\n\t\t\tposition = 0;\n\t\t}\n\t\tif (position < 0 || position >= length) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Get the first code unit\n\t\tconst first = text.charCodeAt(position);\n\t\tif (first >= HIGH_SURROGATE_MIN && first <= HIGH_SURROGATE_MAX && length > position + 1) {\n\t\t\t// Start of a surrogate pair (high surrogate and there is a next code unit); check for low surrogate\n\t\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\t\tconst second = text.charCodeAt(position + 1);\n\t\t\tif (second >= LOW_SURROGATE_MIN && second <= LOW_SURROGATE_MAX) {\n\t\t\t\treturn (first - HIGH_SURROGATE_MIN) * 0x400 + second - LOW_SURROGATE_MIN + 0x10000;\n\t\t\t}\n\t\t}\n\t\treturn first;\n\t};\n\n\tendsWith = function endsWith(text: string, search: string, endPosition?: number): boolean {\n\t\tif (endPosition == null) {\n\t\t\tendPosition = text.length;\n\t\t}\n\n\t\t[ text, search, endPosition ] = normalizeSubstringArgs('endsWith', text, search, endPosition, true);\n\n\t\tconst start = endPosition - search.length;\n\t\tif (start < 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn text.slice(start, endPosition) === search;\n\t};\n\n\tincludes = function includes(text: string, search: string, position: number = 0): boolean {\n\t\t[ text, search, position ] = normalizeSubstringArgs('includes', text, search, position);\n\t\treturn text.indexOf(search, position) !== -1;\n\t};\n\n\trepeat = function repeat(text: string, count: number = 0): string {\n\t\t// Adapted from https://github.com/mathiasbynens/String.prototype.repeat\n\t\tif (text == null) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\t\tif (count !== count) {\n\t\t\tcount = 0;\n\t\t}\n\t\tif (count < 0 || count === Infinity) {\n\t\t\tthrow new RangeError('string.repeat requires a non-negative finite count.');\n\t\t}\n\n\t\tlet result = '';\n\t\twhile (count) {\n\t\t\tif (count % 2) {\n\t\t\t\tresult += text;\n\t\t\t}\n\t\t\tif (count > 1) {\n\t\t\t\ttext += text;\n\t\t\t}\n\t\t\tcount >>= 1;\n\t\t}\n\t\treturn result;\n\t};\n\n\tstartsWith = function startsWith(text: string, search: string, position: number = 0): boolean {\n\t\tsearch = String(search);\n\t\t[ text, search, position ] = normalizeSubstringArgs('startsWith', text, search, position);\n\n\t\tconst end = position + search.length;\n\t\tif (end > text.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn text.slice(position, end) === search;\n\t};\n}\n\nif (has('es2017-string')) {\n\tpadEnd = wrapNative(global.String.prototype.padEnd);\n\tpadStart = wrapNative(global.String.prototype.padStart);\n}\nelse {\n\tpadEnd = function padEnd(text: string, maxLength: number, fillString: string = ' '): string {\n\t\tif (text === null || text === undefined) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\n\t\tif (maxLength === Infinity) {\n\t\t\tthrow new RangeError('string.padEnd requires a non-negative finite count.');\n\t\t}\n\n\t\tif (maxLength === null || maxLength === undefined || maxLength < 0) {\n\t\t\tmaxLength = 0;\n\t\t}\n\n\t\tlet strText = String(text);\n\t\tconst padding = maxLength - strText.length;\n\n\t\tif (padding > 0) {\n\t\t\tstrText += repeat(fillString, Math.floor(padding / fillString.length)) + fillString.slice(0, padding % fillString.length);\n\t\t}\n\n\t\treturn strText;\n\t};\n\n\tpadStart = function padStart(text: string, maxLength: number, fillString: string = ' '): string {\n\t\tif (text === null || text === undefined) {\n\t\t\tthrow new TypeError('string.repeat requires a valid string.');\n\t\t}\n\n\t\tif (maxLength === Infinity) {\n\t\t\tthrow new RangeError('string.padStart requires a non-negative finite count.');\n\t\t}\n\n\t\tif (maxLength === null || maxLength === undefined || maxLength < 0) {\n\t\t\tmaxLength = 0;\n\t\t}\n\n\t\tlet strText = String(text);\n\t\tconst padding = maxLength - strText.length;\n\n\t\tif (padding > 0) {\n\t\t\tstrText = repeat(fillString, Math.floor(padding / fillString.length)) + fillString.slice(0, padding % fillString.length) + strText;\n\t\t}\n\n\t\treturn strText;\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// string.ts","import global from './global';\n\n/**\n * The smallest interval between two representable numbers.\n */\nexport const EPSILON = 1;\n\n/**\n * The maximum safe integer in JavaScript\n */\nexport const MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;\n\n/**\n * The minimum safe integer in JavaScript\n */\nexport const MIN_SAFE_INTEGER = -MAX_SAFE_INTEGER;\n\n/**\n * Determines whether the passed value is NaN without coersion.\n *\n * @param value The value to test\n * @return true if the value is NaN, false if it is not\n */\nexport function isNaN(value: any): boolean {\n\treturn typeof value === 'number' && global.isNaN(value);\n}\n\n/**\n * Determines whether the passed value is a finite number without coersion.\n *\n * @param value The value to test\n * @return true if the value is finite, false if it is not\n */\nexport function isFinite(value: any): value is number {\n\treturn typeof value === 'number' && global.isFinite(value);\n}\n\n/**\n * Determines whether the passed value is an integer.\n *\n * @param value The value to test\n * @return true if the value is an integer, false if it is not\n */\nexport function isInteger(value: any): value is number {\n\treturn isFinite(value) && Math.floor(value) === value;\n}\n\n/**\n * Determines whether the passed value is an integer that is 'safe,' meaning:\n *   1. it can be expressed as an IEEE-754 double precision number\n *   2. it has a one-to-one mapping to a mathematical integer, meaning its\n *      IEEE-754 representation cannot be the result of rounding any other\n *      integer to fit the IEEE-754 representation\n *\n * @param value The value to test\n * @return true if the value is an integer, false if it is not\n */\nexport function isSafeInteger(value: any): value is number {\n\treturn isInteger(value) && Math.abs(value) <= MAX_SAFE_INTEGER;\n}\n\n\n\n// WEBPACK FOOTER //\n// number.ts","import global from '../global';\nimport has from './has';\nimport { Handle } from '../interfaces';\n\nfunction executeTask(item: QueueItem | undefined): void {\n\tif (item && item.isActive && item.callback) {\n\t\titem.callback();\n\t}\n}\n\nfunction getQueueHandle(item: QueueItem, destructor?: (...args: any[]) => any): Handle {\n\treturn {\n\t\tdestroy: function (this: Handle) {\n\t\t\tthis.destroy = function () {};\n\t\t\titem.isActive = false;\n\t\t\titem.callback = null;\n\n\t\t\tif (destructor) {\n\t\t\t\tdestructor();\n\t\t\t}\n\t\t}\n\t};\n}\n\ninterface PostMessageEvent extends Event {\n\tsource: any;\n\tdata: string;\n}\n\nexport interface QueueItem {\n\tisActive: boolean;\n\tcallback: null | ((...args: any[]) => any);\n}\n\nlet checkMicroTaskQueue: () => void;\nlet microTasks: QueueItem[];\n\n/**\n * Schedules a callback to the macrotask queue.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexport const queueTask = (function() {\n\tlet destructor: (...args: any[]) => any;\n\tlet enqueue: (item: QueueItem) => void;\n\n\t// Since the IE implementation of `setImmediate` is not flawless, we will test for `postMessage` first.\n\tif (has('postmessage')) {\n\t\tconst queue: QueueItem[] = [];\n\n\t\tglobal.addEventListener('message', function (event: PostMessageEvent): void {\n\t\t\t// Confirm that the event was triggered by the current window and by this particular implementation.\n\t\t\tif (event.source === global && event.data === 'dojo-queue-message') {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tif (queue.length) {\n\t\t\t\t\texecuteTask(queue.shift());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tqueue.push(item);\n\t\t\tglobal.postMessage('dojo-queue-message', '*');\n\t\t};\n\t}\n\telse if (has('setimmediate')) {\n\t\tdestructor = global.clearImmediate;\n\t\tenqueue = function (item: QueueItem): any {\n\t\t\treturn setImmediate(executeTask.bind(null, item));\n\t\t};\n\t}\n\telse {\n\t\tdestructor = global.clearTimeout;\n\t\tenqueue = function (item: QueueItem): any {\n\t\t\treturn setTimeout(executeTask.bind(null, item), 0);\n\t\t};\n\t}\n\n\tfunction queueTask(callback: (...args: any[]) => any): Handle {\n\t\tconst item: QueueItem = {\n\t\t\tisActive: true,\n\t\t\tcallback: callback\n\t\t};\n\t\tconst id: any = enqueue(item);\n\n\t\treturn getQueueHandle(item, destructor && function () {\n\t\t\t\tdestructor(id);\n\t\t\t});\n\t};\n\n\t// TODO: Use aspect.before when it is available.\n\treturn has('microtasks') ? queueTask : function (callback: (...args: any[]) => any): Handle {\n\t\t\tcheckMicroTaskQueue();\n\t\t\treturn queueTask(callback);\n\t\t};\n})();\n\n// When no mechanism for registering microtasks is exposed by the environment, microtasks will\n// be queued and then executed in a single macrotask before the other macrotasks are executed.\nif (!has('microtasks')) {\n\tlet isMicroTaskQueued = false;\n\n\tmicroTasks = [];\n\tcheckMicroTaskQueue = function (): void {\n\t\tif (!isMicroTaskQueued) {\n\t\t\tisMicroTaskQueued = true;\n\t\t\tqueueTask(function () {\n\t\t\t\tisMicroTaskQueued = false;\n\n\t\t\t\tif (microTasks.length) {\n\t\t\t\t\tlet item: QueueItem | undefined;\n\t\t\t\t\twhile (item = microTasks.shift()) {\n\t\t\t\t\t\texecuteTask(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n}\n\n/**\n * Schedules an animation task with `window.requestAnimationFrame` if it exists, or with `queueTask` otherwise.\n *\n * Since requestAnimationFrame's behavior does not match that expected from `queueTask`, it is not used there.\n * However, at times it makes more sense to delegate to requestAnimationFrame; hence the following method.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexport const queueAnimationTask = (function () {\n\tif (!has('raf')) {\n\t\treturn queueTask;\n\t}\n\n\tfunction queueAnimationTask(callback: (...args: any[]) => any): Handle {\n\t\tconst item: QueueItem = {\n\t\t\tisActive: true,\n\t\t\tcallback: callback\n\t\t};\n\t\tconst rafId: number = requestAnimationFrame(executeTask.bind(null, item));\n\n\t\treturn getQueueHandle(item, function () {\n\t\t\tcancelAnimationFrame(rafId);\n\t\t});\n\t}\n\n\t// TODO: Use aspect.before when it is available.\n\treturn has('microtasks') ? queueAnimationTask : function (callback: (...args: any[]) => any): Handle {\n\t\t\tcheckMicroTaskQueue();\n\t\t\treturn queueAnimationTask(callback);\n\t\t};\n})();\n\n/**\n * Schedules a callback to the microtask queue.\n *\n * Any callbacks registered with `queueMicroTask` will be executed before the next macrotask. If no native\n * mechanism for scheduling macrotasks is exposed, then any callbacks will be fired before any macrotask\n * registered with `queueTask` or `queueAnimationTask`.\n *\n * @param callback the function to be queued and later executed.\n * @returns An object with a `destroy` method that, when called, prevents the registered callback from executing.\n */\nexport let queueMicroTask = (function () {\n\tlet enqueue: (item: QueueItem) => void;\n\n\tif (has('host-node')) {\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tglobal.process.nextTick(executeTask.bind(null, item));\n\t\t};\n\t}\n\telse if (has('es6-promise')) {\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tglobal.Promise.resolve(item).then(executeTask);\n\t\t};\n\t}\n\telse if (has('dom-mutationobserver')) {\n\t\t/* tslint:disable-next-line:variable-name */\n\t\tconst HostMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\t\tconst node = document.createElement('div');\n\t\tconst queue: QueueItem[] = [];\n\t\tconst observer = new HostMutationObserver(function (): void {\n\t\t\twhile (queue.length > 0) {\n\t\t\t\tconst item = queue.shift();\n\t\t\t\tif (item && item.isActive && item.callback) {\n\t\t\t\t\titem.callback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tobserver.observe(node, { attributes: true });\n\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tqueue.push(item);\n\t\t\tnode.setAttribute('queueStatus', '1');\n\t\t};\n\t}\n\telse {\n\t\tenqueue = function (item: QueueItem): void {\n\t\t\tcheckMicroTaskQueue();\n\t\t\tmicroTasks.push(item);\n\t\t};\n\t}\n\n\treturn function (callback: (...args: any[]) => any): Handle {\n\t\tconst item: QueueItem = {\n\t\t\tisActive: true,\n\t\t\tcallback: callback\n\t\t};\n\n\t\tenqueue(item);\n\n\t\treturn getQueueHandle(item);\n\t};\n})();\n\n\n\n// WEBPACK FOOTER //\n// queue.ts","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/timers-browserify/main.js\n// module id = 46\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/setimmediate/setImmediate.js\n// module id = 47\n// module chunks = 0","import { Handle } from '@dojo/interfaces/core';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport { createHandle } from './lang';\n\n/**\n * An object that provides the necessary APIs to be MapLike\n */\nexport interface MapLike<K, V> {\n\tget(key: K): V;\n\tset(key: K, value?: V): this;\n}\n\n/**\n * An internal type guard that determines if an value is MapLike or not\n *\n * @param value The value to guard against\n */\nfunction isMapLike(value: any): value is MapLike<any, any> {\n\treturn value && typeof value.get === 'function' && typeof value.set === 'function';\n}\n\nexport interface Indexable {\n\t[method: string]: any;\n}\n\n/**\n * The types of objects or maps where advice can be applied\n */\nexport type Targetable = MapLike<string, any> | Indexable;\n\ntype AdviceType = 'before' | 'after' | 'around';\n\n/**\n * A meta data structure when applying advice\n */\ninterface Advised {\n\treadonly id?: number;\n\tadvice?: Function;\n\tprevious?: Advised;\n\tnext?: Advised;\n\treadonly receiveArguments?: boolean;\n}\n\n/**\n * A function that dispatches advice which is decorated with additional\n * meta data about the advice to apply\n */\ninterface Dispatcher {\n\t[ type: string ]: Advised | undefined;\n\t(): any;\n\ttarget: any;\n\tbefore?: Advised;\n\taround?: Advised;\n\tafter?: Advised;\n}\n\nexport interface JoinPointDispatchAdvice<T> {\n\tbefore?: JoinPointBeforeAdvice[];\n\tafter?: JoinPointAfterAdvice<T>[];\n\treadonly joinPoint: Function;\n}\n\nexport interface JoinPointAfterAdvice<T> {\n\t/**\n\t * Advice which is applied *after*, receiving the result and arguments from the join point.\n\t *\n\t * @param result The result from the function being advised\n\t * @param args The arguments that were supplied to the advised function\n\t * @returns The value returned from the advice is then the result of calling the method\n\t */\n\t(result: T, ...args: any[]): T;\n}\n\nexport interface JoinPointAroundAdvice<T> {\n\t/**\n\t * Advice which is applied *around*.  The advising function receives the original function and\n\t * needs to return a new function which will then invoke the original function.\n\t *\n\t * @param origFn The original function\n\t * @returns A new function which will invoke the original function.\n\t */\n\t(origFn: GenericFunction<T>): (...args: any[]) => T;\n}\n\nexport interface JoinPointBeforeAdvice {\n\t/**\n\t * Advice which is applied *before*, receiving the original arguments, if the advising\n\t * function returns a value, it is passed further along taking the place of the original\n\t * arguments.\n\t *\n\t * @param args The arguments the method was called with\n\t */\n\t(...args: any[]): any[] | void;\n}\n\nexport interface GenericFunction<T> {\n\t(...args: any[]): T;\n}\n\n/**\n * A weak map of dispatchers used to apply the advice\n */\nconst dispatchAdviceMap = new WeakMap<Function, JoinPointDispatchAdvice<any>>();\n\n/**\n * A UID for tracking advice ordering\n */\nlet nextId = 0;\n\n/**\n * Internal function that advises a join point\n *\n * @param dispatcher The current advice dispatcher\n * @param type The type of before or after advice to apply\n * @param advice The advice to apply\n * @param receiveArguments If true, the advice will receive the arguments passed to the join point\n * @return The handle that will remove the advice\n */\nfunction adviseObject(\n\tdispatcher: Dispatcher | undefined,\n\ttype: AdviceType,\n\tadvice: Function | undefined,\n\treceiveArguments?: boolean\n): Handle {\n\tlet previous = dispatcher && dispatcher[type];\n\tlet advised: Advised | undefined = {\n\t\tid: nextId++,\n\t\tadvice: advice,\n\t\treceiveArguments: receiveArguments\n\t};\n\n\tif (previous) {\n\t\tif (type === 'after') {\n\t\t\t// add the listener to the end of the list\n\t\t\t// note that we had to change this loop a little bit to workaround a bizarre IE10 JIT bug\n\t\t\twhile (previous.next && (previous = previous.next)) {}\n\t\t\tprevious.next = advised;\n\t\t\tadvised.previous = previous;\n\t\t}\n\t\telse {\n\t\t\t// add to the beginning\n\t\t\tif (dispatcher) {\n\t\t\t\tdispatcher.before = advised;\n\t\t\t}\n\t\t\tadvised.next = previous;\n\t\t\tprevious.previous = advised;\n\t\t}\n\t}\n\telse {\n\t\tdispatcher && (dispatcher[type] = advised);\n\t}\n\n\tadvice = previous = undefined;\n\n\treturn createHandle(function () {\n\t\tlet { previous = undefined, next = undefined } = (advised || {});\n\n\t\tif (dispatcher && !previous && !next) {\n\t\t\tdispatcher[type] = undefined;\n\t\t}\n\t\telse {\n\t\t\tif (previous) {\n\t\t\t\tprevious.next = next;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdispatcher && (dispatcher[type] = next);\n\t\t\t}\n\n\t\t\tif (next) {\n\t\t\t\tnext.previous = previous;\n\t\t\t}\n\t\t}\n\t\tif (advised) {\n\t\t\tdelete advised.advice;\n\t\t}\n\t\tdispatcher = advised = undefined;\n\t});\n}\n\n/**\n * Advise a join point (function) with supplied advice\n *\n * @param joinPoint The function to be advised\n * @param type The type of advice to be applied\n * @param advice The advice to apply\n */\nfunction adviseJoinPoint<F extends GenericFunction<T>, T>(this: any, joinPoint: F, type: AdviceType, advice: JoinPointBeforeAdvice | JoinPointAfterAdvice<T> | JoinPointAroundAdvice<T>): F {\n\tlet dispatcher: F;\n\tif (type === 'around') {\n\t\tdispatcher = getJoinPointDispatcher(advice.apply(this, [ joinPoint ]));\n\t}\n\telse {\n\t\tdispatcher = getJoinPointDispatcher(joinPoint);\n\t\t// cannot have undefined in map due to code logic, using !\n\t\tconst adviceMap = dispatchAdviceMap.get(dispatcher)!;\n\t\tif (type === 'before') {\n\t\t\t(adviceMap.before || (adviceMap.before = [])).unshift(<JoinPointBeforeAdvice> advice);\n\t\t}\n\t\telse {\n\t\t\t(adviceMap.after || (adviceMap.after = [])).push(advice);\n\t\t}\n\t}\n\treturn dispatcher;\n}\n\n/**\n * An internal function that resolves or creates the dispatcher for a given join point\n *\n * @param target The target object or map\n * @param methodName The name of the method that the dispatcher should be resolved for\n * @return The dispatcher\n */\nfunction getDispatcherObject(target: Targetable, methodName: string): Dispatcher {\n\tconst existing = isMapLike(target) ? target.get(methodName) : target && target[methodName];\n\tlet dispatcher: Dispatcher;\n\n\tif (!existing || existing.target !== target) {\n\t\t/* There is no existing dispatcher, therefore we will create one */\n\t\tdispatcher = <Dispatcher> function (this: Dispatcher): any {\n\t\t\tlet executionId = nextId;\n\t\t\tlet args = arguments;\n\t\t\tlet results: any;\n\t\t\tlet before = dispatcher.before;\n\n\t\t\twhile (before) {\n\t\t\t\tif (before.advice) {\n\t\t\t\t\targs = before.advice.apply(this, args) || args;\n\t\t\t\t}\n\t\t\t\tbefore = before.next;\n\t\t\t}\n\n\t\t\tif (dispatcher.around && dispatcher.around.advice) {\n\t\t\t\tresults = dispatcher.around.advice(this, args);\n\t\t\t}\n\n\t\t\tlet after = dispatcher.after;\n\t\t\twhile (after && after.id !== undefined && after.id < executionId) {\n\t\t\t\tif (after.advice) {\n\t\t\t\t\tif (after.receiveArguments) {\n\t\t\t\t\t\tlet newResults = after.advice.apply(this, args);\n\t\t\t\t\t\tresults = newResults === undefined ? results : newResults;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresults = after.advice.call(this, results, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tafter = after.next;\n\t\t\t}\n\n\t\t\treturn results;\n\t\t};\n\n\t\tif (isMapLike(target)) {\n\t\t\ttarget.set(methodName, dispatcher);\n\t\t}\n\t\telse {\n\t\t\ttarget && (target[methodName] = dispatcher);\n\t\t}\n\n\t\tif (existing) {\n\t\t\tdispatcher.around = {\n\t\t\t\tadvice: function (target: any, args: any[]): any {\n\t\t\t\t\treturn existing.apply(target, args);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tdispatcher.target = target;\n\t}\n\telse {\n\t\tdispatcher = existing;\n\t}\n\n\treturn dispatcher;\n}\n\n/**\n * Returns the dispatcher function for a given joinPoint (method/function)\n *\n * @param joinPoint The function that is to be advised\n */\nfunction getJoinPointDispatcher<F extends GenericFunction<T>, T>(joinPoint: F): F {\n\n\tfunction dispatcher(this: Function, ...args: any[]): T {\n\t\t// cannot have undefined in map due to code logic, using !\n\t\tconst { before, after, joinPoint } = dispatchAdviceMap.get(dispatcher)!;\n\t\tif (before) {\n\t\t\targs = before.reduce((previousArgs, advice) => {\n\t\t\t\tconst currentArgs = advice.apply(this, previousArgs);\n\t\t\t\treturn currentArgs || previousArgs;\n\t\t\t}, args);\n\t\t}\n\t\tlet result = joinPoint.apply(this, args);\n\t\tif (after) {\n\t\t\tresult = after.reduce((previousResult, advice) => {\n\t\t\t\treturn advice.apply(this, [ previousResult ].concat(args));\n\t\t\t}, result);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/* We want to \"clone\" the advice that has been applied already, if this\n\t * joinPoint is already advised */\n\tif (dispatchAdviceMap.has(joinPoint)) {\n\t\t// cannot have undefined in map due to code logic, using !\n\t\tconst adviceMap = dispatchAdviceMap.get(joinPoint)!;\n\t\tlet { before, after } = adviceMap;\n\t\tif (before) {\n\t\t\tbefore = before.slice(0);\n\t\t}\n\t\tif (after) {\n\t\t\tafter = after.slice(0);\n\t\t}\n\t\tdispatchAdviceMap.set(dispatcher, {\n\t\t\tjoinPoint: adviceMap.joinPoint,\n\t\t\tbefore,\n\t\t\tafter\n\t\t});\n\t}\n\t/* Otherwise, this is a new joinPoint, so we will create the advice map afresh */\n\telse {\n\t\tdispatchAdviceMap.set(dispatcher, { joinPoint });\n\t}\n\n\treturn dispatcher as F;\n}\n\n/**\n * Apply advice *after* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The after advice\n */\nfunction afterJoinPoint<F extends GenericFunction<T>, T>(joinPoint: F, advice: JoinPointAfterAdvice<T>): F {\n\treturn adviseJoinPoint(joinPoint, 'after', advice);\n}\n\n/**\n * Attaches \"after\" advice to be executed after the original method.\n * The advising function will receive the original method's return value and arguments object.\n * The value it returns will be returned from the method when it is called (even if the return value is undefined).\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original method's return value and arguments object\n * @return A handle which will remove the aspect when destroy is called\n */\nfunction afterObject(target: Targetable, methodName: string, advice: (originalReturn: any, originalArgs: IArguments) => any): Handle {\n\treturn adviseObject(getDispatcherObject(target, methodName), 'after', advice);\n}\n\n/**\n * Attaches \"after\" advice to be executed after the original method.\n * The advising function will receive the original method's return value and arguments object.\n * The value it returns will be returned from the method when it is called (even if the return value is undefined).\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original method's return value and arguments object\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function after(target: Targetable, methodName: string, advice: (originalReturn: any, originalArgs: IArguments) => any): Handle;\n/**\n * Apply advice *after* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The after advice\n */\nexport function after<F extends GenericFunction<T>, T>(joinPoint: F, advice: JoinPointAfterAdvice<T>): F;\nexport function after<F extends GenericFunction<T>, T>(joinPointOrTarget: F | Targetable, methodNameOrAdvice: string | JoinPointAfterAdvice<T>, objectAdvice?: (originalReturn: any, originalArgs: IArguments) => any): Handle | F {\n\tif (typeof joinPointOrTarget === 'function') {\n\t\treturn afterJoinPoint(joinPointOrTarget, <JoinPointAfterAdvice<T>> methodNameOrAdvice);\n\t}\n\telse {\n\t\treturn afterObject(joinPointOrTarget, <string> methodNameOrAdvice, objectAdvice!);\n\t}\n}\n\n/**\n * Apply advice *around* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The around advice\n */\nexport function aroundJoinPoint<F extends GenericFunction<T>, T>(joinPoint: F, advice: JoinPointAroundAdvice<T>): F {\n\treturn adviseJoinPoint<F, T>(joinPoint, 'around', advice);\n}\n\n/**\n * Attaches \"around\" advice around the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original function\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function aroundObject(target: Targetable, methodName: string, advice: ((previous: Function) => Function)): Handle {\n\tlet dispatcher: Dispatcher | undefined = getDispatcherObject(target, methodName);\n\tlet previous = dispatcher.around;\n\tlet advised: Function | undefined;\n\tif (advice) {\n\t\tadvised = advice(function (this: Dispatcher): any {\n\t\t\tif (previous && previous.advice) {\n\t\t\t\treturn previous.advice(this, arguments);\n\t\t\t}\n\t\t});\n\t}\n\n\tdispatcher.around = {\n\t\tadvice: function (target: any, args: any[]): any {\n\t\t\treturn advised ? advised.apply(target, args) : previous && previous.advice && previous.advice(target, args);\n\t\t}\n\t};\n\n\treturn createHandle(function () {\n\t\tadvised = dispatcher = undefined;\n\t});\n}\n\n/**\n * Attaches \"around\" advice around the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the original function\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function around(target: Targetable, methodName: string, advice: ((previous: Function) => Function)): Handle;\n/**\n * Apply advice *around* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The around advice\n */\nexport function around<F extends GenericFunction<T>, T>(joinPoint: F, advice: JoinPointAroundAdvice<T>): F;\nexport function around<F extends GenericFunction<T>, T>(joinPointOrTarget: F | Targetable, methodNameOrAdvice: string | JoinPointAroundAdvice<T>, objectAdvice?: ((previous: Function) => Function)): Handle | F {\n\tif (typeof joinPointOrTarget === 'function') {\n\t\treturn aroundJoinPoint(joinPointOrTarget, <JoinPointAroundAdvice<T>> methodNameOrAdvice);\n\t}\n\telse {\n\t\treturn aroundObject(joinPointOrTarget, <string> methodNameOrAdvice, objectAdvice!);\n\t}\n}\n\n/**\n * Apply advice *before* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The before advice\n */\nexport function beforeJoinPoint<F extends GenericFunction<any>>(joinPoint: F, advice: JoinPointBeforeAdvice): F {\n\treturn adviseJoinPoint(joinPoint, 'before', advice);\n}\n\n/**\n * Attaches \"before\" advice to be executed before the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the same arguments as the original, and may return new arguments\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function beforeObject(target: Targetable, methodName: string, advice: (...originalArgs: any[]) => any[] | void): Handle {\n\treturn adviseObject(getDispatcherObject(target, methodName), 'before', advice);\n}\n\n/**\n * Attaches \"before\" advice to be executed before the original method.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the same arguments as the original, and may return new arguments\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function before(target: Targetable, methodName: string, advice: (...originalArgs: any[]) => any[] | void): Handle;\n/**\n * Apply advice *before* the supplied joinPoint (function)\n *\n * @param joinPoint A function that should have advice applied to\n * @param advice The before advice\n */\nexport function before<F extends GenericFunction<any>>(joinPoint: F, advice: JoinPointBeforeAdvice): F;\nexport function before<F extends GenericFunction<T>, T>(joinPointOrTarget: F | Targetable, methodNameOrAdvice: string | JoinPointBeforeAdvice, objectAdvice?: ((...originalArgs: any[]) => any[] | void)): Handle | F {\n\tif (typeof joinPointOrTarget === 'function') {\n\t\treturn beforeJoinPoint(joinPointOrTarget, <JoinPointBeforeAdvice> methodNameOrAdvice);\n\t}\n\telse {\n\t\treturn beforeObject(joinPointOrTarget, <string> methodNameOrAdvice, objectAdvice!);\n\t}\n}\n\n/**\n * Attaches advice to be executed after the original method.\n * The advising function will receive the same arguments as the original method.\n * The value it returns will be returned from the method when it is called *unless* its return value is undefined.\n *\n * @param target Object whose method will be aspected\n * @param methodName Name of method to aspect\n * @param advice Advising function which will receive the same arguments as the original method\n * @return A handle which will remove the aspect when destroy is called\n */\nexport function on(target: Targetable, methodName: string, advice: (...originalArgs: any[]) => any): Handle {\n\treturn adviseObject(getDispatcherObject(target, methodName), 'after', advice, true);\n}\n\n\n\n// WEBPACK FOOTER //\n// aspect.ts","import { Handle } from '@dojo/interfaces/core';\nimport Promise from '@dojo/shim/Promise';\n\n/**\n * No operation function to replace own once instance is destoryed\n */\nfunction noop(): Promise<boolean> {\n\treturn Promise.resolve(false);\n};\n\n/**\n * No op function used to replace own, once instance has been destoryed\n */\nfunction destroyed(): never {\n\tthrow new Error('Call made to destroyed method');\n};\n\nexport class Destroyable {\n\t/**\n\t * register handles for the instance\n\t */\n\tprivate handles: Handle[];\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis.handles = [];\n\t}\n\n\t/**\n\t * Register handles for the instance that will be destroyed when `this.destroy` is called\n\t *\n\t * @param {Handle} handle The handle to add for the instance\n\t * @returns {Handle} a handle for the handle, removes the handle for the instance and calls destroy\n\t */\n\town(handle: Handle): Handle {\n\t\tconst { handles } = this;\n\t\thandles.push(handle);\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\thandles.splice(handles.indexOf(handle));\n\t\t\t\thandle.destroy();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Destrpys all handers registered for the instance\n\t *\n\t * @returns {Promise<any} a promise that resolves once all handles have been destroyed\n\t */\n\tdestroy(): Promise<any> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.handles.forEach((handle) => {\n\t\t\t\thandle && handle.destroy && handle.destroy();\n\t\t\t});\n\t\t\tthis.destroy = noop;\n\t\t\tthis.own = destroyed;\n\t\t\tresolve(true);\n\t\t});\n\t}\n}\n\nexport default Destroyable;\n\n\n\n// WEBPACK FOOTER //\n// Destroyable.ts","import global from '@dojo/shim/global';\nimport on from '@dojo/core/on';\nimport { HistoryBase } from './HistoryBase';\nimport { History, HistoryOptions } from './interfaces';\n\n/**\n * Options for creating HashHistory instances.\n */\nexport interface HashHistoryOptions extends HistoryOptions {\n\t/**\n\t * A DOM window object. HashHistory uses the `location` property and\n\t * listens to `hashchange` events. The current value is initialized to the\n\t * initial hash.\n\t */\n\twindow: Window;\n}\n\nexport class HashHistory extends HistoryBase implements History {\n\tprivate _current: string;\n\tprivate _browserLocation: Location;\n\n\tget current() {\n\t\treturn this._current;\n\t}\n\n\tconstructor({ window }: HashHistoryOptions = { window: global }) {\n\t\tsuper({});\n\n\t\tconst { location: browserLocation } = window;\n\n\t\tthis._current = browserLocation.hash.slice(1);\n\t\tthis._browserLocation = browserLocation;\n\n\t\tthis.own(on(window, 'hashchange', () => {\n\t\t\tconst path = this.normalizePath(browserLocation.hash);\n\n\t\t\t// Ignore hashchange for the current path. Guards against browsers firing hashchange when the history\n\t\t\t// manager sets the hash.\n\t\t\tif (path !== this._current) {\n\t\t\t\tthis._current = path;\n\t\t\t\tthis.emit({\n\t\t\t\t\ttype: 'change',\n\t\t\t\t\tvalue: path\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic prefix(path: string) {\n\t\tif (path[0] !== '#') {\n\t\t\treturn `#${path}`;\n\t\t}\n\t\treturn path;\n\t}\n\n\tpublic normalizePath(path: string): string {\n\t\tif (path[0] === '#') {\n\t\t\tpath = path.slice(1);\n\t\t}\n\t\treturn path;\n\t}\n\n\tset(path: string) {\n\t\tpath = this.normalizePath(path);\n\t\tif (this._current === path) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._current = path;\n\t\tthis._browserLocation.hash = this.prefix(path);\n\t\tthis.emit({\n\t\t\ttype: 'change',\n\t\t\tvalue: path\n\t\t});\n\t}\n\n\treplace(path: string) {\n\t\tpath = this.normalizePath(path);\n\t\tif (this._current === path) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._current = path;\n\n\t\tconst { pathname, search } = this._browserLocation;\n\t\tthis._browserLocation.replace(pathname + search + this.prefix(path));\n\n\t\tthis.emit({\n\t\t\ttype: 'change',\n\t\t\tvalue: path\n\t\t});\n\t}\n}\n\nexport default HashHistory;\n\n\n\n// WEBPACK FOOTER //\n// HashHistory.ts","import { BaseEventedEvents, Evented } from '@dojo/core/Evented';\nimport { EventedListenerOrArray } from '@dojo/interfaces/bases';\nimport { Handle } from '@dojo/interfaces/core';\nimport { History, HistoryChangeEvent } from './interfaces';\n\nexport interface HistoryEvents extends BaseEventedEvents {\n\t(type: 'change', listener: EventedListenerOrArray<History, HistoryChangeEvent>): Handle;\n}\n\nexport class HistoryBase extends Evented {\n\ton: HistoryEvents;\n\n\tpublic normalizePath(path: string): string {\n\t\treturn path;\n\t}\n}\n\nexport default HistoryBase;\n\n\n\n// WEBPACK FOOTER //\n// HistoryBase.ts","import Task from '@dojo/core/async/Task';\nimport Evented from '@dojo/core/Evented';\nimport { assign } from '@dojo/shim/object';\nimport { pausable, PausableHandle } from '@dojo/core/on';\nimport UrlSearchParams from '@dojo/core/UrlSearchParams';\nimport { includes } from '@dojo/shim/array';\nimport { Thenable } from '@dojo/shim/interfaces';\nimport Map from '@dojo/shim/Map';\nimport Promise from '@dojo/shim/Promise';\nimport { History, HistoryChangeEvent } from './history/interfaces';\nimport {\n\tContext,\n\tDispatchResult,\n\tErrorEvent,\n\tLinkParams,\n\tMatchType,\n\tNavigationStartEvent,\n\tOutletContext,\n\tParameters,\n\tRequest,\n\tRouteConfig,\n\tRouteInterface,\n\tRouterEvents,\n\tRouterInterface,\n\tRouterOptions,\n\tSearchParams,\n\tSelection,\n\tStartOptions\n} from './interfaces';\nimport { isNamedSegment, parse as parsePath } from './lib/path';\nimport { hasBeenAppended, parentMap } from './lib/router';\nimport { Route } from './Route';\n\nexport const errorOutlet = 'errorOutlet';\n\n// istanbul ignore next\nconst noop = () => {\n};\n\nfunction createDeferral() {\n\t// Use noop since TypeScript doesn't know we're assigning cancel and resume in the promise executor.\n\tlet cancel: () => void = noop;\n\tlet resume: () => void = noop;\n\tconst promise = new Promise<void>((resolve, reject) => {\n\t\tcancel = reject;\n\t\t// Wrap resolve to avoid resume being called with a thenable if type checking is not used.\n\t\tresume = () => resolve();\n\t});\n\treturn { cancel, promise, resume };\n}\n\nfunction reportError(router: Router<Context>, context: Context, path: string, error: any) {\n\trouter.emit<ErrorEvent<Context>>({\n\t\tcontext,\n\t\terror,\n\t\tpath,\n\t\ttarget: router,\n\t\ttype: 'error'\n\t});\n}\n\nfunction catchRejection(router: Router<Context>, context: Context, path: string, thenable: void | Thenable<any>) {\n\tif (thenable) {\n\t\tPromise.resolve(thenable).catch((error) => {\n\t\t\treportError(router, context, path, error);\n\t\t});\n\t}\n}\n\nexport class Router<C extends Context> extends Evented implements RouterInterface<C> {\n\tprivate _contextFactory: () => Context;\n\tprivate _currentSelection: Selection[];\n\tprivate _dispatchFromStart: boolean;\n\tprivate _fallback?: (request: Request<Context, Parameters>) => void | Thenable<any>;\n\tprivate _history?: History;\n\tprivate _routes: RouteInterface<Context, Parameters>[];\n\tprivate _started?: boolean;\n\tprivate _outletContextMap: Map<string, OutletContext> = new Map<string, OutletContext>();\n\tprivate _outletRouteMap: Map<string, RouteInterface<any, any>> = new Map<string, RouteInterface<any, any>>();\n\tprivate _currentParams: any = {};\n\tprivate _defaultParams: any = {};\n\tprivate _defaultRoute: RouteInterface<any, any>;\n\n\ton: RouterEvents<C>;\n\n\tconstructor(options: RouterOptions<C> = { }) {\n\t\tsuper({});\n\t\tconst { context, fallback, history, config } = options;\n\n\t\tlet contextFactory: () => C;\n\t\tif (typeof context === 'function') {\n\t\t\tcontextFactory = context;\n\t\t}\n\t\telse if (typeof context === 'undefined') {\n\t\t\tcontextFactory = () => {\n\t\t\t\treturn {} as C;\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\t// Assign to a constant since the context variable may be changed after the function is defined,\n\t\t\t// which would violate its typing.\n\t\t\tconst sharedContext = context;\n\t\t\tcontextFactory = () => sharedContext;\n\t\t}\n\n\t\tif (history) {\n\t\t\tthis.own(history);\n\t\t}\n\n\t\tthis._contextFactory = contextFactory;\n\t\tthis._currentSelection = [];\n\t\tthis._dispatchFromStart = false;\n\t\tthis._fallback = fallback;\n\t\tthis._history = history;\n\t\tthis._routes = [];\n\t\tthis._started = false;\n\n\t\tif (config) {\n\t\t\tthis.register(config);\n\t\t}\n\t}\n\n\tregister(config: RouteConfig[], from: string | RouterInterface<any> | RouteInterface<any, any> = this) {\n\t\tlet parent: RouterInterface<any> | RouteInterface<any, any>;\n\t\tif (typeof from === 'string') {\n\t\t\tparent = this._outletRouteMap.get(from) || this;\n\t\t}\n\t\telse {\n\t\t\tparent = from;\n\t\t}\n\n\t\tconfig.forEach(({ defaultRoute, path, outlet = path, defaultParams = {}, children }) => {\n\t\t\tconst route = new Route({\n\t\t\t\tpath,\n\t\t\t\toutlet,\n\t\t\t\tdefaultParams\n\t\t\t});\n\t\t\tif (defaultRoute) {\n\t\t\t\tif (!this._defaultRoute) {\n\t\t\t\t\tthis._defaultRoute = route;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error(`Default outlet has already been configured. Unable to register outlet ${outlet} as the default.`);\n\t\t\t\t}\n\t\t\t}\n\t\t\tassign(this._defaultParams, defaultParams);\n\t\t\tthis._outletRouteMap.set(outlet, route);\n\t\t\tparent.append(route);\n\t\t\tif (children) {\n\t\t\t\tthis.register(children, route);\n\t\t\t}\n\t\t});\n\t}\n\n\tappend(add: RouteInterface<Context, Parameters> | RouteInterface<Context, Parameters>[]) {\n\t\tconst append = (route: RouteInterface<Context, Parameters>) => {\n\t\t\tif (hasBeenAppended(route)) {\n\t\t\t\tthrow new Error('Cannot append route that has already been appended');\n\t\t\t}\n\n\t\t\tthis._routes.push(route);\n\t\t\tparentMap.set(route, this);\n\t\t};\n\n\t\tif (Array.isArray(add)) {\n\t\t\tfor (const route of add) {\n\t\t\t\tappend(route);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tappend(add);\n\t\t}\n\t}\n\n\tprivate _dispatch(context: Context, path: string, canceled: boolean = false, emit: boolean = true) {\n\t\tif (canceled) {\n\t\t\treturn { success: false };\n\t\t}\n\n\t\tthis._currentParams = {};\n\t\tthis._outletContextMap.clear();\n\n\t\tif (emit) {\n\t\t\tthis.emit<NavigationStartEvent>({\n\t\t\t\tcontext,\n\t\t\t\tpath,\n\t\t\t\ttarget: this,\n\t\t\t\ttype: 'navstart'\n\t\t\t});\n\t\t}\n\n\t\tconst { searchParams, segments, trailingSlash } = parsePath(path);\n\t\tconst dispatchFromStart = this._dispatchFromStart;\n\t\tthis._dispatchFromStart = false;\n\n\t\tlet redirect: undefined | string;\n\t\tconst dispatched = this._routes.some((route) => {\n\t\t\tconst result = route.select(context, segments, trailingSlash, searchParams);\n\n\t\t\tif (typeof result === 'string') {\n\t\t\t\tredirect = result;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (result.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Update the selected routes after selecting new routes, but before invoking the handlers.\n\t\t\t// This means the original value is available to guard() and params() functions, and the\n\t\t\t// new value when the newly selected routes are executed.\n\t\t\t//\n\t\t\t// Reset selected routes if not dispatched from start().\n\t\t\tthis._currentSelection = dispatchFromStart ? result : [];\n\n\t\t\tfor (const { handler, params, outlet, type, route } of result) {\n\t\t\t\tif (outlet) {\n\t\t\t\t\tassign(this._currentParams, params);\n\t\t\t\t\tconst location = this.link(route, this._currentParams);\n\t\t\t\t\tthis._outletContextMap.set(outlet, { type, params, location });\n\t\t\t\t\tif (type === MatchType.ERROR) {\n\t\t\t\t\t\tthis._outletContextMap.set(errorOutlet, { type: MatchType.PARTIAL, params, location });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatchRejection(this, context, path, handler({ context, params }));\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\t// Reset the selected routes if the dispatch was unsuccessful, or if a redirect was requested.\n\t\tif (!dispatched || redirect !== undefined) {\n\t\t\tthis._currentSelection = [];\n\t\t}\n\n\t\tif (!dispatched) {\n\t\t\tthis._outletContextMap.set(errorOutlet, {\n\t\t\t\ttype: MatchType.PARTIAL,\n\t\t\t\tparams: {},\n\t\t\t\tlocation: this._history ? this._history.current : ''\n\t\t\t});\n\t\t\tif (this._fallback) {\n\t\t\t\tcatchRejection(this, context, path, this._fallback({ context, params: {} }));\n\t\t\t\treturn { success: false };\n\t\t\t}\n\t\t}\n\n\t\tconst result: DispatchResult = { success: dispatched };\n\t\tif (redirect !== undefined) {\n\t\t\tresult.redirect = redirect;\n\t\t}\n\t\treturn result;\n\n\t}\n\n\tdispatch(context: Context, path: string): Task<DispatchResult> {\n\t\tlet canceled = false;\n\t\tconst cancel = () => {\n\t\t\tcanceled = true;\n\t\t};\n\n\t\tconst deferrals: Promise<void>[] = [];\n\n\t\tthis._currentParams = {};\n\t\tthis._outletContextMap.clear();\n\t\tthis.emit<NavigationStartEvent>({\n\t\t\tcontext,\n\t\t\tcancel,\n\t\t\tdefer () {\n\t\t\t\tconst { cancel, promise, resume } = createDeferral();\n\t\t\t\tdeferrals.push(promise);\n\t\t\t\treturn { cancel, resume };\n\t\t\t},\n\t\t\tpath,\n\t\t\ttarget: this,\n\t\t\ttype: 'navstart'\n\t\t});\n\n\t\t// Synchronous cancellation.\n\t\tif (canceled) {\n\t\t\treturn Task.resolve({ success: false });\n\t\t}\n\n\t\treturn new Task<DispatchResult>((resolve, reject) => {\n\t\t\t// *Always* start dispatching in a future turn, even if there were no deferrals.\n\t\t\tPromise.all(deferrals).then<DispatchResult, DispatchResult>(\n\t\t\t\t() => {\n\t\t\t\t\treturn this._dispatch(context, path, canceled, false);\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\treturn { success: false };\n\t\t\t\t}\n\t\t\t).then(resolve, (error) => {\n\t\t\t\treportError(this, context, path, error);\n\t\t\t\treject(error);\n\t\t\t});\n\t\t}, cancel);\n\t}\n\n\tlink(routeOrOutlet: RouteInterface<Context, Parameters> | string, params: LinkParams = {}): string {\n\t\tlet route: RouteInterface<Context, Parameters>;\n\t\tif (typeof routeOrOutlet === 'string') {\n\t\t\tconst item = this._outletRouteMap.get(routeOrOutlet);\n\t\t\tif (item) {\n\t\t\t\troute = item;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new Error(`No outlet ${routeOrOutlet} has been registered`);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\troute = routeOrOutlet;\n\t\t}\n\t\tconst hierarchy = [ route ];\n\t\tfor (let parent = route.parent; parent !== undefined; parent = parent.parent) {\n\t\t\thierarchy.unshift(parent);\n\t\t}\n\n\t\tif (!includes(this._routes, hierarchy[ 0 ])) {\n\t\t\tthrow new Error('Cannot generate link for route that is not in the hierarchy');\n\t\t}\n\n\t\tconst { leadingSlash: addLeadingSlash } = hierarchy[ 0 ].path;\n\t\tlet addTrailingSlash = false;\n\t\tconst segments: string[] = [];\n\t\tconst searchParams = new UrlSearchParams();\n\n\t\thierarchy\n\t\t\t.map((route, index) => {\n\t\t\t\tconst { path } = route;\n\t\t\t\tlet currentPathValues: string[] | undefined;\n\t\t\t\tlet currentSearchParams: SearchParams | undefined;\n\n\t\t\t\tconst selection = this._currentSelection[ index ];\n\t\t\t\tif (selection && selection.route === route) {\n\t\t\t\t\tcurrentPathValues = selection.rawPathValues;\n\t\t\t\t\tcurrentSearchParams = selection.rawSearchParams;\n\t\t\t\t}\n\n\t\t\t\treturn { currentPathValues, currentSearchParams, path, route };\n\t\t\t})\n\t\t\t.forEach(({ currentPathValues, currentSearchParams, path, route }) => {\n\t\t\t\tconst { expectedSegments, searchParameters, trailingSlash } = path;\n\t\t\t\taddTrailingSlash = trailingSlash;\n\n\t\t\t\tlet namedOffset = 0;\n\t\t\t\tfor (const segment of expectedSegments) {\n\t\t\t\t\tif (isNamedSegment(segment)) {\n\t\t\t\t\t\tconst value = params[ segment.name ];\n\t\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\t\tsegments.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\t\t\tif (value.length === 1) {\n\t\t\t\t\t\t\t\tsegments.push(value[ 0 ]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthrow new TypeError(`Cannot generate link, multiple values for parameter '${segment.name}'`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (currentPathValues) {\n\t\t\t\t\t\t\tsegments.push(currentPathValues[ namedOffset ]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (route.defaultParams[ segment.name ]) {\n\t\t\t\t\t\t\tsegments.push(route.defaultParams[ segment.name ]);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthrow new Error(`Cannot generate link, missing parameter '${segment.name}'`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnamedOffset++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsegments.push(segment.literal);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const key of searchParameters) {\n\t\t\t\t\t// Don't repeat the search parameter if a previous route in the hierarchy has already appended\n\t\t\t\t\t// it.\n\t\t\t\t\tif (searchParams.has(key)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst value = params[ key ] || this._defaultParams[ key ] ;\n\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\tsearchParams.append(key, value);\n\t\t\t\t\t}\n\t\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\t\tfor (const item of value) {\n\t\t\t\t\t\t\tsearchParams.append(key, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (currentSearchParams) {\n\t\t\t\t\t\tfor (const item of currentSearchParams[ key ]) {\n\t\t\t\t\t\t\tsearchParams.append(key, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow new Error(`Cannot generate link, missing search parameter '${key}'`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tlet pathname = segments.join('/');\n\t\tif (addLeadingSlash) {\n\t\t\tpathname = '/' + pathname;\n\t\t}\n\t\tif (addTrailingSlash) {\n\t\t\tpathname += '/';\n\t\t}\n\n\t\tif (this._history) {\n\t\t\tpathname = this._history.prefix(pathname);\n\t\t}\n\n\t\tconst search = searchParams.toString();\n\t\tconst path = search ? `${pathname}?${search}` : pathname;\n\n\t\treturn path;\n\t}\n\n\treplacePath(path: string) {\n\t\tif (!this._history) {\n\t\t\tthrow new Error('Cannot replace path, router was created without a history manager');\n\t\t}\n\n\t\tthis._history.replace(path);\n\t}\n\n\tsetPath(path: string) {\n\t\tif (!this._history) {\n\t\t\tthrow new Error('Cannot set path, router was created without a history manager');\n\t\t}\n\n\t\tthis._history.set(path);\n\t}\n\n\thasOutlet(outletId: string): boolean {\n\t\treturn this._outletContextMap.has(outletId);\n\t}\n\n\tgetOutlet(outletId: string): OutletContext | undefined {\n\t\treturn this._outletContextMap.get(outletId);\n\t}\n\n\tgetCurrentParams(): Parameters {\n\t\treturn this._currentParams;\n\t}\n\n\tstart(startOptions: StartOptions = { dispatchCurrent : true }): PausableHandle {\n\t\tconst { dispatchCurrent } = startOptions;\n\n\t\tif (this._started) {\n\t\t\tthrow new Error('start can only be called once');\n\t\t}\n\n\t\tthis._started = true;\n\n\t\tif (!this._history) {\n\t\t\treturn {\n\t\t\t\tpause() {\n\t\t\t\t},\n\t\t\t\tresume() {\n\t\t\t\t},\n\t\t\t\tdestroy() {\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tlet lastDispatch: Task<DispatchResult>;\n\t\tlet redirectCount = 0;\n\t\tlet redirecting = false;\n\n\t\tconst dispatch = (path: string) => {\n\t\t\tif (lastDispatch) {\n\t\t\t\tlastDispatch.cancel();\n\t\t\t}\n\n\t\t\t// Reset redirect count if the dispatch was triggered by a non-redirect history change. This allows\n\t\t\t// a route's exec / fallback / index handler to change the history, setting off a new flurry of\n\t\t\t// redirects, without being encumbered by the number of redirects that led to that route being selected.\n\t\t\tif (!redirecting) {\n\t\t\t\tredirectCount = 0;\n\t\t\t}\n\n\t\t\t// Signal to dispatch() that it was called from here.\n\t\t\tthis._dispatchFromStart = true;\n\n\t\t\tconst context = this._contextFactory();\n\t\t\tlastDispatch = this.dispatch(context, path).then((dispatchResult) => {\n\t\t\t\tconst { success, redirect = undefined } = dispatchResult || { success: false };\n\t\t\t\tif (success && redirect !== undefined) {\n\t\t\t\t\tredirectCount++;\n\t\t\t\t\tif (redirectCount > 20) {\n\t\t\t\t\t\tconst error = new Error('More than 20 redirects, giving up');\n\t\t\t\t\t\treportError(this, context, path, error);\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\n\t\t\t\t\tredirecting = true;\n\t\t\t\t\t// The history manager MUST emit the change event synchronously.\n\t\t\t\t\tthis._history!.replace(redirect);\n\t\t\t\t\tredirecting = false;\n\t\t\t\t}\n\t\t\t\treturn dispatchResult;\n\t\t\t});\n\t\t\treturn lastDispatch;\n\t\t};\n\n\t\tconst listener = pausable(this._history, 'change', (event: HistoryChangeEvent) => {\n\t\t\tdispatch(event.value);\n\t\t});\n\t\tthis.own(listener);\n\n\t\tif (dispatchCurrent) {\n\t\t\tconst context = this._contextFactory();\n\t\t\tconst { success, redirect = undefined } = this._dispatch(context, this._history.current);\n\t\t\tif (success && redirect) {\n\t\t\t\tredirecting = true;\n\t\t\t\tthis._history!.replace(redirect);\n\t\t\t\tredirecting = false;\n\t\t\t}\n\t\t\telse if (!success && this._defaultRoute) {\n\t\t\t\tconst normalizedPath = this._history.normalizePath(this.link(this._defaultRoute));\n\t\t\t\tthis._dispatch(context, normalizedPath);\n\t\t\t}\n\t\t}\n\n\t\treturn listener;\n\t}\n}\n\nexport default Router;\n\n\n\n// WEBPACK FOOTER //\n// Router.ts","import { Thenable } from '@dojo/shim/interfaces';\nimport { isArrayLike, isIterable, Iterable } from '@dojo/shim/iterator';\nimport { Executor } from '@dojo/shim/Promise';\nimport ExtensiblePromise, { DictionaryOfPromises, ListOfPromises, unwrapPromises } from './ExtensiblePromise';\n\n/**\n * Describe the internal state of a task.\n */\nexport declare const enum State {\n\tFulfilled = 0,\n\tPending = 1,\n\tRejected = 2,\n\tCanceled = 3\n}\n\n/**\n * A type guard that determines if `value` is a `Task`\n * @param value The value to guard\n */\nexport function isTask<T>(value: any): value is Task<T> {\n\treturn Boolean(value && typeof value.cancel === 'function' && Array.isArray(value.children) && isThenable(value));\n}\n\n/**\n * Returns true if a given value has a `then` method.\n * @param {any} value The value to check if is Thenable\n * @returns {is Thenable<T>} A type guard if the value is thenable\n */\nexport function isThenable<T>(value: any): value is Thenable<T> {\n\treturn value && typeof value.then === 'function';\n}\n\n/**\n * Task is an extension of Promise that supports cancellation and the Task#finally method.\n */\nexport default class Task<T> extends ExtensiblePromise<T> {\n\t/**\n\t * Return a Task that resolves when one of the passed in objects have resolved\n\t *\n\t * @param iterable    An iterable of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns {Task}\n\t */\n\tstatic race<T>(iterable: Iterable<(T | Thenable<T>)> | (T | Thenable<T>)[]): Task<T> {\n\t\treturn new this((resolve, reject) => {\n\t\t\tPromise.race(unwrapPromises(iterable)).then(resolve, reject);\n\t\t});\n\t}\n\n\t/**\n\t * Return a rejected promise wrapped in a Task\n\t *\n\t * @param reason The reason for the rejection\n\t * @returns A task\n\t */\n\tstatic reject<T>(reason?: Error): Task<T> {\n\t\treturn new this((resolve, reject) => reject(reason));\n\t}\n\n\t/**\n\t * Return a resolved task.\n\t *\n\t * @param value The value to resolve with\n\t *\n\t * @return A task\n\t */\n\tpublic static resolve(): Task<void>;\n\n\t/**\n\t * Return a resolved task.\n\t *\n\t * @param value The value to resolve with\n\t *\n\t * @return A task\n\t */\n\tpublic static resolve<T>(value: (T | Thenable<T>)): Task<T>;\n\n\t/**\n\t * Return a resolved task.\n\t *\n\t * @param value The value to resolve with\n\t *\n\t * @return A task\n\t */\n\tpublic static resolve<T>(value?: any): Task<T> {\n\t\treturn new this<T>((resolve, reject) => resolve(value));\n\t}\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: DictionaryOfPromises<T>): Task<{ [key: string]: T }>;\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: (T | Thenable<T>)[]): Task<T[]>;\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: T | Thenable<T>): Task<T[]>;\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: ListOfPromises<T>): Task<T[]>;\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: DictionaryOfPromises<T> | ListOfPromises<T>): Task<any> {\n\t\treturn new Task((resolve, reject) => {\n\t\t\tsuper.all(iterable).then(resolve, reject);\n\t\t}, () => {\n\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\tconst promiseLike = iterable[i];\n\n\t\t\t\t\tif (isTask(promiseLike)) {\n\t\t\t\t\t\tpromiseLike.cancel();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (isIterable(iterable)) {\n\t\t\t\tfor (const promiseLike of iterable) {\n\t\t\t\t\tif (isTask(promiseLike)) {\n\t\t\t\t\t\tpromiseLike.cancel();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tObject.keys(iterable).forEach((key: any) => {\n\t\t\t\t\tconst promiseLike = iterable[key];\n\n\t\t\t\t\tif (isTask(promiseLike)) {\n\t\t\t\t\t\tpromiseLike.cancel();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * A cancelation handler that will be called if this task is canceled.\n\t */\n\tprivate canceler: () => void;\n\n\t/**\n\t * Children of this Task (i.e., Tasks that were created from this Task with `then` or `catch`).\n\t */\n\tprivate readonly children: Task<any>[];\n\n\t/**\n\t * The finally callback for this Task (if it was created by a call to `finally`).\n\t */\n\tprivate _finally: () => void;\n\n\t/**\n\t * The state of the task\n\t */\n\tprotected _state: State;\n\n\tget state() {\n\t\treturn this._state;\n\t}\n\n\t/**\n\t * @constructor\n\t *\n\t * Create a new task. Executor is run immediately. The canceler will be called when the task is canceled.\n\t *\n\t * @param executor Method that initiates some task\n\t * @param canceler Method to call when the task is canceled\n\t *\n\t */\n\tconstructor(executor: Executor<T>, canceler?: () => void) {\n\t\t// we have to initialize these to avoid a compiler error of using them before they are initialized\n\t\tlet superResolve: (value?: T | Thenable<T> | undefined) => void = () => {};\n\t\tlet superReject: (reason?: any) => void = () => {};\n\n\t\tsuper((resolve, reject) => {\n\t\t\tsuperResolve = resolve;\n\t\t\tsuperReject = reject;\n\t\t});\n\n\t\tthis._state = State.Pending;\n\n\t\tthis.children = [];\n\t\tthis.canceler = () => {\n\t\t\tif (canceler) {\n\t\t\t\tcanceler();\n\t\t\t}\n\t\t\tthis._cancel();\n\t\t};\n\n\t\t// Don't let the Task resolve if it's been canceled\n\t\ttry {\n\t\t\texecutor(\n\t\t\t\t(value) => {\n\t\t\t\t\tif (this._state === State.Canceled) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._state = State.Fulfilled;\n\t\t\t\t\tsuperResolve(value);\n\t\t\t\t},\n\t\t\t\t(reason) => {\n\t\t\t\t\tif (this._state === State.Canceled) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._state = State.Rejected;\n\t\t\t\t\tsuperReject(reason);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tcatch (reason) {\n\t\t\tthis._state = State.Rejected;\n\t\t\tsuperReject(reason);\n\t\t}\n\t}\n\n\t/**\n\t * Propagates cancellation down through a Task tree. The Task's state is immediately set to canceled. If a Thenable\n\t * finally task was passed in, it is resolved before calling this Task's finally callback; otherwise, this Task's\n\t * finally callback is immediately executed. `_cancel` is called for each child Task, passing in the value returned\n\t * by this Task's finally callback or a Promise chain that will eventually resolve to that value.\n\t */\n\tprivate _cancel(finallyTask?: void | Thenable<any>): void {\n\t\tthis._state = State.Canceled;\n\n\t\tconst runFinally = () => {\n\t\t\ttry {\n\t\t\t\treturn this._finally();\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\t// Any errors in a `finally` callback are completely ignored during cancelation\n\t\t\t}\n\t\t};\n\n\t\tif (this._finally) {\n\t\t\tif (isThenable(finallyTask)) {\n\t\t\t\tfinallyTask = (<Thenable<any>> finallyTask).then(runFinally, runFinally);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfinallyTask = runFinally();\n\t\t\t}\n\t\t}\n\n\t\tthis.children.forEach(function (child) {\n\t\t\tchild._cancel(finallyTask);\n\t\t});\n\t}\n\n\t/**\n\t * Immediately cancels this task if it has not already resolved. This Task and any descendants are synchronously set\n\t * to the Canceled state and any `finally` added downstream from the canceled Task are invoked.\n\t */\n\tcancel(): void {\n\t\tif (this._state === State.Pending) {\n\t\t\tthis.canceler();\n\t\t}\n\t}\n\n\tcatch<TResult = never>(onRejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined): Task<T | TResult> {\n\t\treturn this.then(undefined, onRejected) as Task<T | TResult>;\n\t}\n\n\t/**\n\t * Allows for cleanup actions to be performed after resolution of a Promise.\n\t */\n\tfinally(callback: () => void): Task<T> {\n\t\t// if this task is already canceled, call the task\n\t\tif (this._state === State.Canceled) {\n\t\t\tcallback();\n\t\t\treturn this;\n\t\t}\n\n\t\tconst task = this.then<any>(\n\t\t\tvalue => Task.resolve(callback()).then(() => value),\n\t\t\treason => Task.resolve(callback()).then(() => {\n\t\t\t\tthrow reason;\n\t\t\t})\n\t\t);\n\n\t\t// Keep a reference to the callback; it will be called if the Task is canceled\n\t\ttask._finally = callback;\n\t\treturn task;\n\t}\n\n\t/**\n\t * Adds a callback to be invoked when the Task resolves or is rejected.\n\t *\n\t * @param onFulfilled   A function to call to handle the resolution. The paramter to the function will be the resolved value, if any.\n\t * @param onRejected    A function to call to handle the error. The parameter to the function will be the caught error.\n\t *\n\t * @returns A task\n\t */\n\tthen<TResult1 = T, TResult2 = never>(onFulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null, onRejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null): Task<TResult1 | TResult2> {\n\t\t// FIXME\n\t\t// tslint:disable-next-line:no-var-keyword\n\t\tvar task = super.then(\n\t\t\t// Don't call the onFulfilled or onRejected handlers if this Task is canceled\n\t\t\tfunction (value) {\n\t\t\t\tif (task._state === State.Canceled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (onFulfilled) {\n\t\t\t\t\treturn onFulfilled(value);\n\t\t\t\t}\n\t\t\t\treturn <any> value;\n\t\t\t},\n\t\t\tfunction (error) {\n\t\t\t\tif (task._state === State.Canceled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (onRejected) {\n\t\t\t\t\treturn onRejected(error);\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t) as Task<TResult1 | TResult2>;\n\n\t\ttask.canceler = () => {\n\t\t\t// If task's parent (this) hasn't been resolved, cancel it; downward propagation will start at the first\n\t\t\t// unresolved parent\n\t\t\tif (this._state === State.Pending) {\n\t\t\t\tthis.cancel();\n\t\t\t}\n\t\t\t// If task's parent has been resolved, propagate cancelation to the task's descendants\n\t\t\telse {\n\t\t\t\ttask._cancel();\n\t\t\t}\n\t\t};\n\n\t\t// Keep track of child Tasks for propogating cancelation back down the chain\n\t\tthis.children.push(task);\n\n\t\treturn task;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// Task.ts","import { Thenable } from '@dojo/shim/interfaces';\nimport { isArrayLike, isIterable, Iterable } from '@dojo/shim/iterator';\nimport Promise, { Executor } from '@dojo/shim/Promise';\nimport '@dojo/shim/Symbol';\n\n/**\n * Take a list of values, and if any are ExtensiblePromise objects, insert the wrapped Promise in its place,\n * otherwise use the original object. We use this to help use the native Promise methods like `all` and `race`.\n *\n * @param iterable    The list of objects to iterate over\n * @returns {any[]}    The list of objects, as an array, with ExtensiblePromises being replaced by Promises.\n */\nexport function unwrapPromises(iterable: Iterable<any> | any[]): any[] {\n\tconst unwrapped: any[] = [];\n\n\tif (isArrayLike(iterable)) {\n\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\tconst item = iterable[i];\n\t\t\tunwrapped.push(item instanceof ExtensiblePromise ? item._promise : item);\n\t\t}\n\t}\n\telse {\n\t\tfor (const item of iterable) {\n\t\t\tunwrapped.push(item instanceof ExtensiblePromise ? item._promise : item);\n\t\t}\n\t}\n\n\treturn unwrapped;\n}\n\nexport type DictionaryOfPromises<T> = { [_: string]: T | Promise<T> | Thenable<T> };\nexport type ListOfPromises<T> = Iterable<(T | Thenable<T>)>;\n\n/**\n * An extensible base to allow Promises to be extended in ES5. This class basically wraps a native Promise object,\n * giving an API like a native promise.\n */\nexport default class ExtensiblePromise<T> {\n\t/**\n\t * Return a rejected promise wrapped in an ExtensiblePromise\n\t *\n\t * @param reason    The reason for the rejection\n\t * @returns An extensible promise\n\t */\n\tstatic reject<T>(reason?: any): ExtensiblePromise<never>;\n\n\t/**\n\t * Return a rejected promise wrapped in an ExtensiblePromise\n\t *\n\t * @param reason    The reason for the rejection\n\t * @returns An extensible promise\n\t */\n\tstatic reject<T>(reason?: any): ExtensiblePromise<T> {\n\t\treturn new this((resolve, reject) => reject(reason));\n\t}\n\n\t/**\n\t * Return a resolved promise wrapped in an ExtensiblePromise\n\t *\n\t * @param value The value to resolve the promise with\n\t *\n\t * @returns An extensible promise\n\t */\n\tstatic resolve<P extends ExtensiblePromise<void>>(): P;\n\n\t/**\n\t * Return a resolved promise wrapped in an ExtensiblePromise\n\t *\n\t * @param value The value to resolve the promise with\n\t *\n\t * @returns An extensible promise\n\t */\n\tstatic resolve<T, P extends ExtensiblePromise<T>>(value: T | PromiseLike<T>): P;\n\tstatic resolve(value?: any | PromiseLike<any>): ExtensiblePromise<any> {\n\t\treturn new this((resolve, reject) => resolve(value));\n\t}\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: DictionaryOfPromises<T>): ExtensiblePromise<{ [key: string]: T }>;\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: (T | Thenable<T>)[]): ExtensiblePromise<T[]>;\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: T | Thenable<T>): ExtensiblePromise<T[]>;\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: ListOfPromises<T>): ExtensiblePromise<T[]>;\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when all of the passed in objects have resolved. When used with a key/value\n\t * pair, the returned promise's argument is a key/value pair of the original keys with their resolved values.\n\t *\n\t * @example\n\t * ExtensiblePromise.all({ one: 1, two: 2 }).then(results => console.log(results));\n\t * // { one: 1, two: 2 }\n\t *\n\t * @param iterable    An iterable of values to resolve, or a key/value pair of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns An extensible promise\n\t */\n\tstatic all<T>(iterable: DictionaryOfPromises<T> | ListOfPromises<T>): ExtensiblePromise<T[] | { [key: string]: T }> {\n\t\tif (!isArrayLike(iterable) && !isIterable(iterable)) {\n\t\t\tconst promiseKeys = Object.keys(iterable);\n\n\t\t\treturn new this((resolve, reject) => {\n\t\t\t\tPromise.all(promiseKeys.map(key => iterable[key])).then((promiseResults: T[]) => {\n\t\t\t\t\tconst returnValue: { [key: string]: T} = {};\n\n\t\t\t\t\tpromiseResults.forEach((value: T, index: number) => {\n\t\t\t\t\t\treturnValue[promiseKeys[index]] = value;\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(returnValue);\n\t\t\t\t}, reject);\n\t\t\t});\n\t\t}\n\n\t\treturn new this((resolve, reject) => {\n\t\t\tPromise.all(unwrapPromises(<Iterable<T>> iterable)).then(resolve, reject);\n\t\t});\n\t}\n\n\t/**\n\t * Return a ExtensiblePromise that resolves when one of the passed in objects have resolved\n\t *\n\t * @param iterable    An iterable of values to resolve. These can be Promises, ExtensiblePromises, or other objects\n\t * @returns {ExtensiblePromise}\n\t */\n\tstatic race<T>(iterable: Iterable<(T | PromiseLike<T>)> | (T | PromiseLike<T>)[]): ExtensiblePromise<T> {\n\t\treturn new this((resolve, reject) => {\n\t\t\tPromise.race(unwrapPromises(iterable)).then(resolve, reject);\n\t\t});\n\t}\n\n\t/**\n\t * @type {Promise}\n\t * The wrapped promise\n\t */\n\treadonly _promise: Promise<T>;\n\n\t/**\n\t * Creates a new extended Promise.\n\t *\n\t * @constructor\n\t *\n\t * @param executor\n\t * The executor function is called immediately when the Promise is instantiated. It is responsible for\n\t * starting the asynchronous operation when it is invoked.\n\t *\n\t * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n\t * successfully, or the `reject` function when the operation fails.\n\t */\n\tconstructor(executor: Executor<T>) {\n\t\tthis._promise = new Promise<T>(executor);\n\t}\n\n\t/**\n\t * Adds a callback to be invoked when the wrapped Promise is rejected.\n\t *\n\t * @param {Function} onRejected A function to call to handle the error. The parameter to the function will be the caught error.\n\t *\n\t * @returns {ExtensiblePromise}\n\t */\n\tcatch<TResult = never>(onRejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null): ExtensiblePromise<T | TResult> {\n\t\treturn this.then(undefined, onRejected);\n\t}\n\n\t/**\n\t * Adds a callback to be invoked when the wrapped Promise resolves or is rejected.\n\t *\n\t * @param {Function} onFulfilled   A function to call to handle the resolution. The paramter to the function will be the resolved value, if any.\n\t * @param {Function} onRejected    A function to call to handle the error. The parameter to the function will be the caught error.\n\t *\n\t * @returns {ExtensiblePromise}\n\t */\n\tthen<TResult1 = T, TResult2 = never>(\n\t\tonFulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n\t\tonRejected?: ((reason: any) => TResult2 | PromiseLike<TResult2> | void) | undefined | null\n\t): ExtensiblePromise<TResult1 | TResult2> {\n\t\tconst executor: Executor<TResult1> = (resolve, reject) => {\n\t\t\tfunction handler(rejected: boolean, valueOrError: T | TResult1 | Error) {\n\t\t\t\tconst callback: ((value: any) => any) | null | undefined = rejected ? onRejected : onFulfilled;\n\n\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresolve(callback(valueOrError));\n\t\t\t\t\t}\n\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (rejected) {\n\t\t\t\t\treject(valueOrError);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresolve(valueOrError as TResult1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._promise.then(handler.bind(null, false), handler.bind(null, true));\n\t\t};\n\n\t\treturn new (this.constructor as typeof ExtensiblePromise)(executor);\n\t}\n\n\treadonly [Symbol.toStringTag]: 'Promise';\n}\n\n\n\n// WEBPACK FOOTER //\n// ExtensiblePromise.ts","import UrlSearchParams from '@dojo/core/UrlSearchParams';\nimport { Thenable } from '@dojo/shim/interfaces';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport {\n\tContext,\n\tDefaultParameters,\n\tHandler,\n\tLinkParams,\n\tMatchResult,\n\tMatchType,\n\tParameters,\n\tRequest,\n\tRouteInterface,\n\tSearchParams,\n\tSelection\n} from './interfaces';\nimport { deconstruct as deconstructPath, DeconstructedPath, match as matchPath } from './lib/path';\nimport { findRouter, hasBeenAppended } from './lib/router';\n\n/**\n * The options for the route.\n */\nexport interface RouteOptions<C, P extends Parameters> {\n\t/**\n\t * Path the route matches against. Pathname segments may be named, same for query parameters. Leading slashes are\n\t * ignored. Defaults to `/`.\n\t */\n\tpath?: string;\n\n\t/**\n\t * The outlet associated with the path\n\t */\n\toutlet?: string;\n\n\t/**\n\t * If the `path` option contains a trailing slash (in the pathname component), the route will only match against\n\t * another pathname that contains a trailing slash, and vice-versa if the path does not contain a trailing slash.\n\t * Defaults to `true`, change to `false` to allow routes to match regardless of trailing slashes.\n\t */\n\ttrailingSlashMustMatch?: boolean;\n\n\t/**\n\t * A handler called when the route is executed.\n\t * @param request An object whose `context` property contains the dispatch context. Extracted parameters are\n\t *   available under `params`.\n\t */\n\texec?(request: Request<C, P>): void | Thenable<any>;\n\n\t/**\n\t * If specified, causes the route to be selected if there are no nested routes that match the remainder of\n\t * the dispatched path. When the route is executed, this handler is called rather than `exec()`.\n\t * @param request An object whose `context` property contains the dispatch context. Extracted parameters are\n\t *   available under `params`.\n\t */\n\tfallback?(request: Request<C, P>): void | Thenable<any>;\n\n\t/**\n\t * Callback used to determine whether the route should be selected after it's been matched.\n\t * @param request An object whose `context` property contains the dispatch context. Extracted parameters are\n\t *   available under `params`.\n\t * @return Returning `true` causes the route to be selected. Returning a string indicates that a redirect is\n\t *   required; the string should be the path to redirect to.\n\t */\n\tguard?(request: Request<C, P>): string | boolean;\n\n\t/**\n\t * If specified, and the route is the final route in the hierarchy, when the route is executed, this handler is\n\t * called rather than `exec()`.\n\t * @param request An object whose `context` property contains the dispatch context. Extracted parameters are\n\t *   available under `params`.\n\t */\n\tindex?(request: Request<C, P>): void | Thenable<any>;\n\n\t/**\n\t * Callback used for constructing the `params` object from extracted parameters, and validating the parameters.\n\t * @param fromPathname Array of parameter values extracted from the pathname.\n\t * @param searchParams Parameters extracted from the search component.\n\t * @return If `null` prevents the route from being selected, else the value for the `params` object.\n\t */\n\tparams?(fromPathname: string[], searchParams: UrlSearchParams): null | P;\n\n\t/**\n\t * Default params to use when generating a link.\n\t */\n\tdefaultParams?: null | P;\n}\n\n// Store parent relationships in a separate map, since it's the parent that adds entries to this map. Parents shouldn't\n// change the private state of their children.\nconst parentMap = new WeakMap<Route<Context, Parameters>, Route<Context, Parameters>>();\n\nconst noop = () => {\n};\n\nfunction computeDefaultParams(parameters: string[], searchParameters: string[], fromPathname: string[], searchParams: UrlSearchParams): null | DefaultParameters {\n\tconst params: DefaultParameters = {};\n\tparameters.forEach((name, index) => {\n\t\tparams[ name ] = fromPathname[ index ];\n\t});\n\tsearchParameters.forEach(name => {\n\t\tconst value = searchParams.get(name);\n\t\tif (value !== undefined) {\n\t\t\tparams[ name ] = value;\n\t\t}\n\t});\n\n\treturn params;\n}\n\nexport class Route<C extends Context, P extends Parameters> implements RouteInterface<C, P> {\n\tprivate _path: DeconstructedPath;\n\tprivate _outlet: string | undefined;\n\tprivate _routes: Route<Context, Parameters>[];\n\tprivate _trailingSlashMustMatch: boolean;\n\tprivate _computeParams: (fromPathname: string[], searchParams: UrlSearchParams) => null | P | DefaultParameters;\n\tprivate _exec?: Handler;\n\tprivate _fallback?: Handler;\n\tprivate _guard: ((request: Request<C, P | DefaultParameters>) => string | boolean) | undefined;\n\tprivate _index?: Handler;\n\tprivate _defaultParams: P;\n\n\tget parent() {\n\t\treturn parentMap.get(this);\n\t}\n\n\tget path(this: Route<C, P>) {\n\t\treturn this._path;\n\t}\n\n\tget outlet() {\n\t\treturn this._outlet;\n\t}\n\n\tget defaultParams(): P {\n\t\treturn this._defaultParams;\n\t}\n\n\tconstructor(options: RouteOptions<C, P> = {}) {\n\t\tconst { exec, fallback, guard, index, params: computeParams, path, outlet, trailingSlashMustMatch = true, defaultParams = {} } = options;\n\n\t\tif (path && /#/.test(path)) {\n\t\t\tthrow new TypeError('Path must not contain \\'#\\'');\n\t\t}\n\n\t\tconst deconstructedPath = deconstructPath(path || '/');\n\t\tconst { parameters, searchParameters } = deconstructedPath;\n\n\t\tif (computeParams) {\n\t\t\tif (parameters.length === 0 && searchParameters.length === 0) {\n\t\t\t\tthrow new TypeError('Can\\'t specify params() if path doesn\\'t contain any');\n\t\t\t}\n\n\t\t\tthis._computeParams = computeParams;\n\t\t}\n\t\telse {\n\t\t\tthis._computeParams = (fromPathname: string[], searchParams: UrlSearchParams) => {\n\t\t\t\treturn computeDefaultParams(parameters, searchParameters, fromPathname, searchParams);\n\t\t\t};\n\t\t}\n\n\t\tthis._exec = exec;\n\t\tthis._fallback = fallback;\n\t\tthis._guard = guard;\n\t\tthis._index = index;\n\t\tthis._path = deconstructedPath;\n\t\tthis._outlet = outlet;\n\t\tthis._routes = [];\n\t\tthis._defaultParams = <P> defaultParams;\n\t\tthis._trailingSlashMustMatch = trailingSlashMustMatch;\n\t}\n\n\tappend(add: Route<Context, Parameters> | Route<Context, Parameters>[]) {\n\t\tconst append = (route: Route<Context, Parameters>) => {\n\t\t\tif (hasBeenAppended(route)) {\n\t\t\t\tthrow new Error('Cannot append route that has already been appended');\n\t\t\t}\n\n\t\t\tthis._routes.push(route);\n\t\t\tparentMap.set(route, this);\n\t\t};\n\n\t\tif (Array.isArray(add)) {\n\t\t\tfor (const route of add) {\n\t\t\t\tappend(route);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tappend(add);\n\t\t}\n\t}\n\n\tlink(params?: LinkParams): string {\n\t\treturn findRouter(this).link(this, params);\n\t}\n\n\tmatch(segments: string[], hasTrailingSlash: boolean, searchParams: UrlSearchParams): null | MatchResult<DefaultParameters | P> {\n\t\tconst result = matchPath(this._path, segments);\n\t\tif (result === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!result.hasRemaining && this._trailingSlashMustMatch && this._path.trailingSlash !== hasTrailingSlash) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Only extract the search params defined in the route's path.\n\t\tconst knownSearchParams = this._path.searchParameters.reduce<SearchParams>((list, name) => {\n\t\t\tconst value = searchParams.getAll(name);\n\t\t\tif (value !== undefined) {\n\t\t\t\tlist[ name ] = value;\n\t\t\t}\n\t\t\treturn list;\n\t\t}, {});\n\n\t\tconst params = this._computeParams(result.values, new UrlSearchParams(knownSearchParams));\n\t\tif (params === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\thasRemaining: result.hasRemaining,\n\t\t\toffset: result.offset,\n\t\t\tparams,\n\t\t\trawPathValues: result.values,\n\t\t\trawSearchParams: knownSearchParams\n\t\t};\n\t}\n\n\tselect(context: C, segments: string[], hasTrailingSlash: boolean, searchParams: UrlSearchParams): string | Selection[] {\n\t\tconst matchResult = this.match(segments, hasTrailingSlash, searchParams);\n\n\t\t// Return early if possible.\n\t\tif (!matchResult || matchResult.hasRemaining && this._routes.length === 0 && !this._fallback && !this._outlet) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { params } = matchResult;\n\t\tif (this._guard) {\n\t\t\tconst guardResult = this._guard({ context, params });\n\t\t\tif (typeof guardResult === 'string') {\n\t\t\t\treturn guardResult;\n\t\t\t}\n\t\t\tif (!guardResult) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\tlet handler = this._exec;\n\t\tlet type: MatchType = MatchType.PARTIAL;\n\t\tlet redirect: string | undefined;\n\t\tlet remainingSelection: Selection[] | undefined;\n\t\tlet selected = false;\n\n\t\tif (matchResult.hasRemaining) {\n\t\t\t// Match the remaining segments. Return a hierarchy if nested routes were selected.\n\t\t\tconst remainingSegments = segments.slice(matchResult.offset);\n\t\t\tselected = this._routes.some((nested) => {\n\t\t\t\tconst nestedResult = nested.select(context, remainingSegments, hasTrailingSlash, searchParams);\n\t\t\t\tif (typeof nestedResult === 'string') {\n\t\t\t\t\tredirect = nestedResult;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (nestedResult.length > 0) {\n\t\t\t\t\tremainingSelection = nestedResult;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\t// No remaining segments matched, only select this route if a fallback handler was specified.\n\t\t\tif (!selected && (this._outlet || this._fallback)) {\n\t\t\t\ttype = MatchType.ERROR;\n\t\t\t\tselected = true;\n\t\t\t\thandler = this._fallback || noop;\n\t\t\t}\n\t\t}\n\t\t// Select this route, configure the index handler if specified.\n\t\telse {\n\t\t\tselected = true;\n\t\t\ttype = MatchType.INDEX;\n\t\t\tif (this._index) {\n\t\t\t\thandler = this._index;\n\t\t\t}\n\t\t}\n\n\t\tif (!selected) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (redirect !== undefined) {\n\t\t\treturn redirect;\n\t\t}\n\n\t\tconst { rawPathValues, rawSearchParams } = matchResult;\n\t\tconst selection = {\n\t\t\t// Use a noop handler if exec was not provided. Something needs to be returned otherwise the router may\n\t\t\t// think no routes were selected.\n\t\t\thandler: handler || noop,\n\t\t\tpath: this.path,\n\t\t\toutlet: this.outlet,\n\t\t\tparams,\n\t\t\trawPathValues,\n\t\t\trawSearchParams,\n\t\t\troute: this,\n\t\t\ttype\n\t\t};\n\t\treturn remainingSelection ? [ selection, ...remainingSelection ] : [ selection ];\n\t}\n}\n\nexport default Route;\n\n\n\n// WEBPACK FOOTER //\n// Route.ts","import has from '@dojo/core/has';\nimport { Injector } from '@dojo/widget-core/Injector';\nimport { ArticleItem } from './interfaces';\n\nexport class Context extends Injector {\n\tprivate _articles?: ArticleItem[];\n\tprivate _item?: ArticleItem;\n\n\tprivate _category: string;\n\tprivate _page: number;\n\tprivate _itemId: string;\n\n\tconstructor() {\n\t\tsuper({});\n\t}\n\n\tpublic async fetchStories(category: string, page: number) {\n\t\tconst catKey = category === 'top' ? 'news' : category === 'new' ? 'newest' : category;\n\t\tthis._page = page;\n\t\tthis._category = category;\n\t\tthis._articles = undefined;\n\t\tthis.emit({ type: 'invalidate' });\n\t\tif (!has('build-time-render')) {\n\t\t\tthis._articles = await fetch(`https://api.hackerwebapp.com/${catKey}?page=${page}`).then((response) => response.json());\n\t\t}\n\t\tthis.emit({ type: 'invalidate' });\n\t}\n\n\tpublic async fetchItem(id: string) {\n\t\tthis._item = undefined;\n\t\tthis._itemId = id;\n\t\tif (!has('build-time-render')) {\n\t\t\tthis._item = await fetch(`https://api.hackerwebapp.com/item/${id}`).then((response) => response.json());\n\t\t}\n\t\tthis.emit({ type: 'invalidate' });\n\t}\n\n\tget() {\n\t\treturn this;\n\t}\n\n\tget articles() {\n\t\treturn this._articles;\n\t}\n\n\tget category() {\n\t\treturn this._category;\n\t}\n\n\tget page() {\n\t\treturn this._page;\n\t}\n\n\tget item() {\n\t\treturn this._item;\n\t}\n\n\tget itemId() {\n\t\treturn this._itemId;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/Context.ts","import { v, w } from '@dojo/widget-core/d';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\n\nimport { CommentsOutlet } from './../outlets/CommentsOutlet';\nimport { ContentOutlet } from './../outlets/ContentOutlet';\nimport { MenuContainer } from './../containers/MenuContainer';\n\nimport * as css from './styles/app.m.css';\nexport class App extends WidgetBase {\n\tprotected render() {\n\t\treturn v('div', [\n\t\t\tw(MenuContainer, {}),\n\t\t\tv('main', { classes: css.main }, [\n\t\t\t\tw(ContentOutlet, {}),\n\t\t\t\tw(CommentsOutlet, {})\n\t\t\t])\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/App.ts","import { PropertyChangeRecord } from './interfaces';\nimport { WIDGET_BASE_TYPE } from './Registry';\n\nfunction isObjectOrArray(value: any): boolean {\n\treturn Object.prototype.toString.call(value) === '[object Object]' || Array.isArray(value);\n}\n\nexport function always(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: true,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function ignore(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: false,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function reference(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: previousProperty !== newProperty,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function shallow(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\tlet changed = false;\n\n\tconst validOldProperty = previousProperty && isObjectOrArray(previousProperty);\n\tconst validNewProperty = newProperty && isObjectOrArray(newProperty);\n\n\tif (!validOldProperty || !validNewProperty) {\n\t\treturn {\n\t\t\tchanged: true,\n\t\t\tvalue: newProperty\n\t\t};\n\t}\n\n\tconst previousKeys = Object.keys(previousProperty);\n\tconst newKeys = Object.keys(newProperty);\n\n\tif (previousKeys.length !== newKeys.length) {\n\t\tchanged = true;\n\t}\n\telse {\n\t\tchanged = newKeys.some((key) => {\n\t\t\treturn newProperty[key] !== previousProperty[key];\n\t\t});\n\t}\n\treturn {\n\t\tchanged,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function auto(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\tlet result;\n\tif (typeof newProperty === 'function') {\n\t\tif (newProperty._type === WIDGET_BASE_TYPE) {\n\t\t\tresult = reference(previousProperty, newProperty);\n\t\t}\n\t\telse {\n\t\t\tresult = ignore(previousProperty, newProperty);\n\t\t}\n\t}\n\telse if (isObjectOrArray(newProperty)) {\n\t\tresult = shallow(previousProperty, newProperty);\n\t}\n\telse {\n\t\tresult = reference(previousProperty, newProperty);\n\t}\n\treturn result;\n}\n\n\n\n// WEBPACK FOOTER //\n// diff.ts","import { Map } from '@dojo/shim/Map';\nimport { Evented } from '@dojo/core/Evented';\nimport { Constructor, RegistryLabel, WidgetBaseInterface } from './interfaces';\nimport { Registry, RegistryEventObject, RegistryItem } from './Registry';\nimport { Injector } from './Injector';\n\nexport class RegistryHandler extends Evented {\n\tprivate _registry = new Registry();\n\tprivate _baseRegistry: Registry;\n\tprivate _registryWidgetLabelMap: Map<Registry, RegistryLabel[]> = new Map();\n\tprivate _registryInjectorLabelMap: Map<Registry, RegistryLabel[]> = new Map();\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.own(this._registry);\n\t}\n\n\tpublic set base(baseRegistry: Registry) {\n\t\tthis._registryWidgetLabelMap.delete(this._baseRegistry);\n\t\tthis._registryInjectorLabelMap.delete(this._baseRegistry);\n\t\tthis._baseRegistry = baseRegistry;\n\t}\n\n\tpublic define(label: RegistryLabel, widget: RegistryItem): void {\n\t\tthis._registry.define(label, widget);\n\t}\n\n\tpublic defineInjector(label: RegistryLabel, injector: Injector): void {\n\t\tthis._registry.defineInjector(label, injector);\n\t}\n\n\tpublic has(label: RegistryLabel): boolean {\n\t\treturn this._registry.has(label) || this._baseRegistry.has(label);\n\t}\n\n\tpublic hasInjector(label: RegistryLabel): boolean {\n\t\treturn this._registry.hasInjector(label) || this._baseRegistry.hasInjector(label);\n\t}\n\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel, globalPrecedence: boolean = false): Constructor<T> | null {\n\t\treturn this._get(label, globalPrecedence, 'get', this._registryWidgetLabelMap);\n\t}\n\n\tpublic getInjector<T extends Injector>(label: RegistryLabel, globalPrecedence: boolean = false): T | null {\n\t\treturn this._get(label, globalPrecedence, 'getInjector', this._registryInjectorLabelMap);\n\t}\n\n\tprivate _get(label: RegistryLabel, globalPrecedence: boolean, getFunctionName: 'getInjector' | 'get', labelMap: Map<Registry, RegistryLabel[]>): any {\n\t\tconst registries = globalPrecedence ? [ this._baseRegistry, this._registry ] : [ this._registry, this._baseRegistry ];\n\t\tfor (let i = 0; i < registries.length; i++) {\n\t\t\tconst registry: any = registries[i];\n\t\t\tif (!registry) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst item = registry[getFunctionName](label);\n\t\t\tconst registeredLabels = labelMap.get(registry) || [];\n\t\t\tif (item) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t\telse if (registeredLabels.indexOf(label) === -1) {\n\t\t\t\tconst handle = registry.on(label, (event: RegistryEventObject) => {\n\t\t\t\t\tif (event.action === 'loaded' && (this as any)[getFunctionName](label, globalPrecedence) === event.item) {\n\t\t\t\t\t\tthis.emit({ type: 'invalidate' });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.own(handle);\n\t\t\t\tlabelMap.set(registry, [ ...registeredLabels, label]);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default RegistryHandler;\n\n\n\n// WEBPACK FOOTER //\n// RegistryHandler.ts","import { Evented } from '@dojo/core/Evented';\nimport Map from '@dojo/shim/Map';\nimport { NodeHandlerInterface } from './interfaces';\n\n/**\n * Enum to identify the type of event.\n * Listening to 'Projector' will notify when projector is created or updated\n * Listening to 'Widget' will notify when widget root is created or updated\n */\nexport enum NodeEventType {\n\tProjector = 'Projector',\n\tWidget = 'Widget'\n}\n\nexport class NodeHandler extends Evented implements NodeHandlerInterface {\n\n\tprivate _nodeMap = new Map<string, HTMLElement>();\n\n\tpublic get(key: string): HTMLElement | undefined {\n\t\treturn this._nodeMap.get(key);\n\t}\n\n\tpublic has(key: string): boolean {\n\t\treturn this._nodeMap.has(key);\n\t}\n\n\tpublic add(element: HTMLElement, key: string): void {\n\t\tthis._nodeMap.set(key, element);\n\t\tthis.emit({ type: key });\n\t}\n\n\tpublic addRoot(): void {\n\t\tthis.emit({ type: NodeEventType.Widget });\n\t}\n\n\tpublic addProjector(): void {\n\t\tthis.emit({ type: NodeEventType.Projector });\n\t}\n\n\tpublic clear(): void {\n\t\tthis._nodeMap.clear();\n\t}\n}\n\nexport default NodeHandler;\n\n\n\n// WEBPACK FOOTER //\n// NodeHandler.ts","import { Outlet } from '@dojo/routing/Outlet';\n\nimport { CommentsContainer } from './../containers/CommentsContainer';\n\nexport const CommentsOutlet = Outlet(CommentsContainer, 'comments', ({ params }) => {\n\treturn { id: params.id };\n});\n\nexport default CommentsOutlet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/outlets/CommentsOutlet.ts","import { handleDecorator } from './handleDecorator';\nimport { BeforeProperties } from './../interfaces';\n\n/**\n * Decorator that adds the function passed of target method to be run\n * in the `beforeProperties` lifecycle.\n */\nexport function beforeProperties(method: BeforeProperties): (target: any) => void;\nexport function beforeProperties(): (target: any, propertyKey: string) => void;\nexport function beforeProperties(method?: BeforeProperties) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator('beforeProperties', propertyKey ? target[propertyKey] : method);\n\t});\n}\n\nexport default beforeProperties;\n\n\n\n// WEBPACK FOOTER //\n// beforeProperties.ts","import { Container } from '@dojo/widget-core/Container';\n\nimport { Context } from './../Context';\nimport { Comments, CommentsProperties } from './../widgets/Comments';\n\nfunction getProperties(context: Context, properties: CommentsProperties): CommentsProperties {\n\tconst { id } = properties;\n\tif (id !== context.itemId) {\n\t\tcontext.fetchItem(id);\n\t}\n\n\treturn {\n\t\titem: context.item,\n\t\tid\n\t};\n}\n\nexport const CommentsContainer = Container(Comments, 'state', { getProperties });\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/containers/CommentsContainer.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v, w } from '@dojo/widget-core/d';\nimport { Link } from '@dojo/routing/Link';\n\nimport { ArticleItem } from './../interfaces';\nimport { Comment } from './Comment';\nimport { Loading } from './Loading';\n\nimport * as css from './styles/comments.m.css';\n\nexport interface CommentsProperties {\n\tid: string;\n\titem?: ArticleItem;\n}\n\nexport class Comments extends WidgetBase<CommentsProperties> {\n\n\tprotected render() {\n\t\tconst { item } = this.properties;\n\n\t\treturn item ? [\n\t\t\tv('article', { classes: css.article }, [\n\t\t\t\tv('h1', [\n\t\t\t\t\tv('a', { href: item.url, classes: css.title }, [ item.title ])\n\t\t\t\t]),\n\t\t\t\tv('p', [\n\t\t\t\t\t`${item.points || 0} points`,\n\t\t\t\t\titem.user ? w(Link, { to: 'user', params: { user: item.user }, classes: css.user }, [\n\t\t\t\t\t\t` by ${item.user}`\n\t\t\t\t\t]) : null\n\t\t\t\t])\n\t\t\t]),\n\t\t\tv('div', { classes: css.comments }, [\n\t\t\t\tv('h2', { classes: css.commentCount }, [ `${item.comments_count} comments` ]),\n\t\t\t\tv('div', item.comments.map((comment, index) => {\n\t\t\t\t\treturn w(Comment, { key: index, comment });\n\t\t\t\t}))\n\t\t\t])\n\t\t] : w(Loading, {});\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Comments.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v, w } from '@dojo/widget-core/d';\nimport { Link } from '@dojo/routing/Link';\n\nimport { CommentItem } from './../interfaces';\nimport * as css from './styles/comment.m.css';\n\nexport interface CommentProperties {\n\tcomment: CommentItem;\n}\n\nexport class Comment extends WidgetBase<CommentProperties> {\n\n\tprotected render() {\n\t\tconst { comment: { user, content, time_ago, comments = [] } } = this.properties;\n\t\treturn v('div', { classes: css.root }, [\n\t\t\tv('header', { classes: css.padding }, [\n\t\t\t\tuser ? w(Link, {\n\t\t\t\t\tto: 'user',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tuser\n\t\t\t\t\t},\n\t\t\t\t\tclasses: css.user\n\t\t\t\t}, [ user ]) : null,\n\t\t\t\tv('span', { classes: css.time }, [ time_ago ])\n\t\t\t]),\n\t\t\tv('div', { key: 'content', innerHTML: content, classes: css.comment }),\n\t\t\tv('div', { key: 'comments', classes: css.padding }, comments.map((comment, index) => {\n\t\t\t\treturn w(Comment, { comment, key: index });\n\t\t\t}))\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Comment.ts","// removed by extract-text-webpack-plugin\nmodule.exports = {\" _key\":\"comment\",\"root\":\"pMN12bHs\",\"padding\":\"UR0OJAIy\",\"user\":\"_1dY2vtTm\",\"time\":\"_2Qtl0SzL\",\"comment\":\"_2va-73Cf\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/comment.m.css\n// module id = 66\n// module chunks = 0","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v } from '@dojo/widget-core/d';\n\nimport * as css from './styles/loading.m.css';\n\nexport class Loading extends WidgetBase {\n\trender() {\n\t\treturn v('div', { key: this.properties.key, classes: css.spinner });\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Loading.ts","// removed by extract-text-webpack-plugin\nmodule.exports = {\" _key\":\"loading\",\"spinner\":\"_4Ju1HXhy\",\"sk-scaleout\":\"hC-Nk2Mx\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/loading.m.css\n// module id = 68\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\" _key\":\"comments\",\"article\":\"_2NGniQ8a\",\"title\":\"_1L07Wn8k\",\"user\":\"_3iYvUP2G\",\"comments\":\"_2z1n0C37\",\"commentCount\":\"_1lGsJjrS\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/comments.m.css\n// module id = 69\n// module chunks = 0","import { Outlet } from '@dojo/routing/Outlet';\n\nimport { ContentContainer } from './../containers/ContentContainer';\n\nexport const ContentOutlet = Outlet(ContentContainer, 'content', ({ params }) => {\n\treturn { category: params.category, pageNumber: parseInt(params.page, 10) };\n});\n\nexport default ContentOutlet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/outlets/ContentOutlet.ts","import { Container } from '@dojo/widget-core/Container';\n\nimport { Context } from './../Context';\nimport { Content, ContentProperties } from './../widgets/Content';\n\nfunction getProperties(context: Context, properties: ContentProperties): ContentProperties {\n\tconst { category = 'top', pageNumber = 1 } = properties;\n\tif (category !== context.category || pageNumber !== context.page) {\n\t\tcontext.fetchStories(category, pageNumber);\n\t}\n\n\treturn {\n\t\tarticles: context.articles,\n\t\tcategory: context.category,\n\t\tpageNumber\n\t};\n}\n\nexport const ContentContainer = Container(Content, 'state', { getProperties });\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/containers/ContentContainer.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { w, v } from '@dojo/widget-core/d';\nimport { DNode } from '@dojo/widget-core/interfaces';\nimport { Link } from '@dojo/routing/Link';\n\nimport { ArticleItem } from './../interfaces';\nimport { Article } from './Article';\nimport * as css from './styles/content.m.css';\n\nexport interface ContentProperties {\n\tarticles?: ArticleItem[];\n\tcategory: string;\n\tpageNumber: number;\n}\n\nexport class Content extends WidgetBase<ContentProperties> {\n\n\tprotected render() {\n\t\tconst { articles = [], pageNumber, category } = this.properties;\n\t\tconst articlesNodes: DNode[] = [];\n\t\tconst length = articles.length || 30;\n\t\tfor (let index = 0; index < length; index++) {\n\t\t\tarticlesNodes.push(w(Article, { key: index, index, item: articles[index], pageNumber }));\n\t\t}\n\n\t\tconst pagination = v('div', { classes: css.pagination }, [\n\t\t\tpageNumber > 1 ? w(Link, {\n\t\t\t\tkey: 'prev',\n\t\t\t\tto: 'content',\n\t\t\t\tparams: {\n\t\t\t\t\tcategory,\n\t\t\t\t\tpage: `${pageNumber - 1}`\n\t\t\t\t},\n\t\t\t\tclasses: css.pageLink,\n\t\t\t\tstyles: {\n\t\t\t\t\tcolor: '#000'\n\t\t\t\t}\n\t\t\t}, [ '< prev' ]) : v('a', {\n\t\t\t\tkey: 'disabled-prev',\n\t\t\t\tclasses: css.pageLink,\n\t\t\t\tstyles: {\n\t\t\t\t\tcolor: 'rgba(49, 40, 40, 0.65)'\n\t\t\t\t}\n\t\t\t} , [ '< prev' ]),\n\t\t\tv('span', { classes: css.pageNumber }, [ `${pageNumber}` ]),\n\t\t\tarticles.length === 30 ? w(Link, {\n\t\t\t\tkey: 'next',\n\t\t\t\tto: 'content',\n\t\t\t\tparams: {\n\t\t\t\t\tcategory,\n\t\t\t\t\tpage: `${pageNumber + 1}`\n\t\t\t\t},\n\t\t\t\tclasses: css.pageLink,\n\t\t\t\tstyles: {\n\t\t\t\t\tcolor: '#000'\n\t\t\t\t}\n\t\t\t}, [ 'next >' ]) : v('a', {\n\t\t\t\tkey: 'disabled-next',\n\t\t\t\tclasses: css.pageLink,\n\t\t\t\tstyles: {\n\t\t\t\t\tcolor: 'rgba(49, 40, 40, 0.65)'\n\t\t\t\t}\n\t\t\t} , [ 'next >' ])\n\t\t]);\n\n\t\treturn [ pagination, ...articlesNodes];\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Content.ts","import { Link } from '@dojo/routing/Link';\nimport { v, w } from '@dojo/widget-core/d';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { DNode } from '@dojo/widget-core/interfaces';\n\nimport { ArticleItem } from './../interfaces';\n\nimport * as css from './styles/article.m.css';\n\nexport interface ArticleProperties {\n\titem?: ArticleItem;\n\tindex: number;\n\tpageNumber: number;\n}\n\nexport class Article extends WidgetBase<ArticleProperties> {\n\n\tprivate _articleShell() {\n\t\tconst percent = Math.floor(Math.random() * 20 + 80);\n\t\treturn [\n\t\t\tv('h2', { styles: { width: `${percent}%` }, classes: [ css.titleShell, css.animated, css.animatedTitle ] } ),\n\t\t\tv('p', { classes: [ css.subtitleShell, css.animated, css.animatedSubTitle ] })\n\t\t];\n\t}\n\n\tprivate _renderArticle(article: ArticleItem) {\n\t\tconst { url, title, points, user, id, comments_count, time_ago } = article;\n\t\tconst commentText = comments_count === 0 ? 'discuss' : `${comments_count} comments`;\n\n\t\tlet articleLink: DNode;\n\n\t\tif (url.substr(0, 8) === 'item?id=') {\n\t\t\tarticleLink = w(Link, {\n\t\t\t\tkey: 'article',\n\t\t\t\tto: 'comments',\n\t\t\t\tparams: {\n\t\t\t\t\tid: `${url.substr(8)}`\n\t\t\t\t}\n\t\t\t}, [ title ]);\n\t\t}\n\t\telse {\n\t\t\tarticleLink = v('a', { key: 'article', href: url, target: 'none' }, [ title ]);\n\t\t}\n\n\t\treturn [\n\t\t\tv('h2', { classes: css.title, styles: {} }, [ articleLink ]),\n\t\t\tv('p', { classes: css.details }, [\n\t\t\t\tv('span', { key: 'points' }, [ `${points || 0} points ${user ? 'by ' : ''}` ]),\n\t\t\t\tuser ? w(Link, {\n\t\t\t\t\tkey: 'user',\n\t\t\t\t\tto: 'user',\n\t\t\t\t\tparams: { user },\n\t\t\t\t\tclasses: css.link\n\t\t\t\t}, [\n\t\t\t\t\tuser\n\t\t\t\t]) : null,\n\t\t\t\tv('span', { key: 'time-ago'}, [ ` ${time_ago} ` ]),\n\t\t\t\tw(Link, {\n\t\t\t\t\tkey: 'comments',\n\t\t\t\t\tto: 'comments',\n\t\t\t\t\tparams: { id: `${id}` },\n\t\t\t\t\tclasses: css.link\n\t\t\t\t}, [ commentText ])\n\t\t\t])\n\t\t];\n\n\t}\n\n\tprotected render() {\n\t\tconst { item, index, pageNumber } = this.properties;\n\t\tconst articleNumber = `${(pageNumber - 1) * 30 + index + 1}`;\n\n\t\treturn v('article', { classes: css.root }, [\n\t\t\tv('span', { classes: css.pageNumber }, [ articleNumber ]),\n\t\t\tv('div', {\n\t\t\t\tkey: index,\n\t\t\t\tclasses: css.post\n\t\t\t}, item ? this._renderArticle(item) : this._articleShell())\n\t\t]);\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Article.ts","// removed by extract-text-webpack-plugin\nmodule.exports = {\" _key\":\"article\",\"root\":\"_25Pck9HL\",\"pageNumber\":\"_2w4AqmJQ\",\"post\":\"_3XB5fE0_\",\"title\":\"_3LLrYYZ1\",\"details\":\"_1V_edkRC\",\"link\":\"_2iNp8P4w\",\"comments\":\"_2cpI_Mjd\",\"animated\":\"_2V3_tXBL\",\"placeHolderShimmer\":\"_1Bp0AL0K\",\"animatedTitle\":\"p2vwPrI-\",\"animatedSubTitle\":\"_1lBoojPu\",\"titleShell\":\"_2Ku851Pk\",\"subtitleShell\":\"_1bX4ME4k\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/article.m.css\n// module id = 74\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\" _key\":\"content\",\"pageLink\":\"_2LM_mtSl\",\"pagination\":\"_2z4dHPNL\",\"pageNumber\":\"_6qE-Cese\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/content.m.css\n// module id = 75\n// module chunks = 0","import { Container } from '@dojo/widget-core/Container';\n\nimport { Context } from './../Context';\nimport { Menu, MenuProperties } from './../widgets/Menu';\n\nfunction getProperties(context: Context, properties: MenuProperties): MenuProperties {\n\treturn {\n\t\tcurrentCategory: context.category\n\t};\n}\n\nexport const MenuContainer = Container(Menu, 'state', { getProperties });\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/containers/MenuContainer.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v, w } from '@dojo/widget-core/d';\nimport { Link } from '@dojo/routing/Link';\n\nimport { MenuItem } from './MenuItem';\nimport * as css from './styles/menu.m.css';\n\nconst categories = [ 'top', 'new', 'show', 'ask', 'jobs' ];\n\nexport interface MenuProperties {\n\tcurrentCategory?: string;\n}\n\nexport class Menu extends WidgetBase<MenuProperties> {\n\n\tprivate _logoLoaded = false;\n\n\tprivate _onLogoLoad() {\n\t\tthis._logoLoaded = true;\n\t\tthis.invalidate();\n\t}\n\n\trender() {\n\t\tconst {currentCategory = '' } = this.properties;\n\n\t\treturn v('nav', { classes: css.root }, [\n\t\t\tw(Link, { to: 'content', params: { category: 'top', page: 1  }, classes: css.home }, [\n\t\t\t\tv('img', { onload: this._onLogoLoad, classes: this._logoLoaded ? css.logoLoaded : css.logo, src: './img/logo.svg', alt: 'Home' })\n\t\t\t]),\n\t\t\tv('ol', { classes: css.menuContainer }, [ ...categories.map((category) => {\n\t\t\t\treturn w(MenuItem, {\n\t\t\t\t\tkey: category,\n\t\t\t\t\tselected: category === currentCategory,\n\t\t\t\t\tcategory\n\t\t\t\t}, [ category ]);\n\t\t\t})])\n\t\t]);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/Menu.ts","import { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { v, w } from '@dojo/widget-core/d';\nimport { Link } from '@dojo/routing/Link';\n\nimport * as css from './styles/menuItem.m.css';\n\nexport interface MenuItemProperties {\n\tselected: boolean;\n\tcategory: string;\n}\n\nexport class MenuItem extends WidgetBase<MenuItemProperties> {\n\n\trender() {\n\t\tconst { selected } = this.properties;\n\n\t\treturn v('li', { classes: css.root }, [\n\t\t\tw(Link, {\n\t\t\t\tto: 'content',\n\t\t\t\tparams: { category: this.properties.category, page: '1' },\n\t\t\t\tclasses: [ css.item, selected ? css.selected : null ]\n\t\t\t}, this.children)\n\t\t]);\n\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./node_modules/@dojo/cli-build-webpack/loaders/css-module-dts-loader?type=ts&instanceName=0_dojo!./src/widgets/MenuItem.ts","// removed by extract-text-webpack-plugin\nmodule.exports = {\" _key\":\"menuItem\",\"root\":\"_3nC3wHuO\",\"item\":\"_2otQ-Bk4\",\"selected\":\"_3H86Omvm\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/menuItem.m.css\n// module id = 79\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\" _key\":\"menu\",\"root\":\"_34HPGizk\",\"menuContainer\":\"_1lZUlBuW\",\"home\":\"_3ExrLjEz\",\"logoLoaded\":\"_1EbSAPOw\",\"fadein\":\"_34vksMod\",\"logo\":\"_2cdP4aDq\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/menu.m.css\n// module id = 80\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\" _key\":\"app\",\"main\":\"NiAAEtki\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/widgets/styles/app.m.css\n// module id = 81\n// module chunks = 0"],"sourceRoot":""}